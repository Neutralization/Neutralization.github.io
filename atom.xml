<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Hâº + OHâ» â†’ Hâ‚‚O</title><link>https://naizi.ch/</link><description>Recent content on Hâº + OHâ» â†’ Hâ‚‚O</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Tue, 06 Jun 2023 07:28:39 +0000</lastBuildDate><atom:link href="https://naizi.ch/atom.xml" rel="self" type="application/rss+xml"/><item><title>Search</title><link>https://naizi.ch/search/</link><pubDate>Tue, 06 Jun 2023 07:28:39 +0000</pubDate><guid>https://naizi.ch/search/</guid><description/></item><item><title>è®°å½•ä¸€äº›å’Œ Unicode ä¸æ–­ä½œæ–—äº‰çš„æ—¥å­</title><link>https://naizi.ch/2022/08/09/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%BA%9B%E5%92%8C-unicode-%E4%B8%8D%E6%96%AD%E4%BD%9C%E6%96%97%E4%BA%89%E7%9A%84%E6%97%A5%E5%AD%90/</link><pubDate>Tue, 09 Aug 2022 00:00:00 +0000</pubDate><guid>https://naizi.ch/2022/08/09/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%BA%9B%E5%92%8C-unicode-%E4%B8%8D%E6%96%AD%E4%BD%9C%E6%96%97%E4%BA%89%E7%9A%84%E6%97%A5%E5%AD%90/</guid><description>&lt;p>æœ€å¼€å§‹ç»™å“”å“©å“”å“©å‘¨åˆŠå†™&lt;a class="link" href="https://github.com/Neutralization/BiliBiliRankingScripts" target="_blank" rel="noopener"
>&lt;code>è‡ªåŠ¨åŒ–è„šæœ¬&lt;/code>&lt;/a>çš„æ—¶å€™ï¼Œè¿˜ä¸è§‰å¾—ç”Ÿæˆå›¾ç‰‡èƒ½é‡åˆ°ä»€ä¹ˆå‘ã€‚æ¯•ç«Ÿä¹‹å‰ä¹Ÿç”¨è¿‡ Pillow åº“ï¼Œç®—æ˜¯æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚è€Œä¸”é‡åˆ°çš„éƒ½æ˜¯äº›åœ¨æ™®é€šä¸è¿‡çš„æ­£å¸¸æ–‡æœ¬ã€‚&lt;/p>
&lt;p>ç›´åˆ°èº²ä¸å¼€çš„ emoji å¼€å§‹å‡ºç°äº†ã€‚&lt;/p>
&lt;h2 id="ä¸€äº›æ™®é€šçš„-emoji">ä¸€äº›æ™®é€šçš„ Emoji&lt;/h2>
&lt;p>â˜€â˜â˜‚â˜ƒâ˜„â˜â˜‘â˜”â˜•â˜˜&lt;/p>
&lt;p>åˆšå¼€å§‹é‡åˆ°è¿™ç±»ä¹Ÿè¿˜å¥½ï¼Œå› ä¸ºå¾ˆæ˜¾ç„¶ï¼Œåªæ˜¯æ–‡æœ¬çš„å­—ä½“æ²¡æœ‰è¿™éƒ¨åˆ† emojiï¼ŒPillow å°±å…¨éƒ¨ç»™æ˜¾ç¤ºæˆäº†æ–¹æ¡†ã€‚ç®€å•æ¡†äº†ä¸ªèŒƒå›´ï¼Œç”¨å¦ä¸€ä¸ªå­—ä½“æ¥æ¸²æŸ“å°±æ˜¯äº†ã€‚&lt;/p>
&lt;p>ä½†åæ¥å°±å¼€å§‹é‡åˆ°å„ç§æ ‡é¢˜é‡Œçš„èŠ±æ´»ï¼Œä»€ä¹ˆä¸Šä¸‹æ ‡å­—ç¬¦èŠ±ä½“å­—ç²—æ–œä½“å…¨æ¥äº†ã€‚æ¯”å¦‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://www.bilibili.com/video/BV1xV41167qm" target="_blank" rel="noopener"
>ã€ğŸ’ğŠ ğŸ”ğŸğ…ğğ’ã€‘è¿™é¦–ã€Šğ‘­ğ’‚ğ’ğ’ğ’Šğ’ğ’ˆ ğ‘¨ğ’ˆğ’‚ğ’Šğ’ã€‹å¦‚ä»Šæ²»æ„ˆäº†å¤šå°‘äººï¼ï¼! â„³â‚¯ã•-æ²‰ æ²¦&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>è‡ªæ­¤çœŸæ­£æ‰“å“äº†ä¸ Unicode æ–—äº‰çš„ç¬¬ä¸€æªã€‚&lt;/p>
&lt;h2 id="ä¸€äº›æ™®é€šçš„-unicode">ä¸€äº›æ™®é€šçš„ Unicode&lt;/h2>
&lt;p>ä¸Šä¸‹æ ‡å­—ç¬¦èŠ±ä½“å­—ç²—æ–œä½“ä¹Ÿèƒ½æ¥å—ï¼Œäººå®¶çœ‹èµ·æ¥è‡³å°‘è¿˜æ˜¯ä¸ªæ­£ç»å­—ç¬¦ã€‚è§£å†³æ–¹æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„ç®€å•ç²—æš´ï¼šæ‰¾ä¸€ä¸ªå®šä¹‰äº†è¿™éƒ¨åˆ†å­—ç¬¦çš„å­—ä½“ï¼Œå•ç‹¬åŒ¹é…æ¸²æŸ“ã€‚&lt;/p>
&lt;p>äºæ˜¯è„šæœ¬é‡Œçš„ UnicodeA_F æ…¢æ…¢å¢åŠ åˆ°äº† UnicodeD_Fã€‚åˆ’ä¸€ä¸ªæ–°çš„æ­£åˆ™èŒƒå›´ï¼ŒåŒ¹é…ä¸Šä¸€ä¸ªæ–°çš„å­—ä½“ï¼Œå¦‚æ­¤æŸ¥æ¼è¡¥ç¼ºçš„å·¥ä½œä¹Ÿè¿˜èƒ½æ¥å—ï¼Œæ¯•ç«Ÿé‡åˆ°ç‰¹æ®Šå­—ç¬¦çš„åœºåˆç›¸å¯¹è¿˜æ˜¯éå¸¸æœ‰é™çš„ã€‚&lt;/p>
&lt;p>ç›´åˆ°çœŸæ­£çš„é‡é‡çº§ä¸Šåœºäº†ã€‚&lt;/p>
&lt;h2 id="combining-å­—ç¬¦">Combining å­—ç¬¦&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.bilibili.com/video/BV1U44y1E7Wm" target="_blank" rel="noopener"
>âœ¥æˆ‘Ò‰ÍÍ›Ì€ÌˆÌˆÌ¾ÍƒÍ€Í‚ÌŠçš„æ¨¡Ò‰ÍÍ¢Ì‹ÍƒÍ‹ÌˆÌ‘Í‹Ì‰Ì–Ì­Ì±ÍÌ©Í•Í“Í…æ ·å“ÒˆÍÌÌÌ…ÌšÌ’ÌÍ‚Í„.åˆ°ä½ ÒˆÌ›ÍÌÌ„ÍÌƒÍ—ÍƒÍ’Í’ÍŠÌ¿Í›Ì’äº†ï¼Ÿï½â¤âœ¥&lt;/a>&lt;/p>
&lt;p>åªèƒ½æ‰¿è®¤å®ƒæ€æ­»äº†æ¯”èµ›ã€‚ä½†å…¶å®ç±»ä¼¼çš„æ ‡é¢˜å¹¶ä¸æ˜¯ç¬¬ä¸€æ¬¡è§ï¼Œåœ¨æ›´æ—©ä¹‹å‰ï¼Œæˆ‘ç®—æ˜¯è§è¿‡å®ƒçš„ä¸€ä½å¤§å‰è¾ˆï¼š&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nicovideo.jp/watch/sm28869680" target="_blank" rel="noopener"
>&lt;img src="https://naizi.ch/pic/2022-08-09-fight-with-unicode/Snipaste_2022-08-10_16-32-58.png"
loading="lazy"
alt="ã€åˆéŸ³ãƒŸã‚¯ã€‘å®‡å®™å¤§è§„æ¨¡ 11 æ¬¡å…ƒæ„é€ ä½“ã€ATOLSã€‘"
>&lt;/a>&lt;/p>
&lt;p>è¿™ä½å‰è¾ˆæ›´æ˜¯é‡é‡çº§ï¼Œå³ä¾¿åœ¨å†™è¿™ç¯‡è®°å½•çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿä¸å¾—ä¸ä½©æœè¿™ç§å’Œè§†é¢‘å¥‘åˆçš„æ ‡é¢˜é£æ ¼ç¡®å®æ˜¯éå¸¸åˆ°ä½ã€‚&lt;/p>
&lt;p>èƒ½åšåˆ°è¿™ç§æ•ˆæœçš„åŸå› æ˜¯ç”±äºå…¶ä¸­å¤§é‡çš„ Combining å­—ç¬¦ï¼Œæ¯”å¦‚æ—¥æ–‡çš„æ¸…æµŠéŸ³ç¬¦å·ï¼Œéƒ¨åˆ†å°è¯­ç§çš„éŸ³æ ‡å’Œä¸€äº›ç‹¬ç‰¹çš„ç»„è¯æ–¹å¼ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ Pillow ç½¢å·¥äº†å‘€ï¼Œè‡£å¦¾æ¸²æŸ“ä¸æ¥ï¼Œæ‚¨è¿˜æ˜¯å¦è¯·é«˜æ˜å§ã€‚&lt;/p>
&lt;p>æ€æ¥æƒ³å»ä¸å¾—æ³•ï¼Œæœ€åæƒ³åˆ°ï¼Œé‚£æ—¢ç„¶ç½‘é¡µå‰ç«¯èƒ½å¤Ÿæ­£å¸¸å±•ç¤ºï¼Œåº”è¯¥å¯ä»¥é€šè¿‡æ— å¤´æµè§ˆå™¨å‰ç«¯æ¸²æŸ“ç„¶åæˆªå±çš„æ–¹å¼ï¼ŒæŠŠè¿™äº›ç‰¹æ®Šå­—ç¬¦æ­£ç¡®çš„æ˜¾ç¤ºå‡ºæ¥ã€‚&lt;/p>
&lt;p>ç®€å•ç³Šäº†ä¸ªé¡µé¢ï¼Œç®—æ˜¯è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å“”å“©å“”å“©å‘¨åˆŠä¸ Unicode çš„æ–—äº‰ä¹Ÿç®—æ˜¯å‘Šä¸€æ®µè½äº†ã€‚&lt;/p>
&lt;h2 id="mad-å‘¨åˆŠæ–°çš„æŒ‘æˆ˜">MAD å‘¨åˆŠï¼Œæ–°çš„æŒ‘æˆ˜&lt;/h2>
&lt;p>æ¥æ‰‹å¼€å§‹&lt;a class="link" href="https://github.com/Neutralization/MADRankingScripts" target="_blank" rel="noopener"
>&lt;code>MAD å‘¨åˆŠçš„è‡ªåŠ¨åŒ–&lt;/code>&lt;/a>åï¼Œå¾ˆå¿«åˆä¸å¾—ä¸é¢å¯¹ Unicode å¸¦æ¥çš„é—®é¢˜ã€‚ç„¶è€Œå®é™…ä¸Šï¼Œåº”è¯¥è¯´æ˜¯ Unicode å’Œ Adobe å…±åŒå¸¦æ¥çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>ä¸ºäº†ä¿è¯åŸå§‹ MAD å‘¨åˆŠå·¥ç¨‹æ–‡ä»¶çš„çº¯æ´æ€§ï¼Œæ‰€æœ‰çš„æ–‡æœ¬éƒ½æŒ‰ç…§æ–‡æœ¬å›¾å±‚æ¥è¿›è¡Œä¿®æ”¹ã€‚æœ¬æ¥è¿™ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åŸå·¥ç¨‹ä½¿ç”¨çš„å¤§é‡è¡¨è¾¾å¼ï¼Œæ˜¯åŸºäºæ—§ç‰ˆçš„ ExtendScript å¼•æ“ï¼Œæ¯•ç«Ÿå·¥ç¨‹æœ¬èº«æ˜¯ 2016 å¹´çš„äº§ç‰©ã€‚ä½†ä¹‹å‰åšå“”å“©å“”å“©å‘¨åˆŠæ—¶ä¸€ç›´ç”¨çš„æ˜¯ JavaScript å¼•æ“çš„è¡¨è¾¾å¼ï¼Œè¿™å°±äº§ç”Ÿäº†å‡ ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>ç‰¹æ®Šçš„ Unicode å­—ç¬¦éœ€è¦ä½¿ç”¨ä¸åŒçš„å­—ä½“æ‰èƒ½æ­£å¸¸æ˜¾ç¤º&lt;/li>
&lt;li>ExtendScript ä¸èƒ½ä¿®æ”¹æ–‡æœ¬å›¾å±‚çš„éƒ¨åˆ†å­—ä½“æ ·å¼å±æ€§&lt;/li>
&lt;li>ç›¸æ¯” ExtendScriptï¼ŒJavaScript èƒ½å¤Ÿä¿®æ”¹å­—ä½“å­—å·é¢œè‰²ç­‰å±æ€§&lt;/li>
&lt;li>ä¸ºäº†ä½¿ç”¨ JavaScript å¼•æ“å°±è¦æŠŠæ•´ä¸ªå·¥ç¨‹çš„å…¶ä»–è¡¨è¾¾å¼å…¨éƒ¨é‡å†™&lt;/li>
&lt;li>AfterEffects å¯¹é€šè¿‡è„šæœ¬ä¿®æ”¹å­—ä½“çš„è¡Œä¸ºæœ‰å¥‡æ€ªçš„é—®é¢˜ï¼Œä¸èƒ½ä¿è¯æ­£å¸¸æ˜¾ç¤º&lt;/li>
&lt;/ol>
&lt;p>ç”±äºå·¥ä½œé‡å¤ªå¤§ï¼Œé‡å†™å…¨éƒ¨è¡¨è¾¾å¼æ˜¾ç„¶ä¸ç°å®ã€‚åŸºäºæ­¤ï¼Œæˆ‘é€‰æ‹©äº†å¦ä¸€ç§æ–¹å¼ï¼šè®©æ‰€æœ‰èŠ±æ´»éƒ½å˜æˆæ­£å¸¸çš„å­—ç¬¦ã€‚&lt;/p>
&lt;p>è¿™å°±éœ€è¦æœ‰ä¸€ä¸ªè¡¨æ¥è®°å½•è¿™äº›ç‰¹æ®Šå­—ç¬¦åº”è¯¥è¢«æ›¿æ¢ä¸ºå…·ä½“å“ªä¸€ä¸ªå­—ç¬¦ï¼Œäºæ˜¯è¯ç”Ÿäº† &lt;a class="link" href="https://github.com/Neutralization/Antimemetics-Division" target="_blank" rel="noopener"
>&lt;code>Antimemetics-Division&lt;/code>&lt;/a> è¿™æ ·ä¸€ä¸ªå¯¹æŠ—é¡¹ç›®ã€‚&lt;/p>
&lt;p>æœŸé—´åˆ™æ˜¯æ¯ç‡¥çš„ Unicode æŸ¥è¡¨æµè§ˆè¿‡ç¨‹ï¼Œå°½å¯èƒ½å¤šçš„æœé›†è¿™ç±»ç‰¹æ®Šå­—ç¬¦çš„æ ‡é¢˜æ¥ä¿è¯æ›´å¹¿çš„è¦†ç›–é¢ã€‚&lt;/p>
&lt;p>è€Œå Emoji çš„é—®é¢˜ä¹Ÿéœ€è¦å¤„ç†ï¼Œè¿™å°±è¦åˆ’åˆ† Emoji çš„ Unicode å­—ç¬¦èŒƒå›´ã€‚å¹¸å¥½è¿™éƒ¨åˆ†æœ‰æ®å¯æŸ¥ï¼Œåœ¨ Unicode å®˜æ–¹è§„èŒƒä¸­æœ‰è¯¦ç»†çš„è®°å½•å„ä¸ª Emojiã€‚&lt;/p>
&lt;p>Combining å­—ç¬¦çš„é—®é¢˜ä¹Ÿå¾—åˆ°äº†è§£å†³ï¼ŒUnicode å®˜æ–¹è§„èŒƒä¸­è§„å®šäº† Mc Me Mn ä¸‰ç±» Mark å­—ç¬¦æ­£å¥½èƒ½å¤Ÿè¦†ç›–è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>æœ€ç»ˆ Antimemetics-Division ä¸è´Ÿä½¿å‘½ï¼Œè®© MAD å‘¨åˆŠä¸­çš„æ ‡é¢˜éƒ½æˆä¸ºäº†â€œæ­£ç»æ ‡é¢˜â€ï¼Œå¯å–œå¯è´ºï¼Œå¯å–œå¯è´ºã€‚&lt;/p>
&lt;p>&lt;del>è™½ç„¶ç•™ä¸‹äº†åå‘åˆ©ç”¨æ­¤é¡¹ç›®å¯ä»¥ç”Ÿæˆæ›´åŠ è®©äººè¡€å‹çˆ†ç‚¸çš„æ ‡é¢˜çš„é—®é¢˜ï¼Œæš‚ä¸”ä¸æ&lt;/del>&lt;/p>
&lt;h2 id="æœ¬å¯ä»¥æ›´ä¼˜é›…çš„è§£å†³æ–¹å¼">æœ¬å¯ä»¥æ›´ä¼˜é›…çš„è§£å†³æ–¹å¼&lt;/h2>
&lt;p>å¦‚æ˜¯å‡ æœŸè§†é¢‘æ›´æ–°åï¼Œæˆ‘é€æ¸æ„è¯†åˆ°ä¸€ç§å‰²è£‚æ„Ÿã€‚&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆå“”å“©å“”å“©å‘¨åˆŠå°±åº”è¯¥æ¸²æŸ“æ­£å¸¸ï¼ŒMAD å‘¨åˆŠå°±è¦å»æ‰è¿™äº›å­—ç¬¦å‘¢ï¼Ÿè¿™ç§åŒºåˆ«å¯¹å¾…è¯´ç™½äº†ï¼Œä¸è¿‡è¿˜æ˜¯ä¸€ç§æ‡’æƒ°ã€‚&lt;/p>
&lt;p>ä¸åŒäºæˆ‘æœ€åˆæ‰¿è®¤ ATOLS ç©çš„ä¸€æ‰‹å¥½æ ‡é¢˜ï¼Œåœ¨ MAD å‘¨åˆŠä¸Šæˆ‘åè€Œä»¥å­—ç¬¦è®ºæ ‡é¢˜ä¼˜åŠ£ï¼Œä¸åº”æ˜¯æ­£ç¡®çš„è§£æ³•ã€‚&lt;/p>
&lt;p>äºæ˜¯å†³å®šåŒå“”å“©å“”å“©å‘¨åˆŠä¸€æ ·é€šè¿‡å‰ç«¯æˆªå›¾æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åŒæ—¶è€ƒè™‘åˆ°æ’ç‰ˆå½±å“ï¼Œéƒ¨åˆ† MAD æ ‡é¢˜å¸¸ç”¨å…¨è§’ç¬¦å·ï¼Œå¯¼è‡´æ ‡é¢˜çš„èµ·å§‹åƒç´ ä½ç½®å…¶å®å¹¶ä¸é¡¶æ ¼ï¼Œä¾¿åœ¨è„šæœ¬ä¸­åŠ å…¥äº†ä¸€ä¸ªç²—ç•¥çš„åˆ¤æ–­ï¼Œè¿›è¡Œä¸€ä¸ª X è½´çš„ç§»ä½ä½¿å¾—è§†è§‰ä¸Šæ˜¾å¾—æ›´å¯¹é½ä¸€äº›ã€‚&lt;/p>
&lt;p>ä½† Emoji è¿˜æ˜¯ç»™æˆ‘æ£äº†ä¹±ï¼ŒEmoji å› ä¸ºéƒ½æ˜¯å…¨è§’å®½åº¦ï¼Œæ— æ³•åˆ¤æ–­åƒç´ ä½ç½®æ˜¯å¦é¡¶æ ¼ï¼Œè¿™ä¸ªé—®é¢˜åªèƒ½ç•™åˆ°ä¹‹åå†å¯»æ‰¾åˆé€‚çš„è§£æ³•äº†ã€‚&lt;/p>
&lt;h3 id="update-20221003">Update 2022/10/03&lt;/h3>
&lt;p>æˆäº†ï¼Œç”Ÿæˆå›¾ç‰‡ç„¶ååˆ‡å·¦å³é€æ˜åƒç´ å°±æ˜¯äº†ï¼Œ&lt;a class="link" href="https://github.com/Neutralization/MADRankingScripts/commit/100cb976e83db6e9f45575e43742b2bed3ca598b#diff-627c0a0588769c50e32e1fc457e9c787835f1d5ad8ff6845142d32b63589b1ff" target="_blank" rel="noopener"
>é—®é¢˜è§£å†³&lt;/a>ï¼ˆ&lt;/p>
&lt;h2 id="æœªå°½ä¹‹äº‹">æœªå°½ä¹‹äº‹&lt;/h2>
&lt;p>è®¡åˆ’å°†å“”å“©å“”å“©å‘¨åˆŠçš„å›¾ç‰‡ç”Ÿæˆä¹Ÿæ”¹ä¸ºå‰ç«¯æˆªå›¾çš„æ–¹å¼ã€‚ä¸”ä¸è°ˆç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜ï¼Œå‰ç«¯è¿™ç§æ–¹ä¾¿å¯è§†åŒ–è°ƒæ•´çš„å½¢å¼ï¼Œåº”è¯¥ä¼šå¯¹ä»£ç ä¿®æ”¹æ›´å‹å¥½ä¸€äº›ï¼Œè™½ç„¶æƒ³æ¥æ˜¯ä¸ä¼šæœ‰ä»€ä¹ˆæ”¹ç‰ˆå’Œä¿®æ”¹äº†ã€‚&lt;/p>
&lt;p>è€Œä¸”é€šè¿‡ CSSï¼Œè¿˜èƒ½å¤Ÿå®ç°ä¸€äº› Pillow åšä¸åˆ°çš„æ–‡æœ¬æ ·å¼æ•ˆæœï¼Œæ›´å¥½çš„è¿˜åŸ PSD çš„è®¾è®¡æ ·å¼ã€‚&lt;/p>
&lt;p>æ›¾ç»è¿˜æƒ³è¿‡å†™ Photoshop è„šæœ¬æ¥åšå›¾ï¼Œè™½ç„¶è¿˜æ²¡è¯•éªŒè¿‡ Photoshopï¼Œè€ƒè™‘åˆ°å‰è¿° AfterEffects æ–‡æœ¬å›¾å±‚çš„é—®é¢˜ï¼Œä»¥åŠå‰ç«¯æˆªå›¾ç¡®å®æ›´çµæ´»ï¼Œä¹Ÿå°±ä¸å†è€ƒè™‘äº†ã€‚&lt;/p></description></item><item><title>OpenWrt æŠ˜è…¾ç¬”è®°</title><link>https://naizi.ch/2021/10/05/openwrt-%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/</link><pubDate>Tue, 05 Oct 2021 00:00:00 +0000</pubDate><guid>https://naizi.ch/2021/10/05/openwrt-%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/</guid><description>&lt;h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>å®‰è£… WSLï¼Œä¸å†èµ˜è¿°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://openwrt.org/docs/guide-developer/build-system/wsl#setting_up_path" target="_blank" rel="noopener"
>ç§»é™¤ WSL ç¯å¢ƒå˜é‡ä¸­åŒ…å«çš„ Windows è·¯å¾„&lt;/a>ï¼Œä¸ºç¼–è¯‘åšå‡†å¤‡ã€‚&lt;/p>
&lt;p>æ‰“å¼€ WSL ç»ˆç«¯ï¼Œæ–°å»º&lt;code>/etc/wsl.conf&lt;/code>æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹å¹¶ä¿å­˜ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[interop]
appendWindowsPath = false
&lt;/code>&lt;/pre>&lt;p>ç„¶åæ‰§è¡Œ&lt;code>wsl --shutdown&lt;/code>ï¼Œå†é‡æ–°å¯åŠ¨ wslï¼Œæ‰§è¡Œ&lt;code>echo ${PATH}&lt;/code>æ£€æŸ¥æ˜¯å¦å«æœ‰ Windows è·¯å¾„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ›´æ–°ç³»ç»Ÿ&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>sudo&lt;/strong> apt update&lt;br>
&lt;strong>sudo&lt;/strong> apt full-upgrade -y&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://openwrt.org/docs/guide-developer/build-system/install-buildsystem#debianubuntu" target="_blank" rel="noopener"
>å‡†å¤‡ç¼–è¯‘å·¥å…·&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>sudo&lt;/strong> apt install -y ack antlr3 asciidoc autoconf automake \&lt;br>
autopoint binutils bison build-essential bzip2 ccache cmake cpio \&lt;br>
curl device-tree-compiler fastjar flex gawk gettext gcc-multilib \&lt;br>
g++-multilib git gperf haveged help2man intltool libc6-dev-i386 \&lt;br>
libelf-dev libglib2.0-dev libgmp3-dev libltdl-dev libmpc-dev libmpfr-dev \&lt;br>
libncurses5-dev libncursesw5-dev libreadline-dev libssl-dev libtool \&lt;br>
lrzsz mkisofs msmtp nano ninja-build p7zip p7zip-full patch pkgconf \&lt;br>
python2.7 python3 python3-pip qemu-utils rsync scons squashfs-tools \&lt;br>
subversion swig texinfo uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;!-- raw HTML omitted -->
&lt;h2 id="å…‹éš†ä»“åº“">å…‹éš†ä»“åº“&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ä¸‹è½½ OpenWrt æºç ï¼ˆæ›´æ”¹ä¸º&lt;a class="link" href="https://github.com/coolsnowwolf/lede" target="_blank" rel="noopener"
>LEDE&lt;/a>ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd ~
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git clone https://github.com/coolsnowwolf/lede openwrt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd openwrt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git pull
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¸‹è½½ &lt;a class="link" href="https://github.com/vernesong/OpenClash" target="_blank" rel="noopener"
>OpenClash&lt;/a> æºç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd ~/openwrt/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir package/luci-app-openclash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd package/luci-app-openclash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git remote add origin https://github.com/vernesong/OpenClash.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config core.sparsecheckout true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;luci-app-openclash&amp;#34;&lt;/span> &amp;gt;&amp;gt; .git/info/sparse-checkout
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git pull --depth &lt;span style="color:#ae81ff">1&lt;/span> origin master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git branch --set-upstream-to&lt;span style="color:#f92672">=&lt;/span>origin/master master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>ä¿®æ”¹è·¯ç”± IP åœ°å€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&amp;gt; sed -i &lt;span style="color:#e6db74">&amp;#39;s/192.168.1.1/192.168.2.1/g&amp;#39;&lt;/span> package/base-files/files/bin/config_generate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="å¼€å§‹ç¼–è¯‘">å¼€å§‹ç¼–è¯‘&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>æ›´æ–° feeds&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>cd&lt;/strong> ~/openwrt/&lt;br>
./scripts/feeds update -a&lt;br>
./scripts/feeds install -a&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>
&lt;p>é€‰æ‹©ç¼–è¯‘å†…å®¹&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>cd&lt;/strong> ~/openwrt/&lt;br>
&lt;strong>make defconfig&lt;/strong>&lt;br>
&lt;strong>make menuconfig&lt;/strong>&lt;br>
./scripts/diffconfig.sh &amp;gt; diffconfig&lt;/p>
&lt;/blockquote>
&lt;p>diffconfig åæœŸå¯ç”¨äºæ›´æ–°é•œåƒæ—¶å¯¼å…¥&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>cp&lt;/strong> diffconfig ~/openwrt/.config&lt;br>
&lt;strong>make defconfig&lt;/strong>&lt;br>
&lt;strong>make menuconfig&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code class="language-menuconfig" data-lang="menuconfig">Target System ---&amp;gt;
(X) Rockchip
Subtarget ---&amp;gt;
(X) RK33xx boards (64 bit)
Target Profile ---&amp;gt;
(X) FriendlyARM NanoPi R2S
Target Images ---&amp;gt;
[*] ext4
[*] squashfs
[*] GZip images
(128) Kernel partition size (in MB)
(2048) Root filesystem partition size (in MB)
Kernel modules ---&amp;gt;
Cryptographic API modules ---&amp;gt;
ALL
LuCI ---&amp;gt;
2. Modules ---&amp;gt;
Translations ---&amp;gt;
&amp;lt;*&amp;gt; Simplified Chinese (zh-cn)
&amp;lt;*&amp;gt; luci-compat
3. Applications ---&amp;gt;
&amp;lt;*&amp;gt; luci-app-openclash
&amp;lt;*&amp;gt; luci-app-turboacc
&amp;lt;*&amp;gt; luci-app-unblockmusic
[*] UnblockNeteaseMusic NodeJS Version
&amp;lt;*&amp;gt; luci-app-wireguard
&amp;lt;*&amp;gt; luci-app-zerotier
4. Themes ---&amp;gt;
&amp;lt;*&amp;gt; luci-theme-argon
Utilities ---&amp;gt;
Editors ---&amp;gt;
&amp;lt;*&amp;gt; nano-full
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>æ‰§è¡Œç¼–è¯‘&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>cd&lt;/strong> ~/openwrt/&lt;br>
&lt;strong>make&lt;/strong> -j8 download&lt;br>
&lt;strong>make&lt;/strong> -j8&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;p>ç¼–è¯‘ç”Ÿæˆçš„é•œåƒæ–‡ä»¶åœ¨ &lt;code>~/openwrt/bin/targets/rockchip/armv8/&lt;/code> è·¯å¾„ä¸‹&lt;/p>
&lt;h2 id="æ”¶å°¾å·¥ä½œ">æ”¶å°¾å·¥ä½œ&lt;/h2>
&lt;p>opkg å®‰è£…éƒ¨åˆ†å®˜æ–¹åŒ…çš„æ—¶å€™ä¼šæç¤º Kernel ç‰ˆæœ¬ä¸å¯¹&lt;code>kernel is not compatible&lt;/code>ï¼Œè¿™æ˜¯å› ä¸ºè‡ªå·±ç¼–è¯‘çš„ kernel æŒ‡çº¹å’Œå®˜æ–¹ä¸ä¸€è‡´é€ æˆçš„ï¼Œ&lt;a class="link" href="https://github.com/iyuangang/openwrt/issues/8#issuecomment-605431578" target="_blank" rel="noopener"
>æ›¿æ¢æˆå®˜æ–¹æŒ‡çº¹å³å¯&lt;/a>ã€‚&lt;/p>
&lt;p>æ¯”å¦‚ç›®å‰ kernel ç‰ˆæœ¬æ˜¯&lt;code>5.4.143-1-fb881fbbae69f30da18e7c6eb01310c1&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>sed&lt;/strong> -i s/&lt;code>ç¼–è¯‘çš„kernel hash&lt;/code>/fb881fbbae69f30da18e7c6eb01310c1/g /usr/lib/opkg/status&lt;/p>
&lt;/blockquote>
&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>ç¼–è¯‘ run äº†ä¸€ä¸‡å¹´ï¼Œå†ä¸å†™ç‚¹ä»€ä¹ˆè®°ä¸‹æ¥ï¼Œä¸‹æ¬¡ç¼–è¯‘æ ¹æœ¬è®°ä¸ä½äº†.jpg&lt;/p>
&lt;p>åæ¥å‚è€ƒå­¦ä¹ äº† P3TERX çš„ &lt;a class="link" href="https://p3terx.com/archives/build-openwrt-with-github-actions.html" target="_blank" rel="noopener"
>è¿™ç¯‡æ–‡ç« &lt;/a> åˆ©ç”¨ Github Action è¿›è¡Œç¼–è¯‘ï¼Œå¹¶ä¸”æŒ‰ç…§ &lt;a class="link" href="https://github.com/coolsnowwolf/lede/pull/7796" target="_blank" rel="noopener"
>LEDE çš„è¿™ä¸ª PR&lt;/a> æ‰“å¼€äº†ç¼“å­˜å·¥å…·é“¾ï¼Œå†ä¹Ÿä¸ç”¨é¢å¯¹å¥‡æ€ªçš„ç¯å¢ƒé—®é¢˜å’Œè¯¥å‚æ•°é‡ç¼–åˆæ˜¯å››ã€äº”ä¸ªå°æ—¶çš„çª˜å¢ƒäº†ã€‚&lt;/p></description></item><item><title>å‡çº§ 3D æ‰“å°æœºå›ºä»¶åŠè¿œç¨‹æ‰“å°æ–¹æ¡ˆ</title><link>https://naizi.ch/2021/08/28/%E5%8D%87%E7%BA%A7-3d-%E6%89%93%E5%8D%B0%E6%9C%BA%E5%9B%BA%E4%BB%B6%E5%8F%8A%E8%BF%9C%E7%A8%8B%E6%89%93%E5%8D%B0%E6%96%B9%E6%A1%88/</link><pubDate>Sat, 28 Aug 2021 00:00:00 +0000</pubDate><guid>https://naizi.ch/2021/08/28/%E5%8D%87%E7%BA%A7-3d-%E6%89%93%E5%8D%B0%E6%9C%BA%E5%9B%BA%E4%BB%B6%E5%8F%8A%E8%BF%9C%E7%A8%8B%E6%89%93%E5%8D%B0%E6%96%B9%E6%A1%88/</guid><description>&lt;p>Ender 3 ä¸æ„§æ˜¯åˆ›æƒ³ä¸‰ç»´å®¶çš„ç»å…¸æ¬¾ 3D æ‰“å°æœºï¼Œä¸€ç›´æ²¡å…³æ³¨äº§å“æ¶ˆæ¯ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å·²ç»å‡ºäº† V2 æ¬¾äº†ã€‚&lt;/p>
&lt;p>ä¹°å½“ç„¶æ˜¯ä¸ä¼šä¹°çš„ï¼ŒåŸæ¥çš„ç‰ˆæœ¬è¿˜æ˜¯æŒºå¥½ç”¨ï¼Œè´­ä¹°çš„æ—¶å€™æ­£å¥½äº¬ä¸œæ‰“æŠ˜ï¼Œå½“æ—¶ 1k å‡ºå¤´çš„ä»·æ ¼è¿˜æ˜¯å¾ˆé¦™çš„ã€‚&lt;/p>
&lt;p>ä¹°æ¥æ—¶é—´ä¹Ÿæœ‰ç‚¹ä¹…äº†ï¼Œè€ƒè™‘å‡çº§ä¸€ä¸‹å›ºä»¶ï¼Œä½†æ˜¯å®˜æ–¹å¹¶æ²¡æœ‰æä¾›è¿™ä¸€æ¬¾çš„åç»­å›ºä»¶å‡çº§ï¼Œä¹Ÿæ²¡æœ‰ç›¸å…³æ•™ç¨‹ã€‚æœç´¢äº†ä¸€ä¸‹å‘ç°è¿˜éœ€è¦è‡ªè¡Œåˆ·å…¥ bootloader åæ‰èƒ½åˆ·å†™å›ºä»¶ï¼Œçœ‹æ¥æ˜¯å½“æ—¶å°±æ²¡æœ‰è€ƒè™‘ç”¨æˆ·ä¾§çš„åç»­å‡çº§ã€‚&lt;/p>
&lt;p>å‡çº§å›ºä»¶çš„æƒ³æ³•ä¸»è¦æ˜¯å› ä¸ºçœ‹åˆ°äº† OctoPrintï¼Œä¸€ä¸ªåˆ©ç”¨æ ‘è“æ´¾æ§åˆ¶å’Œå®æ—¶ç›‘æ§ 3D æ‰“å°æœºçš„é¡¹ç›®ã€‚&lt;/p>
&lt;h2 id="åˆ·å†™-bootloader">åˆ·å†™ bootloader&lt;/h2>
&lt;p>ä¸»è¦æ˜¯è·Ÿç€&lt;a class="link" href="https://www.th3dstudio.com/hc/guides/bootloader/bootloader-flashing-guide-cr-10-ender-2-3-5-wanhao-i3-anet-1284p-boards/" target="_blank" rel="noopener"
>Bootloader Flashing Guide&lt;/a>è¿™ç¯‡æ–‡ç« ä¸­çš„æŒ‡å¯¼ã€‚å› ä¸ºä¸»æ¿èŠ¯ç‰‡æ˜¯ 1284Pï¼Œå’Œå…¶ä»–æ‰“å°æœºçš„åˆ·å†™å­˜åœ¨åŒºåˆ«ï¼Œå»ºè®®ç›´æ¥ä¸‹è½½é“¾æ¥ä¸­çš„åˆ·å†™åŒ…æ¥æ“ä½œã€‚&lt;/p>
&lt;p>æ¦‚æ‹¬çš„æ¥è®²ï¼Œéœ€è¦ Arduino å¼€å‘æ¿ä½œä¸ºä¸­ä»‹ï¼Œä¸æ‰“å°æœºä¸»æ¿çš„åˆ·å†™æ¥å£è¿æ¥ï¼Œå†é€šè¿‡ Arduino IDE å°† bootloader å¼•å¯¼ç¨‹åºç”± Arduino åˆ·å†™åˆ°æ‰“å°æœºä¸»æ¿èŠ¯ç‰‡ä¸Šã€‚&lt;/p>
&lt;p>æ‰¾åŒäº‹å€Ÿäº†ä¸€å— Arduino MEGA 2560 å’Œå‡ æ ¹æœé‚¦çº¿ï¼Œå› ä¸º Arduino çš„ä¸åŒç‰ˆæœ¬å¼•è„šå®šä¹‰å‡ ä¹æ²¡æœ‰åŒºåˆ«ï¼Œä¹Ÿä¸æ˜¯ä¸€å®šè¦ç”¨ Arduino Unoã€‚&lt;/p>
&lt;p>å®Œæˆè¿™ä¸€æ­¥åï¼Œæ‰“å°æœºæœ‰äº† bootloaderï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œå›ºä»¶å‡çº§æ“ä½œäº†ã€‚&lt;/p>
&lt;h2 id="ç¼–è¯‘å›ºä»¶å¹¶ä¸Šä¼ è‡³æ‰“å°æœº">ç¼–è¯‘å›ºä»¶å¹¶ä¸Šä¼ è‡³æ‰“å°æœº&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.th3dstudio.com/hc/downloads/unified-2-firmware/creality/creality-ender-3-firmware-melzi-board/" target="_blank" rel="noopener"
>TH3D&lt;/a> ç»™å‡ºäº† Ender 3 çš„å®Œæ•´å›ºä»¶å‡çº§æµç¨‹ã€‚&lt;/p>
&lt;p>çœŸçš„æ˜¯ä¸ªä¸é”™çš„ç½‘ç«™ï¼Œé™¤äº† Creality è¿˜æœ‰å…¶ä»–å¾ˆå¤šå¸¸è§ 3D æ‰“å°æœºå‚å®¶ä¸åŒå‹å·çš„æ“ä½œæ•™ç¨‹ã€‚æ ¹æ®æ•™ç¨‹æè¿°ï¼Œå®‰è£… VSCodeï¼Œç¼–è¯‘å›ºä»¶ä¸Šä¼ å³å¯ï¼Œå®é™…æ“ä½œä¸­æˆ‘ä¹Ÿå®Œå…¨æ²¡æœ‰é‡åˆ°é˜»ç¢ï¼Œéå¸¸é¡ºåˆ©çš„ç¼–è¯‘ä¸Šä¼ å®Œæˆäº†ï¼Œè§åˆ°äº†å¯åŠ¨ç”»é¢çš„ TH3D æ ‡å¿— logoã€‚é™¤äº†ç•Œé¢æ˜¯å…¨è‹±æ–‡ï¼Œä½†è¿™ä¹Ÿå¹¶ä¸å½±å“æœºä¸Šæ“ä½œã€‚&lt;/p>
&lt;h2 id="octoprint-è¿œç¨‹æ‰“å°">OctoPrint è¿œç¨‹æ‰“å°&lt;/h2>
&lt;p>åˆæ˜¯ä¸€ä¸ªåˆ©ç”¨æ ‘è“æ´¾çš„é¡¹ç›®ï¼Œäºæ˜¯æˆ‘çš„æ ‘è“æ´¾åˆç»å†äº†ä¸€æ¬¡ SD å¡æ ¼å¼åŒ–é‡å†™æ˜ åƒã€‚&lt;/p>
&lt;p>åŒæ ·ä¹Ÿæ˜¯å®Œå…¨è·Ÿéš&lt;a class="link" href="https://howchoo.com/g/y2rhnzm3odz/control-your-3d-printer-with-octoprint-and-raspberry-pi" target="_blank" rel="noopener"
>æ•™ç¨‹&lt;/a>æ“ä½œï¼Œåœ¨æ ‘è“æ´¾ä¸Šä½¿ç”¨ OctoPrint æ˜ åƒï¼Œè¿æ¥ WiFiï¼ŒUSB è¿æ¥æ‰“å°æœºã€‚&lt;/p>
&lt;p>æ•™ç¨‹ä¸­è¿˜æä¾›äº†ä¸€å¥—ç”¨äºå›ºå®šæ ‘è“æ´¾æ‘„åƒæœºçš„ 3D æ‰“å°æ–‡ä»¶ï¼Œå¯ä»¥å›ºå®šåœ¨æ‰“å°æœº X è½´ä¸Šç”¨æ¥ç›‘æµ‹æ‰“å°çŠ¶æ€ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨æ™®é€šçš„ USB æ‘„åƒå¤´ï¼Œä½†æ˜¯æ¶è®¾æ‘„åƒå¤´çš„æ–¹å¼å°±è¦é è‡ªå·±å¦å¤–å®ç°äº†ã€‚&lt;/p>
&lt;p>æ­£å¥½å¾ˆæ—©ä»¥å‰ä¹°è¿‡ä¸€ä¸ªæ ‘è“æ´¾ä¸“ç”¨æ‘„åƒå¤´ï¼Œè¿™å°±ç»™å®ƒç”¨ä¸Šäº†ã€‚&lt;/p>
&lt;h2 id="finish">Finish&lt;/h2>
&lt;p>ä¸€åˆ‡è®¾ç½®å¥½ï¼Œhttps è®¿é—®æ ‘è“æ´¾ IP æˆ–è€… &lt;a class="link" href="https://octopi.local/" target="_blank" rel="noopener"
>https://octopi.local/&lt;/a> ï¼Œå¦‚æœæ‘„åƒå¤´æ­£å¸¸çš„è¯ï¼Œå°±èƒ½çœ‹åˆ°æ‰“å°çŠ¶æ€äº†ã€‚&lt;/p>
&lt;p>ç•Œé¢é‡Œå¯ä»¥ä¸€è§ˆæ— ä½™çš„çœ‹åˆ°æ‰“å°æœºå½“å‰çš„å–·å˜´å’Œçƒ­åºŠæ¸©åº¦ï¼Œæ‰“å°çŠ¶æ€ï¼ŒGcode å›¾ç¤ºç­‰ç­‰ã€‚ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ç½‘é¡µä¸Šä¼  Gcode æ–‡ä»¶ç›´æ¥æ‰“å°ï¼Œç”±äºæ˜¯é€šè¿‡ USB è¿æ¥åˆ°æ‰“å°æœºï¼Œå…å»äº†åå¤æ’æ‹” SD å¡ä¼ è¾“æ–‡ä»¶çš„æ­¥éª¤ï¼ŒçœŸçš„æ˜¯æ–¹ä¾¿äº†å¾ˆå¤šã€‚&lt;/p>
&lt;p>OctoPrint è¿˜æä¾›è§†é¢‘å½•åˆ¶ï¼Œå¼€å¯åå¯ä»¥å½•åˆ¶æ‰“å°è¿‡ç¨‹ä¸­çš„æ‘„åƒå¤´ç”»é¢ï¼Œç”Ÿæˆå»¶æ—¶è§†é¢‘ã€‚&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2021-08-28-upgrade-3d-printer/Snipaste_2021-08-28_14-55-44.png"
loading="lazy"
alt="Timelapse"
>&lt;/p></description></item><item><title>åœ†å‘¨ç‡é‡Œçš„éº»å°†</title><link>https://naizi.ch/2021/03/17/%E5%9C%86%E5%91%A8%E7%8E%87%E9%87%8C%E7%9A%84%E9%BA%BB%E5%B0%86/</link><pubDate>Wed, 17 Mar 2021 00:00:00 +0000</pubDate><guid>https://naizi.ch/2021/03/17/%E5%9C%86%E5%91%A8%E7%8E%87%E9%87%8C%E7%9A%84%E9%BA%BB%E5%B0%86/</guid><description>&lt;p>2 æœˆçš„æ—¶å€™ï¼Œç¾¤å‹çœ‹ VTB ç›´æ’­é›€é­‚ï¼Œå‘ç°ä¸»æ’­ä¸ºäº†é˜²æ­¢äº’åŠ¨çš„æ—¶å€™çª¥å±çœ‹åˆ°æ‰‹ç‰Œï¼ŒPS äº†ä¸€å¼ çœ‹èµ·æ¥åƒæ‰‹ç‰Œçš„å›¾æ¥æŒ¡ä½çœŸå®çš„æ‰‹ç‰Œã€‚&lt;/p>
&lt;p>ç¾¤å‹å—æ­¤å¯å‘ï¼Œçº·çº·è®¨è®ºè‡ªå·±ä¹Ÿè¦è¿™ä¹ˆç©ï¼ŒPS å„ç§å½¹ç§çš„ç‰Œæ‰®è€è™ï¼Œæ¯”å¦‚å¤§å®¶éƒ½å–œæ¬¢çš„å›½å£«æ— åŒï¼š&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2021-03-17-mahjong-in-pai/19m19p19s1234567z_1p.png"
loading="lazy"
alt="å›½å£«æ— åŒ"
>&lt;/p>
&lt;p>å¤§å®¶äº‘é›†å“åº”ï¼Œå› ä¸ºä¹‹å‰æ­£å¥½å†™è¿‡&lt;a class="link" href="https://github.com/Neutralization/majsoul-generator" target="_blank" rel="noopener"
>ç”Ÿæˆå™¨&lt;/a>ï¼Œè¶æ­¤æœºä¼šæˆ‘å°±è¯´ç¾¤å‹è¦å•¥æˆ‘å°±å¸®ç¾¤å‹ PSï¼Œéƒ½å¯ä»¥åšã€‚åæ¥ç¾¤å‹è§‰å¾—æ­£ç»çš„å½¹æ²¡æ„æ€ï¼Œæƒ³æç‚¹ä¸ä¸€æ ·çš„ï¼Œè¯´è¦æä¸ªåœ†å‘¨ç‡ã€‚è¿™å°±æœ‰æ„æ€äº†ã€‚è¯é¢˜å¾ˆè‡ªç„¶çš„è½¬åˆ°äº†é‚£èƒ½ä¸èƒ½èƒ¡ç‰Œçš„é—®é¢˜ä¸Šï¼Œå› ä¸ºåªæœ‰æ•°å­—ï¼Œå…ˆé»˜è®¤ç‰Œå‹æ˜¯æ¸…ä¸€è‰²ï¼Œä¸€è¯•ï¼Œå‘ç°å°æ•°ç‚¹åæœ€å¼€å§‹çš„ 14 ä½æ•°å­—å°±çœŸçš„èƒ½å‡‘æˆä¸€å‰¯èƒ¡ç‰Œï¼š&lt;/p>
&lt;blockquote>
&lt;p>3.&lt;code>14159265358979&lt;/code> -&amp;gt; 234 678 555 999 11&lt;/p>
&lt;/blockquote>
&lt;!-- raw HTML omitted -->
&lt;p>æˆ‘ç«‹åˆ»å…´è‡´æ¥äº†ï¼Œé©¬ä¸Šå°±æƒ³çœ‹çœ‹ä½æ•°å†å¾€åï¼Œè¿˜èƒ½æœ‰å“ªé‡Œèƒ½å‡‘æˆèƒ¡ç‰Œï¼Œè¿™å°±å¼€å§‹å†™è„šæœ¬ã€‚&lt;/p>
&lt;p>åœ†å‘¨ç‡ä½æ•°çš„è¿­ä»£ä¹‹å‰å†™é£èŠ±ä»¤çš„æ—¶å€™ç”¨è¿‡ï¼ŒCtrl+V è¿‡æ¥ï¼Œç„¶åæ˜¯åˆ¤æ–­æ˜¯å¦å’Œç‰Œçš„ç®—æ³•ã€‚ç®€å•æ¥è¯´æŒ‰ç…§ä¸€èˆ¬å’Œç‰Œçš„æ ‡å‡†å‹&lt;code>n*AAA+m*ABC+DD=14&lt;/code>ï¼Œé€šè¿‡å…ˆå–é›€å¤´&lt;code>DD&lt;/code>ï¼Œç„¶åäº¤æ¢å…ˆå–åˆ»å­&lt;code>AAA&lt;/code>åé¡ºå­&lt;code>ABC&lt;/code>æˆ–è€…å…ˆé¡ºå­ååˆ»å­çš„é€»è¾‘è¿­ä»£å®Œæ•´å‰¯æ‰‹ç‰Œï¼Œçœ‹æ®‹å¼ æ˜¯å¦ä¸ºé›¶å°±èƒ½ç¡®è®¤è¿™å‰¯æ‰‹ç‰Œæ˜¯å¦å’Œç‰Œã€‚&lt;/p>
&lt;p>å†™å®Œä»£ç ï¼Œæµ‹è¯•äº†å‡ æ¬¡ï¼Œåˆå¦å¤–åŠ å…¥äº†ä¸ƒå¯¹å­ç‰Œå‹çš„åˆ¤æ–­ï¼Œç„¶åä»¥ä¸€ä¸‡ä½ä¸ºç›®æ ‡æ‰§è¡Œäº†ä¸€éã€‚ä¸å‡ºæ„æ–™è¿˜çœŸçš„æœ‰å¾ˆå¤šä½ç½®çš„æ•°åˆ—èƒ½å¤Ÿå‡‘æˆå’Œç‰Œã€‚æ„Ÿè§‰è¿™è¿˜æ˜¯å€¼å¾—&lt;a class="link" href="https://www.bilibili.com/video/BV1pU4y1a7W8" target="_blank" rel="noopener"
>åšä¸ªè§†é¢‘&lt;/a>è®°å½•ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>è§†é¢‘é‡Œåªè¿­ä»£äº†å°æ•°ç‚¹åä¸€ä¸‡ä½çš„æ•°å­—ã€‚åœ¨æµ‹è¯•è„šæœ¬çš„æ—¶å€™ï¼Œå…¶å®è¯•éªŒè¿‡è¿­ä»£åˆ°äºŒåä¸‡ä½ï¼Œå·²ç»ç›¸å½“è€—æ—¶äº†ï¼Œä¸è¿‡ä¹Ÿå› æ­¤é‡åˆ°äº†ä¸€äº›æ¯”è¾ƒå€¼å¾—ä¸€è¯´çš„ç‰Œå‹ï¼š&lt;/p>
&lt;p>æ¯”å¦‚é‡åˆ°çš„ç¬¬ä¸€ä¸ª&lt;code>å¹³å’Œ&lt;/code>æ˜¯åœ¨ç¬¬ 209 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>7 5 6 6 5 9 3 3 4 4 6 1 2 8&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>66 123 345 456 789&lt;/code>ï¼Œè¿˜æ˜¯ä¸€ä¸ª&lt;code>ä¸€æ°”è´¯é€š&lt;/code>&lt;/p>
&lt;p>&lt;code>æ–­å¹ºä¹&lt;/code>åœ¨ç¬¬ 222 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>8 4 7 5 6 4 8 2 3 3 7 8 6 7&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>66 777 888 234 345&lt;/code>&lt;/p>
&lt;p>&lt;code>å››æš—åˆ»&lt;/code>åœ¨ç¬¬ 5391 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>8 8 2 8 1 6 1 3 3 2 3 1 6 6&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>22 111 333 666 888&lt;/code>&lt;/p>
&lt;p>&lt;code>äºŒæ¯å£&lt;/code>åœ¨ç¬¬ 15912 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>8 5 7 4 5 6 9 8 1 4 7 1 9 6&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>11 456 456 789 789&lt;/code>ï¼Œè¿™ä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªä¸ƒå¯¹å­ç‰Œå‹ï¼ˆä½†è§„åˆ™åªè®¡ç®—äºŒæ¯å£ï¼‰ï¼Œä¸‹ä¸€ä¸ªä¸ƒå¯¹å­ç‰Œå‹åœ¨ 16834 ä½ï¼Œä½†åŒæ ·ä¹Ÿæ˜¯äºŒæ¯å£ï¼Œå†ä¸‹ä¸€ä¸ªåˆ™æ˜¯ 21513 çš„ä¸€è‰²åŒé¾™ä¼šï¼Œå›½æ ‡å½¹ç§ã€‚çœŸæ­£çš„ä¸ƒå¯¹å­è¦åˆ° 35441 ä½æ‰èƒ½é‡åˆ°ï¼Œ&lt;code>6 4 6 4 5 5 1 2 7 8 1 2 7 8&lt;/code>ï¼Œç‰Œå‹&lt;code>11 22 44 55 66 77 88&lt;/code>&lt;/p>
&lt;p>&lt;code>ä¸€è‰²åŒé¾™ä¼š&lt;/code>åœ¨ç¬¬ 21513 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>5 7 2 3 9 7 3 9 5 1 2 8 8 1&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>123 123 55 789 789&lt;/code>&lt;/p>
&lt;p>&lt;code>ä¹è²å®ç¯&lt;/code>åœ¨ç¬¬ 32452 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>9 2 1 9 5 1 9 6 7 5 1 4 8 3&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>111 234 55 678 999&lt;/code>ï¼Œè¿˜æ˜¯ä¸ªæœ€æ¼‚äº®çš„ä¹è²å®ç¯ã€‚&lt;/p>
&lt;p>&lt;code>å››æš—åˆ»ç»¿ä¸€è‰²&lt;/code>åœ¨ç¬¬ 162552 ä½å°æ•°ï¼Œæ•°åˆ—æ˜¯&lt;code>4 2 4 3 3 3 4 8 8 2 2 6 6 6&lt;/code>ï¼Œç‰Œå‹æ˜¯&lt;code>222 333 444 666 88&lt;/code>ï¼Œæ˜¾ç„¶è¿™è¿˜æ˜¯ä¸ªçº¯ç»¿ä¸€è‰²ã€‚&lt;/p>
&lt;p>æœ€åå›é¡¾ä¸‹ä¸€åˆ‡çš„å¼€ç«¯ï¼š&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2021-03-17-mahjong-in-pai/screenshot.jpg"
loading="lazy"
alt="å¼€ç«¯"
>&lt;/p></description></item><item><title>è‡ªåŠ¨åŒ–åˆ¶ä½œå‘¨åˆŠå“”å“©å“”å“©æ’è¡Œæ¦œ</title><link>https://naizi.ch/2021/03/07/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%88%B6%E4%BD%9C%E5%91%A8%E5%88%8A%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E6%8E%92%E8%A1%8C%E6%A6%9C/</link><pubDate>Sun, 07 Mar 2021 00:00:00 +0000</pubDate><guid>https://naizi.ch/2021/03/07/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%88%B6%E4%BD%9C%E5%91%A8%E5%88%8A%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E6%8E%92%E8%A1%8C%E6%A6%9C/</guid><description>&lt;p>æ€»ç»“ä¸€ä¸‹å‘¨åˆŠå“”å“©å“”å“©æ’è¡Œæ¦œåˆ¶ä½œæµç¨‹è‡ªåŠ¨åŒ–è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚&lt;/p>
&lt;p>ä¹‹å‰çš„å‘¨åˆŠåˆ¶ä½œè¿‡ç¨‹ä¸­ï¼Œç»„å‘˜å„è‡ªé¢†å–ä¸åŒéƒ¨åˆ†çš„åˆ¶ä½œä»»åŠ¡ï¼Œæ¯ä¸€éƒ¨åˆ†çš„å†…å®¹æ ¼å¼åŒ…å«åœ¨ä¸åŒçš„ yml æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;p>é€šå¸¸å…ˆæŠŠ yml ä¸­çš„ av å·å–å‡ºï¼Œå»ä¸‹è½½å¯¹åº”çš„è§†é¢‘åˆ°æœ¬åœ°ï¼Œç„¶åäººå·¥æµè§ˆé€‰æ‹©å®é™…åˆ¶ä½œæ—¶é€‰å–çš„ç‰‡æ®µï¼Œè®°å½•ä¸‹ç‰‡æ®µçš„å¼€å§‹æ—¶é—´ï¼Œä¿®æ”¹ yml ä¸­çš„å¯¹åº”å­—æ®µã€‚ç„¶åä¸Šä¼ ä¿®æ”¹å®Œæˆçš„ ymlï¼Œè½¬æ¢æˆä¹‹åå¯¼å…¥ Vegas æ—¶éœ€è¦çš„ xml æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ç”±äºæ—§æµç¨‹çš„å±€é™æ€§ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°è§†é¢‘å°ºå¯¸çš„é€‚é…ï¼Œå› æ­¤åœ¨å¯¼å…¥ Vegas åï¼Œå¾€å¾€è¦æ‰‹åŠ¨å¯¹é½æ‰€æœ‰è§†é¢‘ã€‚å¦å¤–ç”±äºä¸åŒéƒ¨åˆ†çš„æ•ˆæœä¸ä¸€è‡´ï¼ˆæ¯”å¦‚æ˜¯å¦æœ‰è¿‡æ¸¡åœºæ™¯ï¼‰ï¼Œä¹Ÿæ²¡æœ‰åœ¨ yml ä¸­è¿›è¡ŒåŒºåˆ†ï¼Œå¾€å¾€è¿˜è¦å†æ‰‹åŠ¨è°ƒæ•´ã€‚å·¥ä½œé‡æœ¬è´¨ä¸å¤§ï¼Œä½†å…¶å®éƒ½æ˜¯å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„åœºæ™¯ã€‚&lt;/p>
&lt;p>æ—©å‡ å¹´çš„æ—¶å€™ä¸€ç›´å¬è¯´ Adobe After Effects è„šæœ¬å¦‚ä½•å¦‚ä½•å¼ºå¤§ï¼Œè¡¨è¾¾å¼å¦‚ä½•å¦‚ä½•å¥½ç”¨ã€‚æ€å¥ˆ javascript ä»æœªæ¥è§¦ï¼Œä¸€ç›´æ²¡èƒ½ä¸‹å†³å¿ƒå»äº†è§£ã€‚è¿™æ¬¡ä¹Ÿç®—æ˜¯ç»ˆäºä¸‹äº†å†³å¿ƒï¼Œå¼€å§‹äº† AE è‡ªåŠ¨åŒ–åˆ¶ä½œå‘¨åˆŠä¹‹è·¯ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="vegas---aftereffects">Vegas -&amp;gt; AfterEffects&lt;/h2>
&lt;h3 id="æµç¨‹æ•´ç†">æµç¨‹æ•´ç†&lt;/h3>
&lt;p>é¦–å…ˆæ˜¯é‡æ–°æ•´ç†ä¸€é Vegas çš„å·¥ä½œæµï¼Œå°½å¯èƒ½ç¬¦åˆåŸæ¥äººå·¥çš„æ“ä½œé¡ºåºï¼Œä¹Ÿæ–¹ä¾¿æˆ‘ç†æ¸…ä»£ç é€»è¾‘ã€‚&lt;/p>
&lt;p>Vegas çš„å¯¼å…¥è§†é¢‘è¿‡ç¨‹ï¼Œä½¿ç”¨çš„æ˜¯ xml è¿˜æ˜¯ yml æ–‡ä»¶å…¶å®æ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œéœ€è¦çš„å†…å®¹æ— éæ˜¯å¯¼å…¥å“ªä¸ªè§†é¢‘çš„å“ªä¸ªæ—¶é—´ç‚¹ï¼Œæ—¶é•¿å¤šä¹…ï¼Œè§†é¢‘å¦‚ä½•å®šä½åˆ°å‡†ç¡®çš„ä½ç½®ï¼Œä»¥åŠå¯¼å…¥å¯¹åº”çš„å›¾ç‰‡ç´ æï¼Œæ·»åŠ è§†é¢‘è¿‡æ¸¡æ•ˆæœç­‰ç­‰ã€‚&lt;/p>
&lt;p>ç¡®å®šåŸºæœ¬é¡ºåºåï¼Œæˆ‘å°±å¼€å§‹å¯¹ç…§ Adobe çš„æ–‡æ¡£ï¼Œä¸€æ­¥æ­¥çš„ç¼–å†™ä»£ç ã€‚æœ‰ä¸€è¯´ä¸€ï¼ŒAdobe çš„æ–‡æ¡£ç¡®å®éå¸¸è¯¦ç»†ï¼Œæ¯” Vegas çš„æ–‡æ¡£çœ‹èµ·æ¥æ˜¯æ¸…æ™°å¤šäº†ï¼ˆæœ€åˆçš„ç¡®è€ƒè™‘è¿‡ç›´æ¥ç”¨ Vegas è„šæœ¬æ¥åšï¼‰ã€‚&lt;/p>
&lt;p>æœ€åˆå…ˆå†™æ­»äº†å„ç§å˜é‡æ¥è¿›è¡Œè°ƒè¯•ï¼ŒåŸºæœ¬æ˜¯å†™ä¸€è¡Œæµ‹è¯•ä¸€è¡Œçš„æ–¹å¼ã€‚é€æ­¥å­¦ä¼šäº† AE ä¸­å¦‚ä½•ä½¿ç”¨è„šæœ¬æ·»åŠ åˆæˆï¼Œå†å¾€åˆæˆä¸­æ·»åŠ è§†é¢‘/å›¾ç‰‡å±‚ï¼Œè°ƒæ•´è§†é¢‘çš„å…¥ç‚¹å’Œå‡ºç‚¹ç­‰ç­‰ã€‚ç†Ÿæ‚‰äº†ä¹‹åï¼Œç”±äºä¸€ä¸ªä¸ªè§†é¢‘çš„å¯¼å…¥å…¶å®æ˜¯éå¸¸æ¨¡å—åŒ–çš„æ“ä½œï¼Œåœ¨å¤åˆ¶ç²˜è´´äº†åå‡ æ¬¡ä»£ç åï¼Œæˆ‘ç»ˆäºæ„è¯†åˆ°åº”è¯¥æŠŠå®ƒæŠ½è±¡æˆå‡½æ•°è°ƒç”¨ã€‚&lt;/p>
&lt;h3 id="ç¼–å†™å‡½æ•°è°ƒç”¨">ç¼–å†™å‡½æ•°è°ƒç”¨&lt;/h3>
&lt;p>æµç¨‹å·²ç»å¾ˆæ¸…æ™°äº†ï¼Œä¹Ÿç†Ÿæ‚‰äº†ä»£ç ï¼Œå‡½æ•°è¦å®ç°çš„äº‹æƒ…å…¶å®å¾ˆç®€å•ï¼š&lt;/p>
&lt;ol>
&lt;li>æ·»åŠ ä¸€ä¸ªæ–°å›¾å±‚ï¼ŒæŒ‡å®šè§†é¢‘æ–‡ä»¶å’Œæ—¶é•¿èŠ‚ç‚¹&lt;/li>
&lt;li>ç»™è§†é¢‘å›¾å±‚æ·»åŠ æ—¶é—´å‡ºå…¥ç‚¹å’Œè¿‡æ¸¡æ•ˆæœ&lt;/li>
&lt;li>ç»™è§†é¢‘å›¾å±‚æ·»åŠ éŸ³é¢‘è¿‡æ¸¡æ•ˆæœ&lt;/li>
&lt;/ol>
&lt;p>äºæ˜¯æˆ‘åˆ†åˆ«ç¼–å†™äº† &lt;code>AddLayer&lt;/code>, &lt;code>AddVideoProperty&lt;/code>, &lt;code>AddAudioProperty&lt;/code> ä¸‰ä¸ªå‡½æ•°ï¼ŒåŒ…è£…äº† Adobe çš„ &lt;code>layers.add&lt;/code> å’Œ &lt;code>property.setValueAtTime&lt;/code> ä¸¤ä¸ªæ–¹æ³•ã€‚&lt;/p>
&lt;p>åœ¨ç¼–å†™å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæ˜¯ Vegas-&amp;gt;AfterEffects å¤åˆ»ï¼ŒVegas ä¸­çš„è¿‡æ¸¡æ›²çº¿æˆ‘åœ¨ AE ä¸­æ²¡æœ‰æ‰¾åˆ°ä¸€è‡´çš„å‚»ç“œå¼åŠŸèƒ½ï¼Œåªèƒ½è‡ªå·±å»å®ç°æ›²çº¿çš„æ•ˆæœã€‚è¿™é‡Œå°±é‡åˆ°äº† Adobe æ–‡æ¡£â€œç‚¹åˆ°ä¸ºæ­¢â€çš„é—®é¢˜ï¼šå®ƒæ²¡æœ‰æä¾›è¯¦ç»†çš„ç¤ºä¾‹ä»£ç ã€‚&lt;/p>
&lt;p>åŸæœ¬æ˜¯è®¡åˆ’ä½¿ç”¨ AE è¡¨è¾¾å¼ï¼ˆåŒºåˆ«äº AE è„šæœ¬ï¼‰æ¥å®ç°çš„ï¼Œä½†æ˜¯æ–‡æ¡£ä¸­å¯¹äºå¦‚ä½•æ·»åŠ è¡¨è¾¾å¼å¹¶æ²¡æœ‰è§£é‡Šçš„å¾ˆè¯¦ç»†ï¼ŒGoogle å’Œ StackOverflow ä¹Ÿæ²¡èƒ½æä¾›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚åå¤ç¿»é˜…æ–‡æ¡£ä¹‹åï¼Œæˆ‘å†³å®šé‡‡ç”¨å…¶ä»–çš„æ–¹å¼æ¥å®ç°ï¼šé€šè¿‡å¾®åˆ†æ³•æ·»åŠ é€æ˜åº¦/éŸ³é¢‘å¢ç›Šå…³é”®å¸§æ¥é€¼è¿‘æ›²çº¿æ•ˆæœã€‚&lt;/p>
&lt;p>äºæ˜¯ &lt;code>AddVideoProperty&lt;/code>, &lt;code>AddAudioProperty&lt;/code> çš„ä¸»è¦ä»£ç å°±å˜æˆäº†åŸºäºä¸‰è§’å‡½æ•°çš„ &lt;code>property.setValueAtTime&lt;/code>ï¼Œå¤ä¹ æ­£/ä½™å¼¦æ›²çº¿æ–¹ç¨‹çš„è¿‡ç¨‹è¿˜çœŸæ˜¯æœ‰äº›ä»¤äººæ€€å¿µ (ï¿£_,ï¿£ )&lt;/p>
&lt;h3 id="å‡½æ•°çš„å‡½æ•°">å‡½æ•°çš„å‡½æ•°&lt;/h3>
&lt;p>å¯¹å•ä¸ªè§†é¢‘çš„å‡½æ•°å®Œæˆä¹‹åï¼Œæ„è¯†åˆ°å•ä¸ª yml æ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªæ›´å¤§çš„å‡½æ•°ã€‚&lt;/p>
&lt;p>è¿™æ—¶éœ€è¦è§£å†³çš„å°±æ˜¯ä¹‹å‰æåˆ°çš„å¯¹äºè¿‡æ¸¡åœºæ™¯æœ‰æ— çš„åˆ¤æ–­ã€‚ä¸ºäº†èƒ½å¤Ÿå°†å·¥ä½œæµæ— ç¼è½¬æ¢åˆ° AEï¼Œæ­¤æ—¶ä¸å¯èƒ½å†å¯¹ yml åšæ–°çš„è¦æ±‚ï¼Œå¥½åœ¨æ•°é‡ä¸å¤šï¼Œè¿™éƒ¨åˆ†åŒºåˆ«ç›´æ¥æ‰‹å·¥æŒ‡å®šå†™æ­»åœ¨ä»£ç ä¸­å³å¯ã€‚&lt;/p>
&lt;p>åŒæ—¶ä¸ºäº†å‡å°‘é‡å¤çš„ä»£ç ï¼Œå°†åŸæœ¬å†™åœ¨ &lt;code>AddVideoProperty&lt;/code> å‡½æ•°ä¸­çš„è§†é¢‘å®šä½éƒ¨åˆ†çš„ä»£ç æ”¾åˆ°äº†è¿™ä¸ªå¤§å‡½æ•° &lt;code>AddRankPart&lt;/code> ä¸­ï¼Œé€šè¿‡ for å¾ªç¯è¿­ä»£ yml åˆ—è¡¨ï¼ˆè¿™æ—¶å…¶å®è¿˜æ˜¯ä¸€ä¸ªå†™æ­»çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯è¯»å– yml æ–‡ä»¶ï¼‰çš„æ•°æ®ï¼Œå¯¹è§†é¢‘è¿›è¡Œé•¿å®½æ¯”çš„åˆ¤æ–­åŒæ¯”ç¼©æ”¾ï¼Œå†å®šä½è‡³æ­£ç¡®çš„åæ ‡ã€‚&lt;/p>
&lt;p>å¦å¤–ä¸ºäº†å…¼å®¹å‘¨åˆŠçš„æ’åè§„åˆ™ï¼Œå³é•¿æœŸè§†é¢‘çš„å‡ºç°ä¼šé€ æˆè§†é¢‘æ•°é‡çš„å˜åŒ–ï¼Œä»¥åŠæ¯éƒ¨åˆ†æ’åä¸­æœ€åä¸€ä¸ªè§†é¢‘è¿‡æ¸¡æ•ˆæœä¸å…¶ä»–ä¸åŒï¼Œå’Œè§†é¢‘é—´æ˜¯å¦éœ€è¦è¿‡æ¸¡ç”»é¢ç­‰åšäº†ç›¸åº”çš„åˆ¤æ–­ï¼Œæœ€åé€šè¿‡é¢å¤–çš„å‡½æ•°å‚æ•°å…¼å®¹äº†ä¸åŒæ ·å¼çš„æ¦œå•éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>ä½†ç”±äºä¸»æ¦œå‰ä¸‰å®åœ¨æ¯”è¾ƒç‰¹æ®Šï¼Œå°±æ²¡æœ‰ä½¿ç”¨ &lt;code>AddRankPart&lt;/code> è€Œæ˜¯ç›´æ¥é‡å†™äº†ä¸€éé€»è¾‘ã€‚&lt;/p>
&lt;blockquote>
&lt;h4 id="æ’æ›²">æ’æ›²&lt;/h4>
&lt;p>åœ¨ç¼–å†™å®Œæ•´ä¸ªè‡ªåŠ¨åŒ–ä»£ç åï¼Œé‡åˆ°äº†ä¹…æœªè§åˆ°çš„è§†é¢‘æºå¤±æ•ˆçš„ç‰¹æ®Šæ ·å¼ï¼Œéœ€è¦åœ¨å¤±æ•ˆçš„è§†é¢‘ä¸Šæ·»åŠ é®æŒ¡ã€‚Vegas æ—¶æœŸè¿™ä¹Ÿæ˜¯é äººå·¥å®Œæˆçš„ï¼Œå› ä¸ºå¤±æ•ˆè§†é¢‘å·²ç»æå°‘é‡åˆ°ï¼Œé‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯æ·»åŠ ä¸€ä¸ª array è®°å½•å¤±æ•ˆçš„è§†é¢‘ï¼Œåœ¨ &lt;code>AddRankPart&lt;/code> çš„ for å¾ªç¯ä¸­æ·»åŠ è§†é¢‘æ˜¯å¦åœ¨ array ä¸­çš„åˆ¤æ–­æ¥è§£å†³ã€‚è¿™å°±éœ€è¦å½“å‡ºç°æ­¤ç±»æƒ…å†µçš„æ—¶å€™ä¿®æ”¹ä»£ç ä¸­çš„å˜é‡ã€‚&lt;/p>
&lt;p>ä½†æ–°å¢ä¸€ä¸ªæ–‡ä»¶æ¥è®°å½•ä¹Ÿæ˜¯åŒæ ·è¦äººå·¥ä¿®æ”¹ï¼Œç½¢äº†ï¼Œå°±è¿™æ ·å§ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="å®šå‹æ–‡">å®šå‹æ–‡&lt;/h3>
&lt;p>æ¦œå•å„ä¸ªéƒ¨åˆ†é—´çš„è¿‡æ¸¡ç”»é¢éƒ½æ˜¯ä¸éšæ¦œå•å˜åŒ–ï¼Œæˆ–è€…ç´ ææ–‡ä»¶åä¿æŒå›ºå®šï¼Œè¿™éƒ¨åˆ†å†…å®¹å°±ç›´æ¥ä½¿ç”¨ &lt;code>AddLayer&lt;/code>, &lt;code>AddVideoProperty&lt;/code>, &lt;code>AddAudioProperty&lt;/code> å†™æ­»äº†é€»è¾‘å’Œæ—¶é—´ç‚¹ã€‚&lt;/p>
&lt;p>ä¹‹åæŠŠå†™æ­»çš„æµ‹è¯•æ•°æ®æ”¹å†™æˆè¯»å–å®é™…çš„ yml æ–‡ä»¶å†…å®¹å’Œç´ ææ–‡ä»¶ï¼Œç„¶åå°±æ˜¯å¤§é‡çš„ MagicNumber æ—¶é—´ç‚¹å’Œä¸æ–­åœ°è°ƒè¯•ã€‚ä¸ºäº†æµ‹è¯•å…¼å®¹æ€§è¿˜è¯•éªŒäº† AfterEffects çš„ä¸åŒç‰ˆæœ¬ï¼Œç»“æœå‘ç°ä¸åŒç‰ˆæœ¬çš„ AE ä½¿ç”¨çš„ js ç‰ˆæœ¬å¤§ç›¸å¾„åº­ï¼Œå„ç§ç¥ç§˜é—®é¢˜é¢‘å‡ºã€‚æœ€åè¿˜æ˜¯æ”¾å¼ƒäº†å»è¿½æ±‚æ›´é«˜çš„å…¼å®¹æ€§ï¼Œä¼˜å…ˆä¿éšœäº†è¾ƒæ–°ç‰ˆæœ¬çš„ 2019CC å’Œ 2020CC çš„ä½¿ç”¨ã€‚&lt;/p>
&lt;h2 id="aftereffects-çš„é—®é¢˜">AfterEffects çš„é—®é¢˜&lt;/h2>
&lt;h3 id="éŸ³é¢‘å¤„ç†">éŸ³é¢‘å¤„ç†&lt;/h3>
&lt;p>AE ä½œä¸ºè§†é¢‘è½¯ä»¶ï¼Œå¯¹éŸ³é¢‘çš„å¤„ç†å°±æ˜¾å¾—è¾ƒå¼±äº†ï¼Œè¿™æœ¬æ¥ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ä¸Šæ¦œçš„è§†é¢‘å„è‡ªçš„éŸ³é¢‘å¢ç›Šç›¸å·®å¾ˆå¤§ï¼Œæœ€ä¸ºæ˜æ˜¾çš„æ˜¯ UP ä¸»çš„æŠ•ç¨¿è§†é¢‘å’Œ B ç«™ç•ªå‰§çš„åŠ¨ç”»ï¼Œåè€…éŸ³é¢‘å¢ç›Šæ¯”å‰è€…ä½äº†ä¸€ä¸ªç­‰çº§ã€‚&lt;/p>
&lt;p>Vegas ä¸­å¯ä»¥ç›´æ¥é€šè¿‡â€œéŸ³é¢‘æ ‡å‡†åŒ–â€æ“ä½œç®€å•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚AE å…¶å®ä¹Ÿå¯ä»¥é€šè¿‡ Adobe å®¶æ—çš„å…¼å®¹æ€§ï¼Œå°†å·¥ç¨‹å¯¼å‡ºä½¿ç”¨ Premiere æˆ–è€… Audition è¿›è¡ŒéŸ³é¢‘æ ‡å‡†åŒ–ï¼Œä½†è¿™æ ·ä¸€æ¥å°±å¤±å»äº†â€œè‡ªåŠ¨åŒ–â€çš„ç›®çš„ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆæœ‰ä»€ä¹ˆå…¶ä»–åŠæ³•å¯ä»¥è§£å†³ä¹ˆï¼Ÿåœ¨å’¨è¯¢ç¾¤å‹å’ŒåŒäº‹çš„æ„è§ä¹‹åï¼Œ&lt;a class="link" href="https://github.com/slhck/ffmpeg-normalize" target="_blank" rel="noopener"
>ffmpeg-normalize&lt;/a>è¿›å…¥äº†æˆ‘çš„è§†é‡ã€‚&lt;/p>
&lt;h3 id="ffmpeg-normalize">ffmpeg-normalize&lt;/h3>
&lt;p>ç®€å•è€Œè¨€ï¼Œffmpeg-normalize æ˜¯å¯¹ ffmpeg ä¸­éŸ³é‡å¤„ç†çš„ä¸€å±‚åŒ…è£…ï¼Œå°†æ•´ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–ä¾¿äºè¿›è¡Œæ‰¹é‡åŒ–çš„æ“ä½œã€‚&lt;/p>
&lt;p>è¯•éªŒä¹‹åå‘ç°æœç„¶æ–¹ä¾¿ï¼Œäºæ˜¯ç«‹åˆ»å¼€å§‹ç¼–å†™ä»£ç ã€‚å› ä¸º CMD è¿‡äºç®€é™‹ï¼Œé€‰æ‹©äº† powershell æ¥è¿›è¡Œæ‰¹å¤„ç†ã€‚&lt;/p>
&lt;p>ç„¶è€Œåœ¨è¯•è¿è¡Œä¸€å‘¨åï¼Œå‘ç°å¤§æ–‡ä»¶å¤„ç†æ•ˆç‡æ˜¯ä¸ªé—®é¢˜ã€‚å¯¹äºåŠ¨è¾„ 600MB~1G çš„ç•ªå‰§åŒºè§†é¢‘ï¼Œffmpeg-normalize å¤„ç†æ•´ä¸ªæ–‡ä»¶æ‰€æ¶ˆè€—çš„æ—¶é—´ç”šè‡³è¶…è¿‡äº†æœ€å AE å¯¼å‡ºè§†é¢‘çš„æ—¶é—´ï¼Œè¿™å°±æ¯”è¾ƒéš¾æ¥å—äº†ã€‚è€Œä¸”å®ƒä¹Ÿä¸æ”¯æŒåªå¯¹è§†é¢‘/éŸ³é¢‘çš„æŸä¸€éƒ¨åˆ†è¿›è¡Œæ ‡å‡†åŒ–æ“ä½œï¼Œéå¸¸å°´å°¬ã€‚&lt;/p>
&lt;h3 id="ffmpeg-è§†é¢‘æˆªå–éŸ³é¢‘å¤„ç†">ffmpeg è§†é¢‘æˆªå–&amp;amp;éŸ³é¢‘å¤„ç†&lt;/h3>
&lt;p>æ—¢ç„¶ ffmpeg-normalize æ˜¯ ffmpeg çš„åŒ…è£…ï¼Œè‡ªç„¶æƒ³åˆ°äº†ç›´æ¥ç”¨ ffmpeg ä¸ä¹Ÿå¯ä»¥å—ï¼Ÿè¿˜èƒ½å°‘è£…ä¸€ä¸ª pythonï¼Œé™ä½äº†å…¶ä»–ç»„å‘˜çš„å­¦ä¹ æˆæœ¬ã€‚&lt;/p>
&lt;p>ä¸ºäº†æå‡å¤„ç†æ•ˆç‡ï¼Œä¸å…¶å¤„ç†æ•´ä¸ªè§†é¢‘ï¼Œä¸å¦‚åªå¤„ç†é€‰å–çš„è§†é¢‘ç‰‡æ®µã€‚äºæ˜¯åœ¨åˆšåˆšå­¦ä¹ å®Œ JavaScript åï¼Œæˆ‘åˆå¼€å§‹ç¿»é˜… powershell çš„æ–‡æ¡£ï¼Œç ”ç©¶æ€æ ·ç”¨ powershell å®ç°è¯»å– yml ä¸­çš„æ•°æ®ï¼Œä¼ é€’ç»™ ffmpeg æˆªå–è§†é¢‘ï¼Œå¹¶æ ‡å‡†åŒ–æˆªå–è§†é¢‘çš„éŸ³é¢‘ã€‚&lt;/p>
&lt;p>è¿™ç§ä¸åŒè¯­è¨€é—´çš„è¯­æ³•å·®å¼‚ç€å®åˆçƒ¦æ¼äº†æˆ‘ä¸€é˜µå­ï¼Œå¥½åœ¨å¾®è½¯çš„æ–‡æ¡£ä¹Ÿå¾ˆè¯¦å°½ï¼Œç»•äº†å‡ æ¬¡å¼¯è·¯åæ‰¾åˆ°äº†æ­£ç¡®çš„å†™æ³•ï¼Œå®ç°äº†éœ€æ±‚ã€‚&lt;/p>
&lt;p>è€ƒè™‘åˆ°ç°åœ¨å¤§å®¶åŸºæœ¬ä¸Šéƒ½æœ‰ä¸é”™çš„æ˜¾å¡ï¼Œè°ƒç”¨ ffmpeg æˆªå–æ—¶ä½¿ç”¨ GPU ç¼–/è§£ç åˆèƒ½è¿›ä¸€æ­¥æå‡æ•ˆç‡ï¼Œä½†ä½¿ç”¨ GPU ä¸èƒ½å‘æŒ¥ powershell çš„å¹¶å‘èƒ½åŠ›ï¼Œè¿™å—åˆ¶äºæ˜¾å¡çš„ç¡¬ä»¶ï¼Œä½†ä»æ¯” CPU ç¼–ç å¿«ä¸Šä¸å°‘ã€‚&lt;/p>
&lt;p>ç„¶è€Œåœ¨éŸ³é¢‘æ ‡å‡†åŒ–å¤„ç†ä¸Šï¼ŒGPU å°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ï¼Œåªèƒ½ä¾èµ– CPU å¤„ç†ï¼Œä¸æ­¤åŒæ—¶å¯ä»¥ä¾é  powershell çš„ &lt;code>ForEach-Object -Parallel&lt;/code> å¹¶å‘åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚åªèƒ½è¯´è¿™ä¸¤è€…ç®—æ˜¯æœ‰å¤±æœ‰å¾—å§ã€‚&lt;/p>
&lt;blockquote>
&lt;h4 id="å¯¹åº”ä¿®æ”¹">å¯¹åº”ä¿®æ”¹&lt;/h4>
&lt;p>è§†é¢‘å…ˆè¡Œæˆªå–æ„å‘³ç€ä¹‹å‰ AE è„šæœ¬ä¸­è¯»å–çš„è§†é¢‘æ—¶é—´ç‚¹å…¨éƒ¨æ— æ•ˆäº†ï¼Œäºæ˜¯ä¿®æ”¹äº†å¯¹åº”çš„å˜é‡åœ¨è¯»å–æ•°æ®åç›´æ¥é‡æ–°èµ‹å€¼ä¸ºé›¶ï¼Œçº æ­£äº†æ—¶é—´é—®é¢˜ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="powershell-å·¥ä½œæµ">PowerShell å·¥ä½œæµ&lt;/h2>
&lt;p>æ—¢ç„¶ powershell å¹¶å‘è¿™ä¹ˆå¥½ç”¨ï¼Œæˆ‘åˆåŠ¨äº†æ–°çš„æ­ªè„‘ç­‹ï¼Œæƒ³èµ·äº†ä¹‹å‰ python å†™çš„ B ç«™è§†é¢‘ä¸‹è½½å·¥å…·ã€‚&lt;/p>
&lt;p>å› ä¸ºå·²ç»å°è¯•é‡æ„è¿‡ bash çš„ä»£ç ï¼Œåœ¨ç†Ÿæ‚‰äº† powershell çš„éƒ¨åˆ†å‡½æ•°åï¼Œè¿™éƒ¨åˆ†é‡æ„ä¹Ÿæ˜¯è½»è½¦ç†Ÿè·¯ã€‚å¾ˆå¿«ä¸€ä¸ªè¯»å–åˆ†æ yml æ–‡ä»¶è‡ªåŠ¨ä¸‹è½½è§†é¢‘çš„ powershell è„šæœ¬å°±ç¼–å†™å®Œæˆäº†ã€‚&lt;/p>
&lt;p>ä¸ä»…å¹¶å‘ä¸‹è½½çš„ä»£ç é€»è¾‘æ¯” python ç®€æ´å¤šäº†ï¼Œç”šè‡³åˆå¡«å‘äº†ä¹‹å‰æƒ³è¦æŒ‡å®šä¸‹è½½åˆ† P çš„ TODOã€‚å¦å¤– python ç‰ˆçš„ä»£ç åœ¨ä¸‹è½½æ—¶è°ƒç”¨äº† aria2cï¼Œpowershell çš„é‡æ„ä¸­ä¹Ÿæ”¾å¼ƒäº†è¿™éƒ¨åˆ†ä¾èµ–ï¼Œå¦‚æ­¤ä¸€æ¥æ•´ä¸ªå·¥ä½œæµçš„å¤–éƒ¨ä¾èµ–å°±åªæœ‰ ffmpeg äº†ã€‚&lt;/p>
&lt;p>ä¸ºäº†å®Œå…¨æŠ›å¼ƒ python è„šæœ¬çš„ä¾èµ–ï¼Œå‘¨åˆŠä½¿ç”¨çš„ç”Ÿæˆä¼ é€é—¨è¯„è®ºçš„è„šæœ¬ï¼ˆæ²¡é”™ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ pythonï¼‰å½“ç„¶ä¹Ÿè¦ç”¨ powershell é‡æ„ï¼Œäº‹æƒ…åˆ°äº†è¿™ä¸€æ­¥å·²ç»æ— æ³•åœä¸‹è„šæ­¥äº†ï¼ˆry&lt;/p>
&lt;p>æœ€åï¼Œ&lt;code>download.ps1&lt;/code>, &lt;code>normailze.ps1&lt;/code>, &lt;code>rankdoor.ps1&lt;/code> ç»„æˆäº†å‘¨åˆŠè‡ªåŠ¨åŒ–ä¸­ powershell å·¥ä½œæµçš„ä¸‰å‰‘å®¢ã€‚&lt;/p>
&lt;h2 id="æœªå°½ä¹‹äº‹">æœªå°½ä¹‹äº‹&lt;/h2>
&lt;p>å¦‚æ­¤ä¸€æ¥ï¼Œåˆ¶ä½œå‘¨åˆŠè¿˜å‰©ä¸‹çš„äººå·¥æ“ä½œå°±åªæœ‰é€‰å–è§†é¢‘ç‰‡æ®µä¸€é¡¹äº†ã€‚ä½†æ˜¯è¿™ä¹Ÿå·²ç»æœ‰äº†å°è¯•æ€§çš„è§£å†³æ–¹æ¡ˆï¼ˆ&lt;a class="link" href="https://www.bilibili.com/video/BV1pN411o7Cg?p=2" target="_blank" rel="noopener"
>Artificial Idiot æˆªå–ç‰‡æ®µè¯•è¿è¡Œ&lt;/a>ï¼‰ï¼Œç›®å‰ä»æ˜¯ä¸ª python è„šæœ¬ï¼Œä¹Ÿè®¸æˆç†Ÿä¹‹åä¹Ÿä¼šå†é‡æ„ä¸º powershellï¼Œåˆ°æ—¶å°±æ˜¯å››å‰‘å®¢äº†ã€‚&lt;/p>
&lt;p>å¦‚æœä½ å¯¹ä»¥ä¸Šå†…å®¹æœ‰å…´è¶£ï¼Œç›¸å…³è„šæœ¬&lt;a class="link" href="https://github.com/Neutralization/BiliBiliRankingScripts" target="_blank" rel="noopener"
>åœ¨ Github å·²å¼€æº&lt;/a>ã€‚å¦‚æœä½ ä¸çŸ¥é“å‘¨åˆŠå“”å“©å“”å“©æ’è¡Œæ¦œï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©&lt;a class="link" href="https://space.bilibili.com/398300398" target="_blank" rel="noopener"
>å…³æ³¨äº†è§£ä¸€ä¸‹&lt;/a>ã€‚&lt;/p>
&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>powershell çœŸé¦™ï¼ˆ&lt;/p></description></item><item><title>è¯•åšäº†ä¸€ä¸ªæ˜æ—¥æ–¹èˆŸçš„å°å¤œç¯</title><link>https://naizi.ch/2021/01/12/%E8%AF%95%E5%81%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E6%98%8E%E6%97%A5%E6%96%B9%E8%88%9F%E7%9A%84%E5%B0%8F%E5%A4%9C%E7%81%AF/</link><pubDate>Tue, 12 Jan 2021 00:00:00 +0000</pubDate><guid>https://naizi.ch/2021/01/12/%E8%AF%95%E5%81%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E6%98%8E%E6%97%A5%E6%96%B9%E8%88%9F%E7%9A%84%E5%B0%8F%E5%A4%9C%E7%81%AF/</guid><description>&lt;p>ä¹‹å‰ä¹Ÿæœ‰åœ¨å°è¯•ç”¨ 3D æ‰“å°åšå¥‡æ€ªçš„ä¸œè¥¿ï¼Œå»ºæ¨¡ä¸€ç›´åœ¨ç”¨çš„æ˜¯ AutoDesk å®¶çš„çº¿ä¸Šå·¥å…·&lt;a class="link" href="https://www.tinkercad.com/" target="_blank" rel="noopener"
>Tinkercad&lt;/a>ï¼Œå±äºé‚£ç§æ‹–æ‹–æ‹½æ‹½å°±èƒ½æ‹¼å‡ºå·®ä¸å¤šæ¨¡å‹çš„å·¥å…·ï¼Œè¿˜æŒºå¥½ç”¨ã€‚&lt;/p>
&lt;p>è¿™æ¬¡å°è¯•åšå°å¤œç¯ï¼ŒåŸæœ¬æ˜¯æ‰“ç®—åšæˆæ¸¸æˆå…³å¡ç»“ç®—æ—¶çš„ä¸‰æ˜Ÿæ ‡å¿—ï¼Œåæ¥æƒ³äº†æƒ³ï¼Œä¸ºäº†æ›´æ˜¾è€Œæ˜“è§çš„çªå‡ºæ–¹èˆŸå…ƒç´ ï¼Œç”¨äº†æ¸¸æˆé‡ŒåŒ»ç–—å¹²å‘˜çš„æ ‡å¿—ã€‚ä¸»è¦å› ä¸ºåŒ»ç–—å¹²å‘˜çš„æ ‡å¿—å‡ ä½•å¯¹ç§°æ€§å¾ˆå¥½ï¼Œä¼°æ‘¸ç€å¯ä»¥å·æ‡’ã€‚&lt;/p>
&lt;p>è½¯ä»¶ç”¨äº†åŒäº‹æ¨èçš„&lt;a class="link" href="https://www.openscad.org/" target="_blank" rel="noopener"
>OpenSCAD&lt;/a>ï¼Œé€šè¿‡ä»£ç çš„æ–¹å¼æ¥è¿›è¡Œå»ºæ¨¡ã€‚æˆ‘åŸºæœ¬ä¸Šæ˜¯ä¸€è¾¹æŸ¥æ–‡æ¡£ä¸€è¾¹å†™ï¼Œå¾ˆå®¹æ˜“å°±ä¸Šæ‰‹æ‰¾åˆ°éœ€è¦çš„åŠŸèƒ½å†™å‡ºæ¥äº†ã€‚&lt;/p>
&lt;p>é™¤äº†æ²¡æœ‰ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–è¿™ä¸€ç‚¹ç•¥æœ‰ä¸ä¹ æƒ¯ï¼Œä»£ç é€»è¾‘æ”¯æŒå®ä½“çš„äº¤å¹¶è¡¥æ“ä½œï¼Œæ¸²æŸ“åå¯ä»¥æ„è§å¯¼å‡º stl æ ¼å¼æ–‡æ¡£è¿›è¡Œåç»­æ‰“å°å·¥ä½œï¼Œå®åœ¨æ˜¯æ–¹ä¾¿çš„å¾ˆã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>æ”¾ä¸¤å¼ æˆæœå›¾ï¼Œä½¿ç”¨çš„æ˜¯åˆ›æƒ³ä¸‰ç»´çš„ Ender-3 æ‰“å°æœºã€‚å†¬å¤©ææ–™çƒ­æ¶¨å†·ç¼©æ¯”è¾ƒä¸¥é‡ç»“æœç•™ä¸‹äº†ä¸¤é“å°å­ï¼Œæœ‰ç‚¹å¯æƒœã€‚&lt;/p>
&lt;p>ç”µæ± ç›’æ˜¯åœ£è¯èŠ‚çš„æ—¶å€™é‚£ç§ç»†ç»³è£…é¥°ç¯çš„ç”µæ± ï¼Œè€ƒè™‘åˆ°äº®åº¦å’Œåˆ†æ•£å…‰æºï¼Œæ¥äº†ä¸€ä¸ª COB ç¯æ¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2021-01-12-arknight-lamp/battery.jpg"
loading="lazy"
alt="lamp"
>&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2021-01-12-arknight-lamp/lamp.jpg"
loading="lazy"
alt="lamp"
>&lt;/p>
&lt;p>å·¥ç¨‹æ–‡ä»¶æ”¾åœ¨&lt;a class="link" href="https://github.com/Neutralization/Arknights-lamp" target="_blank" rel="noopener"
>github&lt;/a>ä¸Šäº†ã€‚&lt;/p></description></item><item><title>Python ä½¿ç”¨ USB çƒ­æ•æ‰“å°æœº</title><link>https://naizi.ch/2020/07/07/python-%E4%BD%BF%E7%94%A8-usb-%E7%83%AD%E6%95%8F%E6%89%93%E5%8D%B0%E6%9C%BA/</link><pubDate>Tue, 07 Jul 2020 00:00:00 +0000</pubDate><guid>https://naizi.ch/2020/07/07/python-%E4%BD%BF%E7%94%A8-usb-%E7%83%AD%E6%95%8F%E6%89%93%E5%8D%B0%E6%9C%BA/</guid><description>&lt;p>é€šè¿‡ä½¿ç”¨ python-escpos åº“ï¼Œå°±å¯ä»¥å’Œå¸¸è§çš„ USB çƒ­æ•æ‰“å°æœºé€šä¿¡æ¥è¿›è¡Œæ‰“å°ï¼Œä¸å†èµ˜è¿°å…·ä½“æ–¹æ³•ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ python-escpos åº“å¹¶ä¸æ˜¯ä¸º Windows å†™çš„ï¼Œå®é™…åœ¨ä½¿ç”¨çš„æ—¶å€™å°±ä¼šå‡ºç°è®¸å¤šçš„é—®é¢˜ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯&lt;/p>
&lt;blockquote>
&lt;p>ValueError: No backend available&lt;/p>
&lt;/blockquote>
&lt;p>æ ¹æ®&lt;a class="link" href="https://stackoverflow.com/questions/13773132/pyusb-on-windows-no-backend-available" target="_blank" rel="noopener"
>Stackoverflow&lt;/a>ä¸Šçš„è§£ç­”ï¼Œåº”è¯¥æ˜¯ç¼ºå°‘ dll æ–‡ä»¶ï¼ŒæŒ‰è§£ç­”ä¸­æä¾›çš„é“¾æ¥åœ°å€ä¸‹è½½å®‰è£…å°±è¡Œäº†ã€‚&lt;/p>
&lt;p>ä½†å®‰è£…åä¼šå‡ºç°æ–°çš„é”™è¯¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>NotImplementedError: Operation not supported or unimplemented on this platform&lt;/p>
&lt;/blockquote>
&lt;p>æ‰€å¹¸åœ¨ python-escpos çš„ Github &lt;a class="link" href="https://github.com/python-escpos/python-escpos/issues/316" target="_blank" rel="noopener"
>issue316&lt;/a>ä¸­æœ‰äººæä¾›äº†è§£å†³æ–¹å¼ã€‚ç›´æ¥ä¿®æ”¹æºä»£ç ï¼Œåˆ å»å¯¹åº”çš„å¼‚å¸¸æ•æ‰ï¼Œå°±èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;p>æ­¤å¤„ç•™æ¡£ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚&lt;/p></description></item><item><title>Windows 10 ä½¿ç”¨ OpenSSH + Rsync/SCP åŒæ­¥æ–‡ä»¶</title><link>https://naizi.ch/2020/05/03/windows-10-%E4%BD%BF%E7%94%A8-openssh--rsync/scp-%E5%90%8C%E6%AD%A5%E6%96%87%E4%BB%B6/</link><pubDate>Sun, 03 May 2020 00:00:00 +0000</pubDate><guid>https://naizi.ch/2020/05/03/windows-10-%E4%BD%BF%E7%94%A8-openssh--rsync/scp-%E5%90%8C%E6%AD%A5%E6%96%87%E4%BB%B6/</guid><description>&lt;p>ç–«æƒ…æœŸé—´åœ¨å®¶å·¥ä½œä¸€ç›´ä½¿ç”¨å…¬å¸çš„ VPNï¼Œäºæ˜¯åœ¨å…¬å¸ç”µè„‘å¼€äº†å…±äº«ç”¨æ¥ä¼ è¾“æ–‡ä»¶ã€‚ä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå…¬å¸-&amp;gt;å®¶æ–¹å‘ä¼ æ–‡ä»¶å¾ˆé¡ºç•…ï¼Œåæ–¹å‘ä¼ æ–‡ä»¶æ—¶å°±ç»å¸¸ä¼šå‡ºç°è¿›åº¦æ¡èµ°åˆ°æœ«å°¾å°±åœä½ï¼Œè¦å¤šç­‰ä¸€æ®µæ—¶é—´æ‰èƒ½ä¼ è¾“ç»“æŸçš„é—®é¢˜ã€‚&lt;/p>
&lt;p>è™½ç„¶å¯ä»¥è€ƒè™‘ç”¨ OneDrive è¿™ç±»ç½‘ç›˜æ¥è¿›è¡ŒåŒæ­¥ï¼Œä½†è¿™æ ·çš„åŒæ­¥ä¸å¤Ÿå®æ—¶ï¼Œè€Œä¸”æ¯•ç«Ÿè¦ä»ä¸‰æ–¹æœåŠ¡å™¨ç»•ä¸€åœˆï¼Œä¸Šä¼ é€Ÿåº¦æ³¢åŠ¨ä¹Ÿå¾ˆå¤§ã€‚&lt;/p>
&lt;p>æƒ³åˆ°æ—¢ç„¶ Windows 10 æ”¯æŒäº† OpenSSHï¼Œå®¶é‡Œå’Œå…¬å¸ç”µè„‘åˆéƒ½è£…äº† WSLï¼Œä¹Ÿè®¸å¯ä»¥ç”¨ rsync/scp æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="å®‰è£…-openssh-server">å®‰è£… OpenSSH Server&lt;/h2>
&lt;p>Windows 10(1809) è™½ç„¶è‡ªå¸¦äº† OpenSSH çš„ Server å’Œ Clientï¼Œä½†é»˜è®¤å¹¶æ²¡æœ‰å®‰è£…ã€‚&lt;/p>
&lt;p>å‚ç…§&lt;a class="link" href="https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse" target="_blank" rel="noopener"
>Microsoft çš„æ–‡æ¡£&lt;/a>ç»™ä¸¤å°ç”µè„‘éƒ½å®‰è£… OpenSSHï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-PowerShell" data-lang="PowerShell">&lt;span style="display:flex;">&lt;span>Get-WindowsCapability -Online | ? Name &lt;span style="color:#f92672">-like&lt;/span> &lt;span style="color:#e6db74">&amp;#39;OpenSSH*&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># This should return the following output:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Name &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> OpenSSH.Client~~~~&lt;span style="color:#ae81ff">0.0&lt;/span>.1.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>State &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> NotPresent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Name &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> OpenSSH.Server~~~~&lt;span style="color:#ae81ff">0.0&lt;/span>.1.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>State &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> NotPresent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Install the OpenSSH Client&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Add-WindowsCapability -Online -Name OpenSSH.Client~~~~&lt;span style="color:#ae81ff">0.0&lt;/span>.1.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Install the OpenSSH Server&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Add-WindowsCapability -Online -Name OpenSSH.Server~~~~&lt;span style="color:#ae81ff">0.0&lt;/span>.1.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Both of these should return the following output:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Path &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Online &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> True
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RestartNeeded &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> False
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Start-Service sshd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># OPTIONAL but recommended:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Set-Service -Name sshd -StartupType &lt;span style="color:#e6db74">&amp;#39;Automatic&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Confirm the Firewall rule is configured. It should be created automatically by setup.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get-NetFirewallRule -Name *ssh*
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># There should be a firewall rule named &amp;#34;OpenSSH-Server-In-TCP&amp;#34;, which should be enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># If the firewall does not exist, create one&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>New-NetFirewallRule -Name sshd -DisplayName &lt;span style="color:#e6db74">&amp;#39;OpenSSH Server (sshd)&amp;#39;&lt;/span> -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort &lt;span style="color:#ae81ff">22&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ—¶å€™å°±å¯ä»¥ä»å…¶ä¸­ä¸€å°ç”µè„‘å‘å¦ä¸€å°å‘èµ· SSH è¿æ¥äº†ã€‚&lt;/p>
&lt;h2 id="ç”Ÿæˆ-ssh-å¯†é’¥å¹¶éƒ¨ç½²">ç”Ÿæˆ SSH å¯†é’¥å¹¶éƒ¨ç½²&lt;/h2>
&lt;p>è€ƒè™‘åˆ°ä¹‹åè®¡åˆ’ä½¿ç”¨ rsync ä¼ è¾“ï¼Œä¸ Linux ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯†é’¥ç™»é™†çš„æ–¹å¼æ¥é¿å…æ¯æ¬¡éƒ½è¦è¾“å…¥å¯†ç ã€‚&lt;/p>
&lt;p>å…ˆè®¾å®šä½œä¸º Client çš„ç”µè„‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-PowerShell" data-lang="PowerShell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æç¤ºè¾“å…¥ç”Ÿæˆå¯†é’¥çš„æ–‡ä»¶åï¼Œè¿™é‡Œå‡è®¾æ˜¯ client_rsa&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ssh-keygen
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¯åŠ¨ssh-agentæœåŠ¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get-Service -Name ssh-agent | Set-Service -StartupType &lt;span style="color:#e6db74">&amp;#39;Automatic&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Start-Service ssh-agent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¯¼å…¥å¯†é’¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ssh-add client_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å…ˆé€šè¿‡å¯†ç ç™»å½•çš„æ–¹å¼ SSH è¿æ¥åˆ° Server çš„ç”µè„‘ä¸Šï¼šï¼ˆæ³¨æ„æ›¿æ¢æˆè‡ªå·±çš„ server_user å’Œ client_userï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-PowerShell" data-lang="PowerShell">&lt;span style="display:flex;">&lt;span>ssh server_user@Server_ip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir C:\Users\server_user\.ssh\
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>scp C:\Users\client_user\.ssh\client_rsa.pub server_user@Server_ip&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>C:\Users\server_user\.ssh\authorized_keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é€€å‡º SSH ä¼šè¯ï¼Œç„¶åé‡æ–°è¿æ¥ï¼Œè¿™æ—¶åº”è¯¥å·²ç»ä¸éœ€è¦å†è¾“å…¥å¯†ç äº†ã€‚&lt;/p>
&lt;p>è®¾ç½®åˆ°è¿™é‡Œçš„æ—¶å€™è¸©åˆ°ä¸€ä¸ªå‘ï¼šå¦‚æœ SSH ç™»å½•çš„ Server ç”¨æˆ·æ˜¯ç®¡ç†å‘˜èº«ä»½çš„è¯ï¼Œ&lt;code>authorized_keys&lt;/code>éœ€è¦å­˜åˆ°&lt;code>C:\ProgramData\ssh\administrators_authorized_keys&lt;/code>è¿™ä¸ªä½ç½®ã€‚&lt;/p>
&lt;p>ä¸ç„¶çš„è¯æ­¤æ—¶ SSH ç™»å½•ä»ç„¶ä¼šè¦æ±‚å¯†ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-PowerShell" data-lang="PowerShell">&lt;span style="display:flex;">&lt;span>ssh server_user@Server_ip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>scp C:\Users\client_user\.ssh\client_rsa.pub server_user@Server_ip&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>C:\ProgramData\ssh\administrators_authorized_keys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä¿®æ­£ACLæƒé™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$acl = Get-Acl C:\ProgramData\ssh\administrators_authorized_keys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$acl.SetAccessRuleProtection($true, $false)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$administratorsRule = New-Object system.security.accesscontrol.filesystemaccessrule(&lt;span style="color:#e6db74">&amp;#34;Administrators&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;FullControl&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;Allow&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$systemRule = New-Object system.security.accesscontrol.filesystemaccessrule(&lt;span style="color:#e6db74">&amp;#34;SYSTEM&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;FullControl&amp;#34;&lt;/span>,&lt;span style="color:#e6db74">&amp;#34;Allow&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$acl.SetAccessRule($administratorsRule)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$acl.SetAccessRule($systemRule)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$acl | Set-Acl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¹‹åå¯¹è°ƒ Client å’Œ Server çš„èº«ä»½å†åšä¸€æ¬¡åŒæ ·çš„äº‹æƒ…å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;h2 id="è¿›å…¥-wsl-éƒ¨ç½²-rsync">è¿›å…¥ WSL éƒ¨ç½² rsync&lt;/h2>
&lt;p>åªç”¨ scp å­˜åœ¨ç€ä¸€å®šçš„å±€é™æ€§ï¼Œè‹¥è¦ä½¿ç”¨ rsync åˆ™éœ€è¦ä¾é  WSL äº†ã€‚&lt;/p>
&lt;p>ä¾æ—§ä» Client å¼€å§‹è®¾ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd ~/.ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /mnt/c/Users/client_user/.ssh/client_rsa ./client_rsa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /mnt/c/Users/client_user/.ssh/client_rsa.pub ./client_rsa.pub
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod &lt;span style="color:#ae81ff">600&lt;/span> client_rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è½¬åˆ° Server ä¸Šï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd ~/.ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /mnt/c/Users/server_user/.ssh/authorized_keys ./authorized_keys
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‡è®¾ Client çš„ D ç›˜æœ‰ä¸ª testfile çš„æ–‡ä»¶ï¼Œæµ‹è¯• rsyncï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># --rsync-path=&amp;#34;wsl rsync&amp;#34; ç”¨æ¥æŒ‡ç¤ºServeré€šè¿‡wslå¯åŠ¨rsyncç¯å¢ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rsync -rtuv -e &lt;span style="color:#e6db74">&amp;#34;ssh -i ~/.ssh/client_rsa&amp;#34;&lt;/span> /mnt/d/testfile server_user@Server_ip:/mnt/d/ --rsync-path&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;wsl rsync&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåº”è¯¥ä¸ä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œç„¶åä½ èƒ½åœ¨ Server çš„ D ç›˜çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;p>åŒæ ·ï¼Œå¯¹è°ƒ Client å’Œ Server çš„èº«ä»½å†è®¾å®šä¸€æ¬¡å°±å¯ä»¥åŒå‘æ“ä½œäº†ã€‚&lt;/p>
&lt;h2 id="eof">EOF&lt;/h2></description></item><item><title>Windows ä½¿ç”¨ WSL é…ç½® crontab å®šæ—¶ä»»åŠ¡</title><link>https://naizi.ch/2020/01/25/windows-%E4%BD%BF%E7%94%A8-wsl-%E9%85%8D%E7%BD%AE-crontab-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</link><pubDate>Sat, 25 Jan 2020 00:00:00 +0000</pubDate><guid>https://naizi.ch/2020/01/25/windows-%E4%BD%BF%E7%94%A8-wsl-%E9%85%8D%E7%BD%AE-crontab-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</guid><description>&lt;p>æœ‰äº› python è„šæœ¬ä»»åŠ¡å¯¹äºæ ‘è“æ´¾æ¥è¯´è¿˜æ˜¯è´Ÿæ‹…å¤ªé‡äº†ã€‚æ¯•ç«Ÿæ€§èƒ½ä¸Šé™æ‘†åœ¨é‚£é‡Œï¼Œä¹Ÿä¸èƒ½é ä¸€ä¸ªå°å°çš„ pi æ‰¿æ‹…å¤ªå¤šã€‚&lt;/p>
&lt;p>å€Ÿæ­¤æœºä¼šæ­£å¥½å°è¯•ä¸€ä¸‹ WSL(Windows Subsystem for Linux).&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="å®‰è£…-wsl">å®‰è£… WSL&lt;/h2>
&lt;p>å®‰è£… WSL å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„å¤æ‚ã€‚è¿›å…¥æ§åˆ¶é¢æ¿-&amp;gt;ç¨‹åºå’ŒåŠŸèƒ½-&amp;gt;å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½ï¼Œå‹¾é€‰&lt;code>é€‚ç”¨äºLinuxçš„Windowså­ç³»ç»Ÿ&lt;/code>ï¼Œç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œç„¶åé‡å¯ç³»ç»Ÿã€‚&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2020-01-25-wsl-crontab/Snipaste_2020-01-25_19-14-26.png"
loading="lazy"
alt="é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ"
>&lt;/p>
&lt;p>é‡å¯å®Œæ¯•ï¼Œå¼€å§‹èœå•é€‰æ‹© MicrosoftStoreï¼Œæœç´¢ linux å°±èƒ½å¤Ÿæ‰¾åˆ°å¯ä¾›ä½¿ç”¨çš„ linux å‘è¡Œç‰ˆï¼Œæˆ‘è¿™é‡Œé€‰æ‹©äº† Ubuntu18.04LTSã€‚&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2020-01-25-wsl-crontab/Snipaste_2020-01-25_02-08-03.png"
loading="lazy"
alt="MicrosoftStore"
>&lt;/p>
&lt;p>åº”ç”¨å®‰è£…å®Œæ¯•åï¼Œå¯åŠ¨åº”ç”¨ä¼šè¦æ±‚è®¾å®šåŸºç¡€çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ¥ç€ï¼Œä¸€ä¸ªå¯ä¾›ä½¿ç”¨çš„ WSL å°±å‡†å¤‡å°±ç»ªäº†ã€‚&lt;/p>
&lt;h2 id="ç¡®ä¿-crontab-æœåŠ¡">ç¡®ä¿ crontab æœåŠ¡&lt;/h2>
&lt;p>ç”±äº WSL å¹¶ä¸ä¼šé»˜è®¤å¯åŠ¨ï¼Œè€Œä¸”å½“è¿è¡Œä¸­çš„ WSL çš„æœ€åä¸€ä¸ª bash å…³é—­åï¼Œå°±ç›¸å½“äºå…³é—­äº†æ•´ä¸ªå­ç³»ç»Ÿï¼Œé‚£æˆ‘ä»¬çš„ crontab ä¹Ÿå°±ç›´æ¥å»ä¸–äº†ã€‚&lt;/p>
&lt;p>ä¸ºäº†ä¿æŒ crontab å¸¸é©»ï¼Œéœ€è¦ä¸€äº›æªæ–½ã€‚è¿™é‡Œå‚è€ƒäº†&lt;a class="link" href="https://blog.snowme34.com/post/schedule-tasks-using-crontab-on-windows-10-with-wsl/index.html" target="_blank" rel="noopener"
>Schedule Tasks Using Crontab on Windows 10 with WSL&lt;/a>çš„æ–¹æ³•ï¼Œå»ºç«‹ä¸€ä¸ª crontab æœåŠ¡çš„ Windows å¯åŠ¨é¡¹ï¼Œæ¯æ¬¡ç³»ç»Ÿå¯åŠ¨ååœ¨åå°å¸¸é©»ã€‚&lt;/p>
&lt;p>é¦–å…ˆè¿›å…¥ WSLï¼Œä¿®æ”¹ sudoerï¼Œé¿å…æ¯æ¬¡å¯åŠ¨ crontab æœåŠ¡æ—¶éœ€è¦è¾“å…¥å¯†ç ç¡®è®¤ï¼š&lt;/p>
&lt;blockquote>
&lt;p>sudo visudo&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨æ–‡ä»¶æœ«å°¾åŠ å…¥&lt;/p>
&lt;blockquote>
&lt;p>%sudo ALL=NOPASSWD: /etc/init.d/cron start&lt;/p>
&lt;/blockquote>
&lt;p>ç„¶åä¿å­˜æ–‡ä»¶ã€‚å›åˆ° Windowsï¼ŒWin+R æ‰“å¼€è¿è¡Œï¼Œè¾“å…¥&lt;code>shell:startup&lt;/code>æ‰“å¼€å¯åŠ¨æ–‡ä»¶å¤¹ï¼Œå³é”®æ–°å»ºå¿«æ·æ–¹å¼ï¼Œç›®æ ‡è¾“å…¥ï¼š&lt;/p>
&lt;blockquote>
&lt;p>C:\Windows\System32\wsl.exe sudo /etc/init.d/cron start&lt;/p>
&lt;/blockquote>
&lt;p>è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä¿è¯ crontab åœ¨æ¯æ¬¡ Windows å¯åŠ¨åå¸¸é©»åå°äº†ã€‚ä¸€åˆ‡æ­£å¸¸çš„è¯é‡å¯ Windowsï¼Œåœ¨ä»»åŠ¡ç®¡ç†å™¨èƒ½çœ‹åˆ°ä¸€ä¸ªåç§°ä¸º cron çš„è¿›ç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2020-01-25-wsl-crontab/Snipaste_2020-01-25_19-16-06.png"
loading="lazy"
alt="ä»»åŠ¡ç®¡ç†å™¨"
>&lt;/p>
&lt;h2 id="ä½¿ç”¨-crontab">ä½¿ç”¨ crontab&lt;/h2>
&lt;p>å‰©ä¸‹çš„æ“ä½œå’Œåœ¨ linux é‡Œä½¿ç”¨ crontab æ²¡æœ‰åŒºåˆ«ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/p>
&lt;p>åœ¨ WSL ä¸­ï¼ŒWindows çš„ C ç›˜è¢«æŒ‚è½½åœ¨&lt;code>/mnt/c&lt;/code>ç›®å½•ä¸‹ï¼ŒD\E\F ä»¥æ­¤ç±»æ¨ï¼Œéœ€è¦æ³¨æ„å¯¹åº”ä¿®æ”¹ã€‚&lt;/p>
&lt;h2 id="eof">EOF&lt;/h2></description></item><item><title>æ¥ä¸€åœºåœ†å‘¨ç‡çš„é£èŠ±ä»¤</title><link>https://naizi.ch/2019/11/26/%E6%9D%A5%E4%B8%80%E5%9C%BA%E5%9C%86%E5%91%A8%E7%8E%87%E7%9A%84%E9%A3%9E%E8%8A%B1%E4%BB%A4/</link><pubDate>Tue, 26 Nov 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/11/26/%E6%9D%A5%E4%B8%80%E5%9C%BA%E5%9C%86%E5%91%A8%E7%8E%87%E7%9A%84%E9%A3%9E%E8%8A%B1%E4%BB%A4/</guid><description>&lt;p>é€›å¾®åšçœ‹åˆ°äº†ä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼šå±±ä¸œå«è§†ã€Šå›½å­¦å°åå£«ã€‹ç¬¬ä¸‰å­£çš„èŠ‚ç›®ï¼Œè¿›è¡Œäº†ä¸€åœº Ï€(åœ†å‘¨ç‡) çš„é£èŠ±ä»¤ã€‚&lt;/p>
&lt;p>èŠ‚ç›®é‡Œé€‰æ‰‹ä»¬æ¥åˆ°äº†å°æ•°ç‚¹å 204 ä½ï¼Œé‚£ï¼Œèƒ½ä¸èƒ½æ›´é•¿ä¸€ç‚¹ï¼Ÿ&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="æ•°æ®å‚¨å¤‡">æ•°æ®å‚¨å¤‡&lt;/h2>
&lt;p>é¦–å…ˆéœ€è¦æœ‰è¶³å¤Ÿå¤šçš„å¤è¯—è¯å‚¨å¤‡ï¼Œä¸ç„¶ç¨‹åºç”Ÿæˆçš„æ—¶å€™è€—å…‰å¼¹è¯å°±æ˜¾å¾—éå¸¸å°´å°¬äº†ã€‚&lt;/p>
&lt;p>éå¸¸æ„Ÿè°¢&lt;a class="link" href="https://github.com/chinese-poetry/chinese-poetry" target="_blank" rel="noopener"
>chinese-poetry&lt;/a>è¿™æ ·çš„å¼€æºé¡¹ç›®ï¼Œç§¯ç´¯äº†å¤§é‡çš„å·²ç»ç»“æ„åŒ–çš„å¤è¯—è¯æ•°æ®ã€‚&lt;/p>
&lt;p>è¿™é‡Œåªç”¨å®‹è¯éƒ¨åˆ†çš„æ•°æ®ã€‚&lt;/p>
&lt;h2 id="ç®—æ³•é€»è¾‘">ç®—æ³•é€»è¾‘&lt;/h2>
&lt;p>é€»è¾‘å¾ˆç®€å•ç²—æš´ï¼šæ‰¾å‡ºæ‰€æœ‰åŒ…å«ä¸­æ–‡æ•°å­—çš„è¯å¥è¿›è¡Œæ±‡æ€»ï¼Œç„¶åæŒ‰å°æ•°ç‚¹åä½æ•°è¿­ä»£ Ï€ å€¼éšæœºå–å¯¹åº”çš„è¯—è¯å°±è¡Œã€‚&lt;/p>
&lt;p>æ•´ç†è¯—è¯æ•°æ®ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> re
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>filelist &lt;span style="color:#f92672">=&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file &lt;span style="color:#66d9ef">for&lt;/span> file &lt;span style="color:#f92672">in&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>listdir(&lt;span style="color:#e6db74">&amp;#39;./json&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">if&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>search(&lt;span style="color:#e6db74">r&lt;/span>&lt;span style="color:#e6db74">&amp;#39;poet.song&amp;#39;&lt;/span>, file)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>files &lt;span style="color:#f92672">=&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> json&lt;span style="color:#f92672">.&lt;/span>load(open(&lt;span style="color:#e6db74">&amp;#39;./json/&amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> file, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> file &lt;span style="color:#f92672">in&lt;/span> filelist
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>result &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;ä¸€&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;äºŒ&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;ä¸‰&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;å››&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;äº”&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;å…­&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;ä¸ƒ&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;å…«&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;ä¹&amp;#39;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;é›¶&amp;#39;&lt;/span>: []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> file &lt;span style="color:#f92672">in&lt;/span> files:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> file:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> y &lt;span style="color:#f92672">in&lt;/span> x[&lt;span style="color:#e6db74">&amp;#39;paragraphs&amp;#39;&lt;/span>]:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> z &lt;span style="color:#f92672">in&lt;/span> [&lt;span style="color:#e6db74">&amp;#39;ä¸€&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;äºŒ&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;ä¸‰&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;å››&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;äº”&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;å…­&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;ä¸ƒ&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;å…«&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;ä¹&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;é›¶&amp;#39;&lt;/span>]:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">ã€€&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>search(z, y):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result[z] &lt;span style="color:#f92672">=&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(z) &lt;span style="color:#f92672">+&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#ae81ff">\n\t\t\t\t&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(y, x[&lt;span style="color:#e6db74">&amp;#39;author&amp;#39;&lt;/span>], x[&lt;span style="color:#e6db74">&amp;#39;title&amp;#39;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;step.json&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;w&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(json&lt;span style="color:#f92672">.&lt;/span>dumps(result, ensure_ascii&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="Ï€-å€¼è®¡ç®—">Ï€ å€¼è®¡ç®—&lt;/h2>
&lt;p>æ— è„‘å¥—ç”¨äº†ä¸€ä¸‹åˆ«äººçš„ä»£ç ï¼š&lt;a class="link" href="http://z-rui.github.io/post/2015/06/pi-digits/" target="_blank" rel="noopener"
>http://z-rui.github.io/post/2015/06/pi-digits/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">pidigits&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> q, r, t, u, i &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">180&lt;/span>, &lt;span style="color:#ae81ff">60&lt;/span>, &lt;span style="color:#ae81ff">168&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> &lt;span style="color:#66d9ef">True&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> y &lt;span style="color:#f92672">=&lt;/span> r &lt;span style="color:#f92672">//&lt;/span> t
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">yield&lt;/span> y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> q, r, t, u, i &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#f92672">*&lt;/span> q &lt;span style="color:#f92672">*&lt;/span> i &lt;span style="color:#f92672">*&lt;/span> (&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#f92672">*&lt;/span> i &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>), &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#f92672">*&lt;/span> u &lt;span style="color:#f92672">*&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> q &lt;span style="color:#f92672">*&lt;/span> (&lt;span style="color:#ae81ff">5&lt;/span> &lt;span style="color:#f92672">*&lt;/span> i &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>) &lt;span style="color:#f92672">+&lt;/span> r &lt;span style="color:#f92672">-&lt;/span> y &lt;span style="color:#f92672">*&lt;/span> t), t &lt;span style="color:#f92672">*&lt;/span> u, u &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">54&lt;/span> &lt;span style="color:#f92672">*&lt;/span> (i &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>), i &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸åœè¿­ä»£ pidigits() å°±èƒ½å¾—åˆ°åä¸€ä½å°æ•°æ•°å€¼ã€‚&lt;/p>
&lt;h2 id="å¼€å§‹é£èŠ±ä»¤">å¼€å§‹é£èŠ±ä»¤&lt;/h2>
&lt;p>æµ‹è¯•ä¸€ä¸‹è¿­ä»£åœ†å‘¨ç‡ 1000 ä½&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> random &lt;span style="color:#f92672">import&lt;/span> randint
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>poets &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>load(open(&lt;span style="color:#e6db74">&amp;#39;step.json&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>number &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">1&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;ä¸€&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">2&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;äºŒ&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">3&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;ä¸‰&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">4&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;å››&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">5&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;äº”&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">6&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;å…­&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">7&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;ä¸ƒ&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">8&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;å…«&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">9&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;ä¹&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">0&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;é›¶&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>n &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">pidigits&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> q, r, t, u, i &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">180&lt;/span>, &lt;span style="color:#ae81ff">60&lt;/span>, &lt;span style="color:#ae81ff">168&lt;/span>, &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> &lt;span style="color:#66d9ef">True&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> y &lt;span style="color:#f92672">=&lt;/span> r &lt;span style="color:#f92672">//&lt;/span> t
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">yield&lt;/span> y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> q, r, t, u, i &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#f92672">*&lt;/span> q &lt;span style="color:#f92672">*&lt;/span> i &lt;span style="color:#f92672">*&lt;/span> (&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#f92672">*&lt;/span> i &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>), &lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#f92672">*&lt;/span> u &lt;span style="color:#f92672">*&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> q &lt;span style="color:#f92672">*&lt;/span> (&lt;span style="color:#ae81ff">5&lt;/span> &lt;span style="color:#f92672">*&lt;/span> i &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>) &lt;span style="color:#f92672">+&lt;/span> r &lt;span style="color:#f92672">-&lt;/span> y &lt;span style="color:#f92672">*&lt;/span> t), t &lt;span style="color:#f92672">*&lt;/span> u, u &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">54&lt;/span> &lt;span style="color:#f92672">*&lt;/span> (i &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>), i &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">while&lt;/span> &lt;span style="color:#66d9ef">True&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f &lt;span style="color:#f92672">=&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;result.md&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;w&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> num &lt;span style="color:#f92672">in&lt;/span> pidigits():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used &lt;span style="color:#f92672">=&lt;/span> []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> new &lt;span style="color:#f92672">=&lt;/span> poets[number[num]]&lt;span style="color:#f92672">.&lt;/span>pop(randint(&lt;span style="color:#ae81ff">0&lt;/span>, len(poets[number[num]])))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">while&lt;/span> new &lt;span style="color:#f92672">in&lt;/span> used:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> new &lt;span style="color:#f92672">=&lt;/span> poets[number[num]]&lt;span style="color:#f92672">.&lt;/span>pop(randint(&lt;span style="color:#ae81ff">0&lt;/span>, len(poets[number[num]])))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(num, number[num], new)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#ae81ff">\t&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#ae81ff">\t&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num, number[num],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> new&lt;span style="color:#f92672">.&lt;/span>replace(number[num], &lt;span style="color:#e6db74">&amp;#39;`&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">`&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(number[num]))))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used &lt;span style="color:#f92672">=&lt;/span> used&lt;span style="color:#f92672">.&lt;/span>append(new)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> n &lt;span style="color:#f92672">+=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> n &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">1000&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>close()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sys&lt;span style="color:#f92672">.&lt;/span>exit()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="eof">EOF&lt;/h2></description></item><item><title>å“”å“©å“”å“©ä¸‹è½½å·¥å…· ä¸‰</title><link>https://naizi.ch/2019/11/16/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7-%E4%B8%89/</link><pubDate>Sat, 16 Nov 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/11/16/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7-%E4%B8%89/</guid><description>&lt;p>æœ‰ç”Ÿä¹‹å¹´æˆ‘æœ€åå±…ç„¶æ˜¯ç”¨ Shell æ¥å¡«äº†åˆ† P çš„ TODOâ€¦â€¦&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="curl---å‘½ä»¤è¡Œä¸‹çš„æ–‡ä»¶ä¼ è¾“å·¥å…·">cURL - å‘½ä»¤è¡Œä¸‹çš„æ–‡ä»¶ä¼ è¾“å·¥å…·&lt;/h2>
&lt;p>cURL è¿™ä¸ªå·¥å…·å¤ªè¿‡å¼ºå¤§ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¯¥æ€ä¹ˆå»è§£é‡Šå®ƒæ¯”è¾ƒå¥½ã€‚å‡ ä¹æ‰€æœ‰çš„ç½‘ç»œè®¿é—®ï¼Œä¸Šä¼ ä¸‹è½½ï¼Œéƒ½èƒ½å¤Ÿä½¿ç”¨ cURL æ¥å®Œæˆã€‚&lt;/p>
&lt;p>ä¹Ÿéš¾æ€ªè¯¸å¦‚ Chrome å’Œ Firefox ç­‰æµè§ˆå™¨ï¼Œä¼šæ”¯æŒå¤åˆ¶ç½‘ç»œè®¿é—®ä¸º cURLã€‚è€Œå…¶å®æˆ‘ä¹Ÿä¸€ç›´ä¾é è¿™ä¸ªåŠŸèƒ½ï¼Œé€šè¿‡&lt;a class="link" href="https://curl.trillworks.com/" target="_blank" rel="noopener"
>https://curl.trillworks.com/&lt;/a>æ¥å¿«é€Ÿå†™æˆ‘çš„ python çˆ¬è™«ã€‚&lt;/p>
&lt;p>å¤§éƒ¨åˆ†çš„å·¥ä½œéƒ½å¯ä»¥ç›´æ¥é å³é”®å¤åˆ¶ä¸º cURL æ¥å®Œæˆï¼Œæ‰€ä»¥åªéœ€è¦ç®€å•çš„æŸ¥çœ‹ä¸‹ cURL çš„è¯´æ˜ï¼Œä¾¿äºè¿›è¡Œä¸€äº›å°çš„ä¿®æ”¹å°±è¡Œã€‚&lt;/p>
&lt;p>ç„¶åå¼€å§‹å¯¹ç…§ä¹‹å‰å†™çš„ python è„šæœ¬çš„é€»è¾‘ï¼Œä¸€æ­¥æ­¥è½¬æˆ Shell è„šæœ¬ã€‚&lt;/p>
&lt;h2 id="jq---å‘½ä»¤è¡Œä¸‹çš„-json-å¤„ç†å·¥å…·">jq - å‘½ä»¤è¡Œä¸‹çš„ JSON å¤„ç†å·¥å…·&lt;/h2>
&lt;p>B ç«™ API æ¥å£çš„å„ç§è¿”å›æ•°æ®ä»¥ JSON ä¸ºä¸»ï¼Œç›´æ¥é  awk/sed æ‰‹æ’¸è§£ææ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸Š jq è¿™ä¸ªå·¥å…·å‡è½»è´Ÿæ‹…ã€‚&lt;/p>
&lt;p>jq è§£æ JSON æ•°æ®éå¸¸çš„ä¾¿æ·ï¼Œæ¯”å¦‚è·å–åˆ† P æ•°æ®æ—¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;code&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;message&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;0&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;ttl&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;data&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;cid&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">73802454&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;page&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;from&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;vupload&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;part&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;3&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;duration&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">66&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;vid&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;weblink&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;dimension&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;width&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">1920&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;height&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">1080&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;rotate&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>â†‘ jq çš„å¦ä¸€ä¸ªä½œç”¨å°±æ˜¯æ ¼å¼åŒ– json æ•°æ®ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä»£ç å°±æ˜¯é€šè¿‡&lt;code>cat result.json | jq .&lt;/code>è‡ªåŠ¨æ ¼å¼åŒ–å‡ºæ¥çš„ã€‚&lt;/p>
&lt;p>è¦å–å¾—åˆ† P çš„ cidï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
&lt;code>curl -sL 'https://api.bilibili.com/x/player/pagelist?aid=42038790&amp;amp;jsonp=jsonp' | jq -r '.data[0].cid'&lt;/code>&lt;/p>
&lt;p>å¦‚æœæœ‰å¤šä¸ªåˆ† Pï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å–å¾—æ‰€æœ‰çš„ cidï¼š
&lt;code>curl -sL 'https://api.bilibili.com/x/player/pagelist?aid=42038790&amp;amp;jsonp=jsonp' | jq -r '.data[].cid'&lt;/code>&lt;/p>
&lt;p>çœŸçš„æ˜¯éå¸¸æ–¹ä¾¿ã€‚&lt;/p>
&lt;h2 id="sed---æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„æµç¼–è¾‘å™¨">sed - æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„æµç¼–è¾‘å™¨&lt;/h2>
&lt;p>è€ƒè™‘åˆ° windows ä¸Šçš„å…¼å®¹æ€§ï¼Œå¦‚æœç”¨è§†é¢‘æ ‡é¢˜åšæ–‡ä»¶åï¼ŒåŠ¿å¿…è¦æ’é™¤&lt;code>/?!.*|:&lt;/code>ç­‰ç‰¹æ®Šå­—ç¬¦ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨ sed æ¥å®Œæˆï¼š
&lt;code>curl -sL -H https://api.bilibili.com/x/web-interface/view?aid=42038790 | jq -r '.data.title' | sed 's/[/?!.*|:]//g'&lt;/code>&lt;/p>
&lt;p>å†åé¢æˆ‘ä»¬ä¼šæ›´å¤šçš„ç”¨åˆ° sedã€‚&lt;code>(Flag)&lt;/code>&lt;/p>
&lt;h2 id="ç¼–å†™-shell-è„šæœ¬">ç¼–å†™ Shell è„šæœ¬&lt;/h2>
&lt;p>&lt;code>$1&lt;/code> ä»£è¡¨äº†å‘½ä»¤è¡Œä¼ ç»™è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½¿ç”¨åœºæ™¯ç±»ä¼¼ &lt;code>bash download.sh av42038790&lt;/code>
é€šè¿‡ sedï¼Œæˆ‘ä»¬å¯ä»¥å…¼å®¹ &lt;code>bash download.sh https://www.bilibili.com/video/av42038790?from=search&amp;amp;seid=3037567923943401758&lt;/code> çš„é“¾æ¥æ¨¡å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $1 | sed -e &lt;span style="color:#e6db74">&amp;#39;s/.*av//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/[a-zA-Z?/].*//g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Shell è„šæœ¬ä¸­å£°æ˜å˜é‡æ—¶ç­‰å·å‰åéƒ½ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä½¿ç”¨å˜é‡æ—¶åœ¨å˜é‡å‰åŠ ä¸Š&lt;code>$&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>pagelist&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/pagelist?aid=&amp;#39;&lt;/span>$aid&lt;span style="color:#e6db74">&amp;#39;&amp;amp;jsonp=jsonp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cids&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL $pagelist | jq -r &lt;span style="color:#e6db74">&amp;#39;.data[].cid&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™é‡Œçš„ cids åªæ˜¯ä¸€ä¸ªåŒ…å«ç©ºæ ¼åˆ†éš”çš„å­—ç¬¦ä¸²&lt;code>123 234 345&lt;/code>ï¼Œä¸ºäº†è®© Shell æ­£ç¡®è®¡æ•°ï¼ŒæŠŠå®ƒè½¬ä¸ºæ•°ç»„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cids_arr&lt;span style="color:#f92672">=(&lt;/span>$cids&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·ä¸€æ¥é€šè¿‡&lt;code>${ #cids_arr[@] }&lt;/code>å°±èƒ½å¤Ÿæ­£ç¡®å¾—å‡º cids ä¸­çš„å…ƒç´ ä¸ªæ•°&lt;/p>
&lt;p>æ¥ä¸‹æ¥é€šè¿‡ for å¾ªç¯éå† cids ä¸­çš„å…ƒç´ ï¼Œä¸ºäº†èƒ½åŒæ—¶è®¡ç®—å…ƒç´ çš„ä¸ªæ•°ï¼Œéœ€è¦å¦è¡Œè®¡æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>part&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> cid in $cids
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> episode&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$((&lt;/span> &lt;span style="color:#f92672">++&lt;/span>part &lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#some code&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Shell ä¸­çš„ if else åˆ¤æ–­ä»¥ if å¼€å§‹ï¼Œfi ç»“æŸï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${#&lt;/span>cids_arr[@]&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;1&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> filename&lt;span style="color:#f92672">=&lt;/span>av$aid.$title.mp4 &lt;span style="color:#75715e"># è§†é¢‘åªæœ‰1Pæ—¶ï¼Œä¸æ ‡æ³¨åˆ†P&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> filename&lt;span style="color:#f92672">=&lt;/span>av$aid.$titleã€P$episodeã€‘.mp4 &lt;span style="color:#75715e"># å¤šPè§†é¢‘æ ‡æ³¨åˆ†P&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ¤æ–­è§†é¢‘æ˜¯ DASH è¿˜æ˜¯ FLVï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>json_url&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/playurl?avid=&amp;#39;&lt;/span>$aid&lt;span style="color:#e6db74">&amp;#39;&amp;amp;cid=&amp;#39;&lt;/span>$cid&lt;span style="color:#e6db74">&amp;#39;&amp;amp;qn=116&amp;amp;fnver=0&amp;amp;fnval=16&amp;amp;otype=json&amp;amp;type=&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>json&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL $json_url&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dash&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq &lt;span style="color:#e6db74">&amp;#39;.data|has(&amp;#34;dash&amp;#34;)&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>durl&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq &lt;span style="color:#e6db74">&amp;#39;.data|has(&amp;#34;durl&amp;#34;)&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¤„ç† DASH è§†é¢‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$dash&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vp&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.dash.video[0].baseUrl&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span> &lt;span style="color:#75715e"># è§†é¢‘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ap&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.dash.audio[0].baseUrl&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span> &lt;span style="color:#75715e"># éŸ³é¢‘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>aria2c --args $vp --out ./v_$cid.m4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>aria2c --args $vp --out ./a_$cid.m4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ffmpeg -i ./v_$cid.m4s -i ./a_$cid.m4s -c:v copy -c:a copy ./$filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm *.m4s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¤„ç† FLV è§†é¢‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">elif&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$durl&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> flvs&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.durl[].url&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> flv in $flvs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;file &amp;#39;./&amp;#34;&lt;/span>$flvname&lt;span style="color:#e6db74">&amp;#34;&amp;#39;&amp;#34;&lt;/span> &amp;gt;./merge_$cid.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> flvname&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $flv | sed -e &lt;span style="color:#e6db74">&amp;#39;s/\?.*//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/.*\///g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aria2c --args $flv --out ./$flvname
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg -safe &lt;span style="color:#ae81ff">0&lt;/span> -f concat -i ./merge_$cid.txt -c copy ./$filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm *.flv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm ./merge_$cid.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ä½¿ç”¨-shift">ä½¿ç”¨ shift&lt;/h2>
&lt;p>shift å‘½ä»¤çš„ä½œç”¨æ˜¯å·¦ç§»å‚æ•°ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä¼ ç»™è„šæœ¬ 3 ä¸ªå‚æ•° a,b,cï¼Œè„šæœ¬æ¥æ”¶åˆ°çš„å‚æ•°ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo $1 $2 $3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>a b c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“æˆ‘ä»¬æ‰§è¡Œ shift å&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>shift
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo $1 $2 $3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>b c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·å°±å¯ä»¥åœ¨å¾ªç¯ä¸­ä¸€ç›´åªå¤„ç†$1ï¼Œç›´åˆ°æ‰€æœ‰å‚æ•°å·¦ç§»å®Œæ¯•ã€‚&lt;/p>
&lt;p>å…ˆåˆ¤æ–­æ²¡æœ‰å‚æ•°æ—¶é€€å‡ºè„šæœ¬ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> $# -eq &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Need AVID to download!\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åŠ ä¸Š shift å’Œå¾ªç¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">until&lt;/span> &lt;span style="color:#f92672">[&lt;/span> $# -eq &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $1 | sed -e &lt;span style="color:#e6db74">&amp;#39;s/.*av//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/[a-zA-Z?/].*//g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">#some code&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> shift
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="è®°å¾—åŠ ä¸Š-cookies">è®°å¾—åŠ ä¸Š Cookies&lt;/h2>
&lt;p>è¦è·å¾—é«˜æ¸…æºå¿…é¡»åœ¨è®¿é—® API æ—¶åŠ ä¸Š Cookiesï¼ŒcURL è¦åšåˆ°è¿™ç‚¹å¾ˆç®€å•ã€‚&lt;/p>
&lt;p>æµ‹è¯•å¾—çŸ¥åˆ¤æ–­çš„å…³é”®æ˜¯ Cookies çš„å¦‚ä¸‹é”®å€¼ï¼š
&lt;code>DedeUserID=; DedeUserID__ckMd5=; SESSDATA=; bili_jct=&lt;/code>&lt;/p>
&lt;p>F12 æ‰“å¼€æµè§ˆå™¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„é”®å€¼ï¼Œä¿å­˜æˆ Cookies çš„æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cookies&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>cat ./cookies&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -sL -H &lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>aria2c --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç &lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>IFS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">$&amp;#39;\n&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> $# -eq &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Need AVID to download!\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">until&lt;/span> &lt;span style="color:#f92672">[&lt;/span> $# -eq &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $1 | sed -e &lt;span style="color:#e6db74">&amp;#39;s/.*av//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/[a-zA-Z?/].*//g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cookies&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>cat ./cookies&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pagelist&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/pagelist?aid=&amp;#39;&lt;/span>$aid&lt;span style="color:#e6db74">&amp;#39;&amp;amp;jsonp=jsonp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Getting video list: \n&amp;#34;&lt;/span>$pagelist
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cids&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL -H &lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies $pagelist | jq -r &lt;span style="color:#e6db74">&amp;#39;.data[].cid&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL -H &lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/web-interface/view?aid=&amp;#39;&lt;/span>$aid | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.title&amp;#39;&lt;/span> | sed &lt;span style="color:#e6db74">&amp;#39;s/[/?!.*|:]//g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cids_arr&lt;span style="color:#f92672">=(&lt;/span>$cids&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Found video pages: &amp;#34;&lt;/span>&lt;span style="color:#e6db74">${#&lt;/span>cids_arr[@]&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> part&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> cid in $cids
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> episode&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$((&lt;/span> &lt;span style="color:#f92672">++&lt;/span>part &lt;span style="color:#66d9ef">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Download video page: &amp;#34;&lt;/span>$episode
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${#&lt;/span>cids_arr[@]&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;1&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> filename&lt;span style="color:#f92672">=&lt;/span>av$aid.$title.mp4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> filename&lt;span style="color:#f92672">=&lt;/span>av$aid.$titleã€P$episodeã€‘.mp4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> json_url&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/playurl?avid=&amp;#39;&lt;/span>$aid&lt;span style="color:#e6db74">&amp;#39;&amp;amp;cid=&amp;#39;&lt;/span>$cid&lt;span style="color:#e6db74">&amp;#39;&amp;amp;qn=116&amp;amp;fnver=0&amp;amp;fnval=16&amp;amp;otype=json&amp;amp;type=&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Getting video source: \n&amp;#34;&lt;/span>$json_url
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> json&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL -H &lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies $json_url&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dash&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq &lt;span style="color:#e6db74">&amp;#39;.data|has(&amp;#34;dash&amp;#34;)&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> durl&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq &lt;span style="color:#e6db74">&amp;#39;.data|has(&amp;#34;durl&amp;#34;)&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$dash&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vp&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.dash.video[0].baseUrl&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ap&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.dash.audio[0].baseUrl&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Downloading Video Dash&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aria2c -x10 -k1M --file-allocation&lt;span style="color:#f92672">=&lt;/span>none --auto-file-renaming&lt;span style="color:#f92672">=&lt;/span>false --allow-overwrite&lt;span style="color:#f92672">=&lt;/span>true $vp&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --show-console-readout false --quiet &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Accept: */*&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Referer: https://www.bilibili.com/video/av&amp;#34;&lt;/span>$aid&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Origin: https://www.bilibili.com&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;DNT: 1&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Connection: keep-alive&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Pragma: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cache-Control: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --out ./v_$cid.m4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Downloading Audio Dash&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aria2c -x10 -k1M --file-allocation&lt;span style="color:#f92672">=&lt;/span>none --auto-file-renaming&lt;span style="color:#f92672">=&lt;/span>false --allow-overwrite&lt;span style="color:#f92672">=&lt;/span>true $ap&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --show-console-readout false --quiet &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Accept: */*&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Referer: https://www.bilibili.com/video/av&amp;#34;&lt;/span>$aid&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Origin: https://www.bilibili.com&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;DNT: 1&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Connection: keep-alive&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Pragma: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cache-Control: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --out ./a_$cid.m4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Merge into file: &amp;#34;&lt;/span>$filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg -i ./v_$cid.m4s -i ./a_$cid.m4s -c:v copy -c:a copy&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -y -hide_banner -loglevel panic &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ./$filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Removing temp files\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm *.m4s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$durl&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> flvs&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | jq -r &lt;span style="color:#e6db74">&amp;#39;.data.durl[].url&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> flv in $flvs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> flvname&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $flv | sed -e &lt;span style="color:#e6db74">&amp;#39;s/\?.*//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/.*\///g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;file &amp;#39;./&amp;#34;&lt;/span>$flvname&lt;span style="color:#e6db74">&amp;#34;&amp;#39;&amp;#34;&lt;/span> &amp;gt;./merge_$cid.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Downloading Video Part: &amp;#34;&lt;/span>$flvname
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aria2c -x10 -k1M --file-allocation&lt;span style="color:#f92672">=&lt;/span>none --auto-file-renaming&lt;span style="color:#f92672">=&lt;/span>false --allow-overwrite&lt;span style="color:#f92672">=&lt;/span>true $flv&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --show-console-readout false --quiet &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Accept: */*&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Referer: https://www.bilibili.com/video/av&amp;#34;&lt;/span>$aid&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Origin: https://www.bilibili.com&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;DNT: 1&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Connection: keep-alive&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Pragma: no-cache&amp;#34;&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cache-Control: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --header&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --out ./$flvname
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Merge into file: &amp;#34;&lt;/span>$filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg -safe &lt;span style="color:#ae81ff">0&lt;/span> -f concat -i ./merge_$cid.txt -c copy&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -y -hide_banner -loglevel panic &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ./$filename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Removing temp files\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm *.flv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rm ./merge_$cid.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Error: Video not found!\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> shift
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>æ¸…æ™°åº¦é€‰æ‹©æˆ‘è§‰å¾—å°±çœŸçš„æ²¡å¿…è¦äº†å§.jpg&lt;/p>
&lt;p>ä½†æ˜¯ jq æ¯•ç«Ÿæ˜¯ä¸ªç¬¬ä¸‰æ–¹å·¥å…·ï¼Œéš¾é“çœŸçš„ä¸èƒ½ç”¨ awk/sed æ¥è§£æ json å—ï¼Ÿ&lt;/p>
&lt;p>å¯ä»¥ï¼Œä½†æ²¡å¿…è¦ã€‚&lt;/p>
&lt;p>ä½†ä»Šå¤©å°±å°è¯•ä¸€æ¬¡ï¼Œç”¨ awk å’Œ sed ç»„åˆï¼Œæ›¿æ¢æ‰ jq çš„å·¥ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è·å–cids&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cids&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL -H &lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies $pagelist | sed &lt;span style="color:#e6db74">&amp;#39;s/[{,}]/\n/g&amp;#39;&lt;/span> | awk -F: &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;cid&amp;#34;/ {print $2}&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è·å–è§†é¢‘æ ‡é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>title&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>curl -sL -H &lt;span style="color:#e6db74">&amp;#34;Cookie: &amp;#34;&lt;/span>$cookies &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/web-interface/view?aid=&amp;#39;&lt;/span>$aid | sed -e &lt;span style="color:#e6db74">&amp;#39;s/[{}]//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/,&amp;#34;/\n&amp;#34;/g&amp;#39;&lt;/span> | awk -F: &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;title&amp;#34;/ {print $2}&amp;#39;&lt;/span> | sed -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/[/?!.*|:]/-/g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ˜¯å¦æ˜¯DASH&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dash&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | sed -e &lt;span style="color:#e6db74">&amp;#39;s/[{}]//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/,&amp;#34;/\n&amp;#34;/g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;dash&amp;#34;/&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ˜¯å¦æ˜¯FLV&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>durl&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | sed -e &lt;span style="color:#e6db74">&amp;#39;s/[{}]//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/,&amp;#34;/\n&amp;#34;/g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;durl&amp;#34;/&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$dash&lt;span style="color:#e6db74">&amp;#34;&lt;/span> !&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># è§†é¢‘ DASH&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vp&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | sed -e &lt;span style="color:#e6db74">&amp;#39;s/[{}]//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/,&amp;#34;/\n&amp;#34;/g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\]//g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;video&amp;#34;/,/&amp;#34;audio&amp;#34;/&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;baseUrl&amp;#34;/&amp;#39;&lt;/span> | sed -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;baseUrl&amp;#34;://g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\u0026/\&amp;amp;/g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\\\\//g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;NR==1&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># éŸ³é¢‘ DASH&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ap&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | sed -e &lt;span style="color:#e6db74">&amp;#39;s/[{}]//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/,&amp;#34;/\n&amp;#34;/g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\]//g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;audio&amp;#34;/,/&amp;#34;&amp;#34;/&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;baseUrl&amp;#34;/&amp;#39;&lt;/span> | sed -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;baseUrl&amp;#34;://g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\u0026/\&amp;amp;/g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\\\\//g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;NR==1&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">elif&lt;/span> &lt;span style="color:#f92672">[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$durl&lt;span style="color:#e6db74">&amp;#34;&lt;/span> !&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># FLV è§†é¢‘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> flvs&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>echo $json | sed -e &lt;span style="color:#e6db74">&amp;#39;s/[{}]//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/,&amp;#34;/\n&amp;#34;/g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\]//g&amp;#39;&lt;/span> | awk &lt;span style="color:#e6db74">&amp;#39;/&amp;#34;url&amp;#34;/&amp;#39;&lt;/span> | sed -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;url&amp;#34;://g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/&amp;#34;//g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\u0026/\&amp;amp;/g&amp;#39;&lt;/span> -e &lt;span style="color:#e6db74">&amp;#39;s/\\\\//g&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;-&amp;gt;Error: Video not found!\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>é…ç½® Cmder æ•´åˆ Cygwin ä¸ Github</title><link>https://naizi.ch/2019/10/19/%E9%85%8D%E7%BD%AE-cmder-%E6%95%B4%E5%90%88-cygwin-%E4%B8%8E-github/</link><pubDate>Sat, 19 Oct 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/10/19/%E9%85%8D%E7%BD%AE-cmder-%E6%95%B4%E5%90%88-cygwin-%E4%B8%8E-github/</guid><description>&lt;p>è®°å½•ä¸‹æŠ˜è…¾ Cmder çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>è™½ç„¶ç¾¤å‹å®‰åˆ©äº†è®¸ä¹…çš„ WSL å’Œ Powershellï¼Œä½†å¯¹äºå‰ä¸¤è€…çš„ GUI æˆ‘å®åœ¨çœ‹ä¸ä¸‹å»ã€‚ä¹Ÿè®¸ä»–ä»¬çœŸçš„å¾ˆæ£’ï¼Œä½†å¥½ç”¨çš„å·¥å…·ä¼¼ä¹æ³¨å®šäº†ä¸èƒ½æ‹¥æœ‰å¥½çœ‹çš„ UIã€‚&lt;/p>
&lt;p>è€Œæˆ‘ï¼Œè¿˜æ˜¯å€¾å‘äº UI èˆ’æœçš„ã€‚æ¯•ç«Ÿåªè¦å®ƒçœŸçš„ä¸æ˜¯åŠŸèƒ½ä¸Šç¼ºèƒ³è†Šå°‘è…¿å„¿ï¼Œå‰©ä¸‹çš„äº‹æƒ…ï¼Œå¤§éƒ¨åˆ†éƒ½å¯ä»¥å…‹æœã€‚&lt;/p>
&lt;p>å†è¯´äº†ï¼Œä¸å¤šæŠ˜è…¾æŠ˜è…¾ï¼Œä¸å¤šè¸©å‡ ä¸ªå‘ï¼Œå¤š Google å’Œ Stackoverflow ä¸€ä¸‹ï¼Œä½ æ€ä¹ˆä¼šçŸ¥é“åŸæ¥ä¸–ç•Œä¸Šè¿˜èƒ½æœ‰è¿™ç§é—®é¢˜å‘¢.jpg&lt;/p>
&lt;h2 id="åˆå§‹åŒ–">åˆå§‹åŒ–&lt;/h2>
&lt;p>æˆ‘ä»¬å¯ä»¥ä»&lt;a class="link" href="https://cmder.net/" target="_blank" rel="noopener"
>Cmder çš„ä¸»é¡µ&lt;/a>ä¸‹è½½å®ƒçš„æœ€æ–°ç‰ˆï¼ˆå½“å‰æ˜¯ v1.3.12ï¼‰ã€‚ä¸ºäº†é¿å…ä¹‹åå’Œ Github ä»¥åŠ Cygwin é™„å¸¦çš„å‘½ä»¤å‡ºç°ä¸åŒç‰ˆæœ¬å¹¶å­˜çš„é—®é¢˜ï¼Œé€‰æ‹©&lt;code>Download Mini&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸‹è½½å®Œæ¯•åè§£å‹ï¼Œå…ˆæŠŠ Cmder æ·»åŠ åˆ°å³é”®èœå•ï¼Œæ–¹ä¾¿ä¹‹åéšæ—¶è°ƒç”¨ã€‚åœ¨è§£å‹ç›®å½•æ‰“å¼€ä¸€ä¸ªç®¡ç†å‘˜æƒé™çš„ Powershellï¼š&lt;/p>
&lt;blockquote>
&lt;p>Cmder.exe /REGISTER ALL&lt;/p>
&lt;/blockquote>
&lt;p>æ¥ä¸‹æ¥å…ˆæ”¾ç€ Cmder ä¸ç®¡ï¼Œç»§ç»­è£… Git for windowsã€‚&lt;/p>
&lt;p>ä»&lt;a class="link" href="https://gitforwindows.org/" target="_blank" rel="noopener"
>Git for windows çš„ä¸»é¡µ&lt;/a>ä¸‹è½½æœ€æ–°ç‰ˆï¼Œå®‰è£…åŸºæœ¬éƒ½æ˜¯é»˜è®¤é€‰é¡¹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>Adjusting your PATH enviroment&lt;/code>é€‰æ‹©&lt;code>Use Git from the Windows Command Prompt&lt;/code>&lt;/li>
&lt;li>&lt;code>Configuring the line ending conversions&lt;/code>é€‰æ‹©&lt;code>Checkout Windows-style, commit Unix-style line endings&lt;/code>&lt;/li>
&lt;li>&lt;code>Configuing the terminal emulator to use with Git Bash&lt;/code>é€‰æ‹©&lt;code>Use MinTTY&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>é¢å¤–é€‰é¡¹å¯ä»¥é»˜è®¤ä¹Ÿå¯ä»¥ä¸é€‰ï¼Œå®‰è£…å®Œæˆååœ¨ä»»æ„ç›®å½•å³é”®ï¼Œåº”è¯¥èƒ½çœ‹è§&lt;code>Git Bash Here&lt;/code>å’Œ&lt;code>Git GUI Here&lt;/code>çš„é€‰é¡¹ã€‚&lt;/p>
&lt;p>æ¥ç€ç»§ç»­ï¼Œå®‰è£… Cygwinã€‚&lt;/p>
&lt;p>åœ¨&lt;a class="link" href="https://www.cygwin.com/" target="_blank" rel="noopener"
>Cygwin å®˜ç½‘&lt;/a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼ˆ64-bit/32-bitï¼‰ï¼ŒåŒå‡»æ‰§è¡Œï¼Œé»˜è®¤é€‰é¡¹å³å¯ã€‚&lt;/p>
&lt;p>åœ¨&lt;code>Choose A Download Site&lt;/code>è¿™æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ &lt;a class="link" href="https://mirror.tuna.tsinghua.edu.cn/help/cygwin/" target="_blank" rel="noopener"
>æ¸…åå¤§å­¦çš„é•œåƒæº&lt;/a>&lt;code>https://mirrors.tuna.tsinghua.edu.cn/cygwin/&lt;/code>æ¥æå‡è½¯ä»¶åŒ…çš„ä¸‹è½½é€Ÿåº¦ï¼Œç„¶åç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚&lt;/p>
&lt;p>åœ¨ Search ä¸­æœç´¢ wgetï¼Œä¸‹æ‹‰èœå•å°† Skip æ›¿æ¢æˆå…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬å®‰è£…ï¼Œè¿™æ˜¯ä¹‹åå®‰è£… apt-cyg éœ€è¦çš„ä¾èµ–ã€‚å¦å¤–æ£€æŸ¥ gwakã€tarã€bzip2 è¿™å‡ ä¸ªåŒ…æ˜¯å¦å®‰è£…ï¼ˆä¸æ˜¯ Skip å°±å¯¹äº†ï¼‰ã€‚&lt;/p>
&lt;p>æœ‰éœ€è¦çš„è¯å¯ä»¥è‡ªå·±é€‰æ‹©è¿˜è¦å®‰è£…å“ªäº›å‘½ä»¤ï¼Œä¸è¿‡è¿™äº›éƒ½å¯ä»¥ä¹‹åå†æ”¹ï¼Œå…ˆæ¥ç€ç»§ç»­ä¸‹ä¸€æ­¥é»˜è®¤å®‰è£…å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;h2 id="æŠ˜è…¾">æŠ˜è…¾&lt;/h2>
&lt;p>ç°åœ¨æˆ‘ä»¬æœ‰äº† Cmder+Github+Cygwinï¼Œæ¥ä¸‹æ¥æŠŠä»–ä»¬æ•´ä¸€èµ·ã€‚&lt;/p>
&lt;p>git æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œé€‰æ‹©&lt;code>ç³»ç»Ÿå’Œå®‰å…¨&lt;/code>-&amp;gt;&lt;code>ç³»ç»Ÿ&lt;/code>-&amp;gt;&lt;code>é«˜çº§ç³»ç»Ÿè®¾ç½®&lt;/code>-&amp;gt;&lt;code>ç¯å¢ƒå˜é‡&lt;/code>ï¼Œåœ¨&lt;code>ç”¨æˆ·å˜é‡&lt;/code>é‡Œé€‰æ‹©&lt;code>Path&lt;/code>-&amp;gt;&lt;code>ç¼–è¾‘&lt;/code>ï¼Œå¦‚æœæ˜¯é»˜è®¤å®‰è£…çš„è¯ï¼Œåº”è¯¥ä¼šæœ‰ä¸€æ¡&lt;code>C:\Program Files\Git\usr\bin&lt;/code>çš„è®°å½•ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ‰‹åŠ¨æ·»åŠ ã€‚&lt;/p>
&lt;p>ç„¶åæ‰“å¼€ Cmderï¼Œè¾“å…¥ git å¹¶å›è½¦ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿè°ƒç”¨ gitã€‚&lt;/p>
&lt;p>Cygwin æŒ‰ç…§åŒæ ·çš„æ–¹å¼åŠ å…¥ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œé»˜è®¤è·¯å¾„æ˜¯&lt;code>C:\cygwin64\bin&lt;/code>ï¼Œå¦‚æœä¿®æ”¹äº†å®‰è£…è·¯å¾„éœ€è¦å¯¹åº”ä¿®æ”¹ã€‚&lt;/p>
&lt;p>æ¥ç€å®‰è£… apt-cygï¼Œæœ‰äº†å®ƒå°±å¯ä»¥åƒ Ubuntu ç®¡ç†è½¯ä»¶åŒ…ä¸€æ ·éšæ„ install éœ€è¦çš„å‘½ä»¤äº†ã€‚&lt;/p>
&lt;p>apt-cyg çš„é¡¹ç›®ä¸»é¡µæ˜¯ &lt;a class="link" href="https://github.com/transcode-open/apt-cyg" target="_blank" rel="noopener"
>https://github.com/transcode-open/apt-cyg&lt;/a> ï¼Œåœ¨ Release é¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆï¼Œè§£å‹å°†&lt;code>apt-cyg&lt;/code>æ–‡ä»¶ç§»åŠ¨åˆ°&lt;code>C:\cygwin64\bin&lt;/code>ï¼Œæ‰“å¼€ cygwin ç»ˆç«¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>apt-cyg install nano&lt;/p>
&lt;/blockquote>
&lt;p>æµ‹è¯• apt-cyg æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³ä¸­æ–‡ç¼–ç é—®é¢˜ï¼Œåœ¨ Cygwin ç»ˆç«¯çª—å£å³é”®é€‰æ‹©&lt;code>Options&lt;/code>ï¼Œé€‰æ‹©&lt;code>Text&lt;/code>ï¼Œæ›´æ”¹&lt;code>locale&lt;/code>ä¸º&lt;code>zh_CN&lt;/code>ï¼Œ&lt;code>Character set&lt;/code>ä¸º&lt;code>UTF-8&lt;/code>ã€‚&lt;/p>
&lt;p>ç„¶å nano æˆ–è€… vi ç¼–è¾‘&lt;code>~/.bashrc&lt;/code>æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ€åæ·»åŠ ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-~/.bashrc" data-lang="~/.bashrc">&lt;span style="display:flex;">&lt;span>export LC_ALL&lt;span style="color:#f92672">=&lt;/span>zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LC_CTYPE&lt;span style="color:#f92672">=&lt;/span>zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export LANG&lt;span style="color:#f92672">=&lt;/span>zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ºäº† Cygwin å’Œ Cmder æ•´åˆåï¼Œèƒ½å¤Ÿè¯†åˆ«å½“å‰å·¥ä½œç›®å½•ï¼Œé€šè¿‡ apt-cyg å®‰è£… chere å‘½ä»¤ï¼š&lt;/p>
&lt;blockquote>
&lt;p>apt-cyg install chere&lt;/p>
&lt;/blockquote>
&lt;p>ç„¶åè¿˜æ˜¯ç¼–è¾‘&lt;code>~/.bashrc&lt;/code>ï¼Œè¿½åŠ å†…å®¹ï¼š[å‚è€ƒ 1]&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-~/.bashrc" data-lang="~/.bashrc">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> -n &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>ConEmuWorkDir&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cd &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$ConEmuWorkDir&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Cygwin ä¸­ C ç›˜çš„è·¯å¾„æ˜ å°„ä¸º&lt;code>/cygdrive/c&lt;/code>ï¼Œå¦‚æœè§‰å¾—å¤ªé•¿çš„è¯ï¼Œå¯ä»¥åœ¨ cygwin ç»ˆç«¯é‡Œä¿®æ”¹&lt;code>/etc/fstab&lt;/code>æˆ–è€…ç›´æ¥ä¿®æ”¹&lt;code>C:\cygwin64\etc\fstab&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-/etc/fstab" data-lang="/etc/fstab"># /etc/fstab
#
# This file is read once by the first process in a Cygwin process tree.
# To pick up changes, restart all Cygwin processes. For a description
# see https://cygwin.com/cygwin-ug-net/using.html#mount-table
# This is default anyway:
# none /cygdrive cygdrive binary,posix=0,user 0 0
none / cygdrive binary 0 0
&lt;/code>&lt;/pre>&lt;p>ä¹‹å C ç›˜æ˜ å°„åˆ°&lt;code>/c&lt;/code>ï¼ŒD ç›˜æ˜ å°„åˆ°&lt;code>/d&lt;/code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p>
&lt;p>ä»¥ä¸Šè®¾ç½®å®Œå¯ä»¥ç®—æ˜¯å‘Šä¸€æ®µè½äº†ï¼Œæ¥ç€æŠŠ Cygwin æ•´è¿› Cmder é‡Œã€‚&lt;/p>
&lt;p>æ‰“å¼€ Cmderï¼Œå³é”®é€‰æ‹©&lt;code>Settings&lt;/code>ï¼Œé€‰æ‹©&lt;code>Startup&lt;/code>-&amp;gt;&lt;code>Tasks&lt;/code>ã€‚&lt;/p>
&lt;p>ç‚¹å‡»&amp;rsquo;+&amp;lsquo;å·æ·»åŠ æ–°çš„ Taskï¼Œ&lt;code>Task Name&lt;/code>å¡«ä¸€ä¸ªèƒ½åŒºåˆ†å‡ºæ˜¯ Cygwin çš„ï¼Œæ¯”å¦‚&lt;code>Cygwin::bash&lt;/code>ï¼Œ&lt;code>Task parameters&lt;/code>å¡«å†™&lt;code>/icon C:\cygwin64\Cygwin-Terminal.ico&lt;/code>ï¼Œåœ¨&lt;code>Commands&lt;/code>ä¸­å¡«å†™&lt;code>set CHERE_INVOKING=1 &amp;amp; C:\cygwin64\Cygwin.bat -c &amp;quot;/bin/xhere /bin/bash.exe --login -i '%V'&amp;quot;&lt;/code>&lt;a class="link" href="https://github.com/cmderdev/cmder/wiki/Integrating-Cygwin" title="Integrating Cygwin"
target="_blank" rel="noopener"
>å‚è€ƒ 2&lt;/a>&lt;/p>
&lt;p>ç„¶åå‹¾é€‰ä¸Š&lt;code>Default task for new console&lt;/code>å’Œ&lt;code>Taskbar jump lists&lt;/code>ã€‚å›åˆ°&lt;code>Startup&lt;/code>ï¼Œé€‰æ‹©&lt;code>Specified named task&lt;/code>-&amp;gt;&lt;code>Cygwin::bash&lt;/code>ã€‚&lt;/p>
&lt;p>è¿™æ ·ä¸€æ¥ Cmder çš„é»˜è®¤ç»ˆç«¯å°±æ˜¯ Cygwin äº†ï¼Œgit å‘½ä»¤å’Œ windows æœ¬èº«çš„æ”¯æŒä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚&lt;/p>
&lt;h2 id="è¿›ä¸€æ­¥è°ƒæ•´">è¿›ä¸€æ­¥è°ƒæ•´&lt;/h2>
&lt;h3 id="general-fonts">&lt;code>General&lt;/code>-&amp;gt;&lt;code>Fonts&lt;/code>&lt;/h3>
&lt;p>å…ˆè§£å†³ç¼–ç é—®é¢˜ï¼Œé€‰æ‹©&lt;code>General&lt;/code>-&amp;gt;&lt;code>Fonts&lt;/code>-&amp;gt;&lt;code>Unicode ranges&lt;/code>-&amp;gt;&lt;code>CJK: 2E80-9FC3;AC00-D7A3;F900-FAFF;FE30-FE4F;FF01-FF60;FFE0-FFE6;&lt;/code>-&amp;gt;&lt;code>Apply&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>Font charset&lt;/code>è¿˜æ˜¯ä¿æŒ ANSIï¼Œå¦åˆ™ Cmder ä¼šæŠ¥é”™&lt;code>Failed to create font&lt;/code>ç„¶å fail back å›ç¼ºçœå­—ä½“ã€‚&lt;/p>
&lt;p>ç„¶åé€‰æ‹©&lt;code>Startup&lt;/code>-&amp;gt;&lt;code>Environment&lt;/code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>set PATH&lt;span style="color:#f92672">=&lt;/span>%ConEmuBaseDir%&lt;span style="color:#ae81ff">\S&lt;/span>cripts;%PATH%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set LANG&lt;span style="color:#f92672">=&lt;/span>zh_CN.UTF8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ç€æ˜¯å­—ä½“ï¼Œä¸­æ–‡å­—ä½“çœŸçš„å¤ªå°‘äº†ï¼Œå¥½çœ‹çš„å°±æ›´å°‘äº†ã€‚ï¼ˆæœ‰ä¸€è¯´ä¸€ï¼Œæˆ‘è§‰å¾—ï¼Œç¡®å®ï¼Œæ˜¯è¿™æ ·çš„ï¼‰&lt;/p>
&lt;p>é€‰äº† Powerline Fontsï¼š&lt;/p>
&lt;blockquote>
&lt;p>git clone &lt;a class="link" href="https://github.com/powerline/fonts.git" target="_blank" rel="noopener"
>https://github.com/powerline/fonts.git&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘å•ç‹¬è£…äº†&lt;code>Noto Mono for Powerline&lt;/code>ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ‰§è¡Œ&lt;code>install.ps1&lt;/code>ç›´æ¥å®‰è£…å…¨éƒ¨çš„å­—ä½“ã€‚&lt;/p>
&lt;p>åœ¨&lt;code>Main console font&lt;/code>é€‰äº†&lt;code>Noto Mono for Powerline&lt;/code>åï¼Œä¸­æ–‡è¿˜æ˜¯ä¼š fail back æˆå®‹ä½“ï¼Œè¿™é‡Œå‹¾ä¸Š&lt;code>Alternative font&lt;/code>ï¼Œé€‰æ‹©&lt;code>å¾®è½¯é›…é»‘ Light&lt;/code>ï¼Œä¸ªäººæ„Ÿè§‰ä¸è¿å’Œï¼Œèƒ½çœ‹ã€‚&lt;/p>
&lt;p>å…¶ä»–å‹¾é€‰ä¸Š&lt;code>Monospace&lt;/code>å’Œ&lt;code>Compress long strings to fit space&lt;/code>ã€‚&lt;/p>
&lt;h3 id="general-size--pos">&lt;code>General&lt;/code>-&amp;gt;&lt;code>Size &amp;amp; Pos&lt;/code>&lt;/h3>
&lt;p>å°†&lt;code>Width&lt;/code>æ”¹ä¸º 80%ï¼Œ&lt;code>Height&lt;/code>æ”¹ä¸º 70%ï¼Œè¿™æ · Cmder å¯åŠ¨ä¼šè‡ªåŠ¨æ ¹æ®æ˜¾ç¤ºå™¨å¤§å°è°ƒæ•´çª—å£å¤§å°ã€‚&lt;/p>
&lt;h3 id="general-background">&lt;code>General&lt;/code>-&amp;gt;&lt;code>Background&lt;/code>&lt;/h3>
&lt;p>è®¾ç½®&lt;code>Background Image&lt;/code>å’Œ&lt;code>Darkening&lt;/code>å¯ä»¥ç»™ç»ˆç«¯æ·»åŠ å›¾ç‰‡èƒŒæ™¯å¹¶è°ƒæ•´å›¾ç‰‡é€æ˜åº¦ï¼Œæˆ‘å°±æ•¬è°¢ä¸æ•äº†ã€‚&lt;/p>
&lt;h3 id="general-confirm">&lt;code>General&lt;/code>-&amp;gt;&lt;code>Confirm&lt;/code>&lt;/h3>
&lt;p>å»é™¤&lt;code>Confirm creating new console/tab&lt;/code>å’Œ&lt;code>Confirm tab duplicating&lt;/code>çš„å‹¾é€‰ï¼Œè¿™ä¸¤ä¸ªå¤ªçƒ¦äººäº†ã€‚&lt;/p>
&lt;h3 id="features-transparency">&lt;code>Features&lt;/code>-&amp;gt;&lt;code>Transparency&lt;/code>&lt;/h3>
&lt;p>&lt;code>Alpha transparency&lt;/code>å¯ä»¥è°ƒæ•´ç»ˆç«¯çª—å£æœ¬èº«çš„é€æ˜åº¦ï¼Œæˆ‘è¿™é‡Œç›´æ¥æ‹–åˆ°äº†æœ€å³è¾¹ä¸é€æ˜ã€‚å±¡æ¬¡æˆªå›¾ç»ˆç«¯æ˜ å‡ºäº†èƒŒåçš„å†…å®¹æ€»æ˜¯è®©æˆ‘å¿ƒæœ‰ä½™æ‚¸ã€‚&lt;/p>
&lt;h3 id="keys--macro-paste">&lt;code>Keys &amp;amp; Macro&lt;/code>-&amp;gt;&lt;code>Paste&lt;/code>&lt;/h3>
&lt;p>ç¡®ä¿ä¸¤ä¸ª&lt;code>Paste mode&lt;/code>éƒ½æ˜¯&lt;code>Multi lines&lt;/code>ï¼Œé¿å…è¡Œä¸ºä¸ä¸€è‡´ã€‚&lt;/p>
&lt;h2 id="å…¶ä»–">å…¶ä»–&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Cmder æœ‰è‡ªå·±çš„&lt;code>user_alias&lt;/code>(&amp;ldquo;Cmder/config/user_alias.cmd&amp;rdquo;) å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¾å®šä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œå¯ä»¥åœ¨ cmd æˆ–è€… powershell ç»ˆç«¯é‡Œä½¿ç”¨ï¼Œä½†æ˜¯ä¸èƒ½å’Œ Cygwin é€šç”¨ã€‚Cygwin éœ€è¦ Alias çš„è¯è¿˜æ˜¯å¾—è€è€å®å®ç¼–è¾‘&lt;code>~/.bashrc&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Cmder å¯ä»¥ä½œä¸º Sublime Text çš„ç»ˆç«¯æ¥ä½¿ç”¨ï¼ŒSublime å®‰è£… Terminal æ’ä»¶ï¼Œè®¾ç½®ç»ˆç«¯è·¯å¾„ä¸º Cmder å®‰è£…è·¯å¾„å³å¯ã€‚é»˜è®¤å‘¼å‡ºç»ˆç«¯çš„å¿«æ·é”®æ˜¯ Ctrl+Shift+Tã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Cygwin æœ‰ä¸ªå·²çŸ¥é—®é¢˜ï¼ŒCtrl+æ–¹å‘é”®æ²¡æœ‰ç»‘å®šæ“ä½œï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼Œæ–¹æ³•æ˜¯ç¼–è¾‘&lt;code>~/.inputrc&lt;/code>æ·»åŠ ä¸¤è¡Œå†…å®¹&lt;code>&amp;quot;\e[1;5C&amp;quot;: forward-word&lt;/code>å’Œ&lt;code>&amp;quot;\e[1;5D&amp;quot;: backward-word&lt;/code>ã€‚[å‚è€ƒ 3]&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœä¹‹å‰å·²ç»ç”Ÿæˆäº† SSH KEY çš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨å¤åˆ¶åˆ°&lt;code>C:\cygwin64\home\&amp;lt;user name&amp;gt;\.ssh&lt;/code>æˆ–è€…ç›´æ¥æŒ‡å®š ssh key æ‰èƒ½è®© git è¯†åˆ«åˆ°ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="eof">EOF&lt;/h2></description></item><item><title>jojoï¼Œpython çš„èƒ½åŠ›æ˜¯æœ‰æé™çš„</title><link>https://naizi.ch/2019/10/18/jojopython-%E7%9A%84%E8%83%BD%E5%8A%9B%E6%98%AF%E6%9C%89%E6%9E%81%E9%99%90%E7%9A%84/</link><pubDate>Fri, 18 Oct 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/10/18/jojopython-%E7%9A%84%E8%83%BD%E5%8A%9B%E6%98%AF%E6%9C%89%E6%9E%81%E9%99%90%E7%9A%84/</guid><description>&lt;p>&amp;ndash;&amp;gt; jojoï¼Œpython çš„èƒ½åŠ›æ˜¯æœ‰æé™çš„ã€‚&lt;/p>
&lt;p>&amp;ndash;&amp;gt; æˆ‘ä»çŸ­æš‚çš„äººç”Ÿå½“ä¸­å­¦åˆ°ä¸€ä»¶äº‹&amp;hellip;&amp;hellip;&lt;/p>
&lt;p>&amp;ndash;&amp;gt; è¶Šæ˜¯ç©å¼„ä»£ç ï¼Œå°±è¶Šä¼šå‘ç° python çš„ä¸è¶³&amp;hellip;&amp;hellip;&lt;/p>
&lt;p>&amp;ndash;&amp;gt; é™¤éè¶…è¶Š pythonã€‚&lt;/p>
&lt;p>ä½ åˆ°åº•æƒ³è¯´ä»€ä¹ˆï¼Ÿ&lt;/p>
&lt;p>&amp;ndash;&amp;gt; å”æˆ‘ bash å•¦ï¼&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="èµ·å› ">èµ·å› &lt;/h2>
&lt;p>åŸå› å…¶å®å¾ˆç®€å•ï¼Œå·¥ä½œä¸Šéœ€è¦ä½¿ç”¨åå°å¯¼å…¥äº›æ•°æ®ã€‚&lt;/p>
&lt;p>å­å“§å­å“§æŠŠåŸå§‹æ•°æ®æ•´ç†å®Œï¼Œææˆ csv äº†ï¼Œç‚¹ä¸ªâ€œå¯¼å…¥â€ï¼Œç»™æˆ‘æ¥äº†ä¸ªæŠ¥é”™ï¼š&lt;/p>
&lt;ul>
&lt;li>å•æ¬¡å¯¼å…¥åªæ”¯æŒ 1000 æ¡&lt;/li>
&lt;/ul>
&lt;p>å´½å•Šï¼Œ9102 å¹´æœ«äº†ï¼Œæˆ‘ csv é‡Œé¢è¿‘ç™¾ä¸‡æ¡æ•°æ®ï¼Œä½ è·Ÿæˆ‘è¯´ä¸€æ¬¡ 1000ï¼Ÿæˆ‘ä¸ä¸‹ç­å•¦ï¼Ÿ&lt;/p>
&lt;p>ç„¶è€Œä¼˜ç§€çš„åº•å±‚å‘˜å·¥æ˜¯ä¸ä¼šæŠ±æ€¨è¿™äº›äº‹æƒ…çš„ï¼Œè¡Œå§ï¼Œæˆ‘è‡ªå·±åˆ‡è¡¨æ€»è¡Œäº†å§ã€‚&lt;/p>
&lt;h2 id="å°è¯•-python-åˆ‡å‰²">å°è¯• python åˆ‡å‰²&lt;/h2>
&lt;p>å…ˆç”¨ python çç³Šäº†ä¸€ä¸ªï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>datas &lt;span style="color:#f92672">=&lt;/span> {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> n, line &lt;span style="color:#f92672">in&lt;/span> enumerate(open(&lt;span style="color:#e6db74">&amp;#39;test.csv&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> datas&lt;span style="color:#f92672">.&lt;/span>get(n&lt;span style="color:#f92672">//&lt;/span>&lt;span style="color:#ae81ff">1000&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> datas[n&lt;span style="color:#f92672">//&lt;/span>&lt;span style="color:#ae81ff">1000&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> datas[n&lt;span style="color:#f92672">//&lt;/span>&lt;span style="color:#ae81ff">1000&lt;/span>] &lt;span style="color:#f92672">+&lt;/span> [line]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> datas[n&lt;span style="color:#f92672">//&lt;/span>&lt;span style="color:#ae81ff">1000&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> [line]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> k,v &lt;span style="color:#f92672">in&lt;/span> datas&lt;span style="color:#f92672">.&lt;/span>items():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;test-&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.csv&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(k), &lt;span style="color:#e6db74">&amp;#39;w&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>join(v))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‡‘åˆç€ç”¨äº†ï¼Œé¡ºä¾¿å†å†™äº†ä¸ªè„šæœ¬æŠŠåˆ‡å¥½çš„æ–‡ä»¶è‡ªåŠ¨å¯¼å…¥åˆ°åå°ï¼ŒæŠŠå·¥ä½œåšå®Œäº†ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å›è¿‡å¤´äº†ï¼Œå°±å¼€å§‹å«Œå¼ƒ python ä¸å¤Ÿå¿«äº†ã€‚&lt;/p>
&lt;p>è™½ç„¶å¾ˆæ˜æ˜¾åŸå› åœ¨äºæˆ‘ï¼ˆæ¯•ç«Ÿçç³Šå‡‘åˆç”¨ï¼‰ï¼Œæƒ³çœ‹èƒ½ä¸èƒ½æ›´å¿«ä¸€ç‚¹ã€‚&lt;/p>
&lt;p>äºæ˜¯æƒ³èµ·äº† bashï¼Œæƒ³èµ·äº† split å’Œ xargsã€‚&lt;/p>
&lt;h2 id="æ¢æˆ-bash">æ¢æˆ bash&lt;/h2>
&lt;p>è¦åˆ‡å‰²æ–‡ä»¶çš„è¯ split çš„ç¡®å¾ˆæ–¹ä¾¿ï¼š&lt;/p>
&lt;blockquote>
&lt;p>split test.csv -l 1000 -d -a 3 test__&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>-d -a 3&lt;/code>æŒ‡å®šäº†æŒ‰ 3 ä½æ•°é€’å¢æ·»åŠ åç¼€ï¼Œè¿™æ ·å°±èƒ½äº§ç”Ÿ test&lt;strong>001 ~ test&lt;/strong>999 å‘½åçš„åˆ‡å‰²å¥½çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ä½†æ–°çš„é—®é¢˜ä¹Ÿæ¥äº†ï¼Œåˆ‡å‰²å®Œéœ€è¦å…¨éƒ¨åŠ ä¸Šæ–‡ä»¶æ‰©å±•åï¼š&lt;/p>
&lt;blockquote>
&lt;p>mv test_&lt;em>001 test&lt;/em>-001.csv&lt;/p>
&lt;/blockquote>
&lt;p>ä½†æ‰‹å·¥æ“ä½œé‡è¿˜æ˜¯å¤ªå¤§ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ xargs äº†ï¼š&lt;/p>
&lt;blockquote>
&lt;p>ls | grep test__ | xargs -n1 -I file mv file file.csv&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>ls | grep test__&lt;/code>ç­›é€‰äº†æ‰€æœ‰ç¼ºå°‘æ‰©å±•åçš„æ–‡ä»¶ï¼Œç®¡é“å‘½ä»¤ä¼ ç»™ xargs åï¼Œ&lt;code>-n1&lt;/code>ä»£è¡¨ä¸€æ¬¡æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>-I file&lt;/code>å‘Šè¯‰ xargs åç»­å‘½ä»¤ä¸­çš„&lt;code>file&lt;/code>å…¨éƒ¨ç”¨å‚æ•°å€¼æ›¿æ¢ã€‚&lt;/p>
&lt;p>æ¯”å¦‚åªæœ‰ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œ&lt;code>ls | grep test__&lt;/code>åªæœ‰ä¸€ä¸ªç»“æœ&lt;code>test__001&lt;/code>ï¼Œxargs æ¥æ”¶åˆ°å‚æ•°ï¼Œå°†&lt;code>file&lt;/code>æ›¿æ¢æˆ&lt;code>test__001&lt;/code>ï¼Œå®é™…æ‰§è¡Œå†…å®¹å°±æ˜¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>mv test&lt;strong>001 test&lt;/strong>001.csv&lt;/p>
&lt;/blockquote>
&lt;p>å°†ä»–ä»¬ç»„åˆä¸€ä¸‹ï¼š&lt;/p>
&lt;blockquote>
&lt;p>split -l 1000 test.csv -d -a 3 test**&amp;amp;&amp;amp; ls | grep test** | xargs -n1 -I file mv file file.csv&lt;/p>
&lt;/blockquote>
&lt;p>å›è½¦æ‰§è¡Œï¼Œ1 ç§’éƒ½ä¸éœ€è¦ï¼Œçˆ½æ­»äº†ã€‚&lt;/p>
&lt;h2 id="äººç±»æ˜¯æ‡’æƒ°çš„åŠ¨ç‰©">äººç±»æ˜¯æ‡’æƒ°çš„åŠ¨ç‰©&lt;/h2>
&lt;p>ä½†è¿™æ ·è¿˜æ˜¯éœ€è¦è‡ªå·±æ‰‹æ‰“éœ€è¦åˆ‡å‰²çš„æ–‡ä»¶åï¼Œä¸å¤Ÿçˆ½ã€‚å°è¯•æŠŠä»£ç å†å˜é•¿ä¸€ç‚¹ï¼š&lt;/p>
&lt;blockquote>
&lt;p>ls | grep .csv$ | sed &amp;rsquo;s/.csv//g&amp;rsquo; | xargs -n1 -I file split -l 1000 file.csv -d -a 3 file**&amp;amp;&amp;amp; ls | grep** | xargs -n1 -I file mv file file.csv&lt;/p>
&lt;/blockquote>
&lt;p>ä»¥ç®¡é“å‘½ä»¤åˆ†å‰²è§£é‡Šä¸€ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;code>ls&lt;/code> åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•&lt;/li>
&lt;li>&lt;code>grep .csv$&lt;/code> ç­›é€‰æ‰©å±•åæ˜¯ csv çš„æ‰€æœ‰æ–‡ä»¶&lt;/li>
&lt;li>&lt;code>sed 's/.csv//g'&lt;/code> å»é™¤æ‰©å±•åï¼Œåªç•™æ–‡ä»¶å&lt;/li>
&lt;li>&lt;code>xargs -n1 -I file split -l 1000 file.csv -d -a 3 file__&lt;/code> åˆ‡å‰²æ‰€æœ‰çš„æ–‡ä»¶&lt;/li>
&lt;li>&lt;code>ls&lt;/code> åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•&lt;/li>
&lt;li>&lt;code>grep __&lt;/code> ç­›é€‰æ–‡ä»¶ååŒ…å«&lt;code>__&lt;/code>çš„æ–‡ä»¶ï¼ˆä¸Šä¸€æ­¥åˆ‡å‰²å¥½çš„æ–‡ä»¶ï¼‰&lt;/li>
&lt;li>&lt;code>xargs -n1 -I file mv file file.csv&lt;/code> åŠ ä¸Šæ‰©å±•å&lt;/li>
&lt;/ol>
&lt;p>çˆ½åˆæ­»äº†ã€‚&lt;/p>
&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>å°è¯•åœ¨ windows ä¸Šï¼ˆCmder+Githubï¼‰åšç±»ä¼¼çš„æ“ä½œï¼Œå‘ç°è¿œæ²¡æœ‰åœ¨è™šæ‹Ÿæœºï¼ˆUbuntuï¼‰é‡Œæ‰§è¡Œå¿«ï¼Œåƒåœ¾å¾®è½¯.jpg&lt;/p></description></item><item><title>RSS å’•å’•æœº</title><link>https://naizi.ch/2019/10/02/rss-%E5%92%95%E5%92%95%E6%9C%BA/</link><pubDate>Wed, 02 Oct 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/10/02/rss-%E5%92%95%E5%92%95%E6%9C%BA/</guid><description>&lt;p>ä¹‹å‰ä»åŒäº‹é‚£é‡ŒäºŒæ‰‹ä¹°äº†ä¸ªå’•å’•æœºï¼Œå½“ç©å…·ç©ã€‚äº«å—äº†å‡ å¤©ä½¿ç”¨ APP æ‰“å°å„ç§æ²™é›•ç…§ç‰‡å’Œè¡¨æƒ…åŒ…å¸¦æ¥çš„ä¹è¶£åï¼Œå®ƒæ¯«æ— æ„å¤–çš„å¼€å§‹åƒç°ï¼Œå°±å’Œæ¡Œå­æ—è¾¹çš„æ ‘è“æ´¾ä¸€æ ·æŸ“ä¸Šå†å²çš„é¢œè‰²ã€‚&lt;/p>
&lt;p>è¿˜æ˜¯æ‹¿å‡ºæ¥ç”¨ç”¨å§â€¦â€¦&lt;/p>
&lt;p>å’•å’•æœº APP é‡Œçš„ä¸€éƒ¨åˆ†è®¢é˜…å·çš„ç¡®æœ‰ç‚¹æ„æ€ï¼Œæ¯”å¦‚è®¢é˜…æ¯å¤©å¤©æ°”ï¼Œæ—©ä¸Š 8 ç‚¹è‡ªåŠ¨æ‰“å°ä¸€æ¡å¤©æ°”å†…å®¹ä¹‹ç±»çš„ã€‚é‚£ä¹ˆæ‹¿æ¥è®¢é˜…å¾®åšæ›´æ–°å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆä¸å¯¹çš„ã€‚&lt;/p>
&lt;p>åæ­£ä¸€å¤©æœ‰ 12 å°æ—¶åœ¨å…¬å¸ï¼Œé—²ç€ä¹Ÿæ˜¯é—²ç€ï¼Œä¸å®šæ—¶çš„æ¥ä¸€æ®µå°çº¸æ¡ä¹Ÿä¸é”™ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="å¼€å‘è€…ç”³è¯·">å¼€å‘è€…ç”³è¯·&lt;/h2>
&lt;p>ä¸ºäº†åšåˆ°è¿™äº›ï¼Œé¦–å…ˆè¦å»å’•å’•æœºçš„&lt;a class="link" href="http://open.memobird.cn" target="_blank" rel="noopener"
>å¼€å‘è€…é¡µé¢&lt;/a>ç”³è¯· APPKEYã€‚å¡«å†™å¿…è¦çš„ä¿¡æ¯ç„¶åæäº¤ç”³è¯·å°±è¡Œäº†ã€‚ç­‰äº†ä¸€å‘¨å·¦å³ç”³è¯·å°±é€šè¿‡äº†ã€‚&lt;/p>
&lt;p>æ‹¿åˆ° APPKEY ä¹‹åï¼Œå¯ä»¥æŸ¥é˜…å®˜æ–¹ç»™çš„æ–‡æ¡£ï¼Œå¯ç”¨çš„ API å…¶å®ä¸å¤šï¼Œæ›´å¤šè¿˜æ˜¯è¦é è‡ªå·±å»ç”Ÿæˆå†…å®¹ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/Windfarer/pymobird" target="_blank" rel="noopener"
>GitHub&lt;/a>ä¸Šä¹Ÿæœ‰å…¶ä»–å¼€å‘è€…å†™çš„ SDKï¼Œå¯ä»¥ä¸ç”¨è‡ªå·±é‡å¤æŒ‰ç…§å®˜æ–¹æ–‡æ¡£é€ è½®å­ã€‚&lt;/p>
&lt;h2 id="rss">RSS&lt;/h2>
&lt;p>æ‰“ä¸ªæ¯”æ–¹ï¼Œè®¢é˜…&lt;a class="link" href="https://space.bilibili.com/332704117/dynamic" target="_blank" rel="noopener"
>å°ç‹ç‹¸&lt;/a>çš„ B ç«™åŠ¨æ€ã€‚&lt;/p>
&lt;p>ç†Ÿç»ƒçš„æ‰“å¼€å°ç‹ç‹¸çš„ç©ºé—´ï¼ŒF12ï¼Œåˆ·æ–°ï¼Œè¿‡æ»¤ XHRï¼Œæ‰¾åˆ° API æ¥å£&lt;code>https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/space_history&lt;/code>ã€‚B ç«™çš„åŠ¨æ€æœ‰å¤šç§ç±»å‹ï¼Œéœ€è¦æ ¹æ®ç±»å‹åˆ¤æ–­çˆ¬å–çš„å†…å®¹ã€‚&lt;/p>
&lt;p>&lt;code>['data']['cards']['desc']['type']&lt;/code>çš„å€¼è¡¨æ˜äº†åŠ¨æ€æ˜¯ä½•ç§ç±»å‹ï¼Œæ¯”å¦‚ 1 æ˜¯æŒ‡è½¬å‘ï¼Œ2 æ˜¯å¸¦å›¾åŠ¨æ€ï¼Œ4 æ˜¯çº¯æ–‡å­—åŠ¨æ€ï¼Œ8 æ˜¯æŠ•ç¨¿è§†é¢‘æ¨é€ã€‚&lt;/p>
&lt;p>åœ¨ &lt;code>['data']['cards']['card']&lt;/code> ä¸­æ˜¯ä¸€ä¸² JSON æ•°æ®ï¼ŒåŠ¨æ€çš„æ–‡æœ¬å†…å®¹æ ¹æ®ä¸Šé¢ä¸åŒçš„ç±»å‹å­˜åœ¨ä¸åŒçš„é”®å€¼é‡Œï¼Œæ¯”å¦‚&lt;code>['dynamic']&lt;/code>ã€&lt;code>['item']['content']&lt;/code>ã€&lt;code>['item']['description']&lt;/code>è¿™å‡ ä¸ªä½ç½®ã€‚&lt;/p>
&lt;h2 id="å›¾ç‰‡å­˜å‚¨">å›¾ç‰‡å­˜å‚¨&lt;/h2>
&lt;p>åªæœ‰æ–‡æœ¬å†…å®¹çš„çº¸æ¡å¤ªå•è°ƒäº†ï¼Œä¿¡æ¯é‡ä¹Ÿä¸å¤Ÿï¼Œè¿˜æ˜¯éœ€è¦èƒ½å¤ŸåŒæ—¶æ‰“å°å›¾ç‰‡å†…å®¹ã€‚ä½†å›¾ç‰‡æ‰“å°ä¼šå¢åŠ æ‰“å°æ—¶é—´å’Œä¸‹è½½æ—¶é—´ï¼ŒæŠ˜è¡·é€‰æ‹©åªä¿å­˜é™„å¸¦å›¾ç‰‡çš„ç¬¬ä¸€å¼ ã€‚&lt;/p>
&lt;p>ä¸ºäº†ä¿æŒç›®å½•æ•´æ´ï¼Œå›¾ç‰‡æ•°æ®å…¨éƒ¨ç”¨ sqlite3 å­˜å‚¨ã€‚&lt;/p>
&lt;h2 id="å†…å®¹æ›´æ–°">å†…å®¹æ›´æ–°&lt;/h2>
&lt;p>ä¸ºäº†é¿å…é‡å¤æ‰“å°æµªè´¹çº¸å¼ ï¼Œæ¯æ¬¡çˆ¬å–æ•°æ®æ—¶éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰æ–°çš„å†…å®¹ã€‚&lt;/p>
&lt;p>å»ºæ•°æ®è¡¨ï¼Œåªå­˜å‚¨å¿…è¦çš„æ—¶é—´ã€æ—¥æœŸã€æ–‡å­—å†…å®¹å’Œå›¾ç‰‡æ•°æ®ï¼ŒåŠ ä¸ŠåŠ¨æ€çš„ ID ä½œä¸ºä¸»é”®æ¥è¿›è¡Œå»é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">IF&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">ç™½ä¸Šå¹é›ª&lt;/span>Official (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">day&lt;/span> VARCHAR,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _id VARCHAR &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#66d9ef">UNIQUE&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg VARCHAR,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pic BLOB,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title VARCHAR);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åäººå·¥æ’å…¥ä¸€æ¡ id ä¸º 0 çš„æ•°æ®ï¼Œç”¨æ¥è®°å½•æ˜¯å¦è·å–åˆ°æ–°å†…å®¹ï¼Œæ¯æ¬¡å…ˆå•ç‹¬æŸ¥è¯¢è¿™ä¸€è¡Œï¼Œæœ‰æ–°æ•°æ®å†å–å‡ºå†…å®¹è¿›è¡Œæ‰“å°ã€‚&lt;/p>
&lt;h2 id="post-è¯·æ±‚æ‰“å°">POST è¯·æ±‚æ‰“å°&lt;/h2>
&lt;p>åˆ©ç”¨ä¹‹å‰æåˆ°çš„ SDKï¼Œå°†æ–‡å­—å’Œå›¾ç‰‡çš„å¤åˆå†…å®¹æ•´åˆåä¸€èµ· POST ç»™æœåŠ¡å™¨ã€‚&lt;/p>
&lt;h3 id="å°èŠ±æ ·">å°èŠ±æ ·&lt;/h3>
&lt;p>ä¸ºäº†åŒºåˆ†æ™®é€šçš„å¸¦å›¾åŠ¨æ€å’Œè§†é¢‘æŠ•ç¨¿çš„æ¨é€ï¼Œä»¿ç…§åŠ¨æ€çš„æ ·å¼ç»™è§†é¢‘æŠ•ç¨¿çš„å›¾åƒåŠ ä¸Šäº†è§’æ ‡ã€‚åŒæ—¶å› ä¸ºå’•å’•æœºé‡‡ç”¨çš„æ˜¯ WiFi æ‰“å°ï¼Œä¸ºäº†å‡å°æ–‡ä»¶ä½“ç§¯ï¼ŒPOST æ•°æ®å‰å¯¹å›¾ç‰‡å°ºå¯¸è¿›è¡Œç¼©å°ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> pymobird &lt;span style="color:#f92672">import&lt;/span> Content
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> pymobird &lt;span style="color:#f92672">import&lt;/span> Content
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bird &lt;span style="color:#f92672">=&lt;/span> SimplePymobird(appkey, device_id, user_id)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content &lt;span style="color:#f92672">=&lt;/span> Content()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content&lt;span style="color:#f92672">.&lt;/span>add_text(&lt;span style="color:#e6db74">&amp;#39;ã€&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">ã€‘&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname)) &lt;span style="color:#75715e"># ç”¨æˆ·å&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content&lt;span style="color:#f92672">.&lt;/span>add_text(time&lt;span style="color:#f92672">.&lt;/span>strftime(&lt;span style="color:#e6db74">&amp;#39;%Y-%m-&lt;/span>&lt;span style="color:#e6db74">%d&lt;/span>&lt;span style="color:#e6db74"> %H:%M&amp;#39;&lt;/span>,time&lt;span style="color:#f92672">.&lt;/span>gmtime(int(day)))) &lt;span style="color:#75715e"># æ—¥æœŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content&lt;span style="color:#f92672">.&lt;/span>add_text(&lt;span style="color:#e6db74">&amp;#39;https://t.bilibili.com/&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(_id)) &lt;span style="color:#75715e"># é“¾æ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content&lt;span style="color:#f92672">.&lt;/span>add_text(msg) &lt;span style="color:#75715e"># æ–‡å­—å†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> PIL &lt;span style="color:#f92672">import&lt;/span> Image
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> PIL &lt;span style="color:#f92672">import&lt;/span> ImageDraw
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> PIL &lt;span style="color:#f92672">import&lt;/span> ImageFont
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>img &lt;span style="color:#f92672">=&lt;/span> Image&lt;span style="color:#f92672">.&lt;/span>open(&lt;span style="color:#e6db74">&amp;#39;peitu.jpg&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>img&lt;span style="color:#f92672">.&lt;/span>thumbnail((&lt;span style="color:#ae81ff">400&lt;/span>, &lt;span style="color:#ae81ff">400&lt;/span>), Image&lt;span style="color:#f92672">.&lt;/span>ANTIALIAS)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>font &lt;span style="color:#f92672">=&lt;/span> ImageFont&lt;span style="color:#f92672">.&lt;/span>truetype(&lt;span style="color:#e6db74">&amp;#39;SourceHanSansCN-Regular.otf&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">22&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>draw &lt;span style="color:#f92672">=&lt;/span> ImageDraw&lt;span style="color:#f92672">.&lt;/span>Draw(img)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>draw&lt;span style="color:#f92672">.&lt;/span>rectangle(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#ae81ff">268&lt;/span>, &lt;span style="color:#ae81ff">15&lt;/span>, &lt;span style="color:#ae81ff">368&lt;/span>, &lt;span style="color:#ae81ff">47&lt;/span>), fill&lt;span style="color:#f92672">=&lt;/span>(&lt;span style="color:#ae81ff">250&lt;/span>, &lt;span style="color:#ae81ff">115&lt;/span>, &lt;span style="color:#ae81ff">150&lt;/span>), outline&lt;span style="color:#f92672">=&lt;/span>(&lt;span style="color:#ae81ff">250&lt;/span>, &lt;span style="color:#ae81ff">140&lt;/span>, &lt;span style="color:#ae81ff">160&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>draw&lt;span style="color:#f92672">.&lt;/span>text((&lt;span style="color:#ae81ff">274&lt;/span>, &lt;span style="color:#ae81ff">14&lt;/span>), &lt;span style="color:#e6db74">&amp;#39;æŠ•ç¨¿è§†é¢‘&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;#FFFFFF&amp;#39;&lt;/span>, font&lt;span style="color:#f92672">=&lt;/span>font)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>img&lt;span style="color:#f92672">.&lt;/span>save(&lt;span style="color:#e6db74">&amp;#39;peitu.png&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;PNG&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>content&lt;span style="color:#f92672">.&lt;/span>add_image(&lt;span style="color:#e6db74">&amp;#39;peitu.png&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>result &lt;span style="color:#f92672">=&lt;/span> bird&lt;span style="color:#f92672">.&lt;/span>print_multi_part_content(content)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="crontab-å®šæ—¶ä»»åŠ¡">Crontab å®šæ—¶ä»»åŠ¡&lt;/h2>
&lt;p>å¼€ SSH æŠŠè„šæœ¬æ‰”è¿›å¯Œæœ‰å†å²æ„Ÿçš„æ ‘è“æ´¾ã€‚&lt;/p>
&lt;blockquote>
&lt;p>crontab -e&lt;/p>
&lt;p>*/5 * * * * python3 bilibili_fubuki.py&lt;/p>
&lt;/blockquote>
&lt;h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç &lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/python&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> re
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> requests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sqlite3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## bilibili&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;ç™½ä¸Šå¹é›ª Official&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>uid &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;332704117&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## memobird&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>appkey &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>device_id &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>user_id &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>headers &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;User-Agent&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:69.0) Gecko/20100101 Firefox/69.0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;application/json, text/plain, */*&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept-Language&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Origin&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;https://space.bilibili.com&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;DNT&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Connection&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;keep-alive&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Referer&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;https://space.bilibili.com/&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>newfile &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">not&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>exists(&lt;span style="color:#e6db74">&amp;#39;bilibili_&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.sqlite&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>db &lt;span style="color:#f92672">=&lt;/span> sqlite3&lt;span style="color:#f92672">.&lt;/span>connect(&lt;span style="color:#e6db74">&amp;#39;bilibili_&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.sqlite&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname), isolation_level&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cur &lt;span style="color:#f92672">=&lt;/span> db&lt;span style="color:#f92672">.&lt;/span>cursor()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cur&lt;span style="color:#f92672">.&lt;/span>execute(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">CREATE TABLE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">IF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> NOT EXISTS &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74"> (
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> day VARCHAR,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> _id VARCHAR PRIMARY KEY UNIQUE,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> msg VARCHAR,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> pic BLOB,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> title VARCHAR);&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> newfile:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cur&lt;span style="color:#f92672">.&lt;/span>execute(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;INSERT INTO &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74"> VALUES ( ?, ?, ?, ?, ? );&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#66d9ef">None&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>, &lt;span style="color:#66d9ef">None&lt;/span>, &lt;span style="color:#66d9ef">None&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">bili_pic&lt;/span>(link):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>get(link, headers&lt;span style="color:#f92672">=&lt;/span>headers)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> file&lt;span style="color:#f92672">.&lt;/span>content
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> params &lt;span style="color:#f92672">=&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;visitor_uid&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;host_uid&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uid)),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;offset_dynamic_id&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/space_history&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> headers&lt;span style="color:#f92672">=&lt;/span>headers,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> params&lt;span style="color:#f92672">=&lt;/span>params)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;code&amp;#39;&lt;/span>) &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;message&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> card &lt;span style="color:#f92672">in&lt;/span> result[&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;cards&amp;#39;&lt;/span>]:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> card_time &lt;span style="color:#f92672">=&lt;/span> card[&lt;span style="color:#e6db74">&amp;#39;desc&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;timestamp&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> card_id &lt;span style="color:#f92672">=&lt;/span> card[&lt;span style="color:#e6db74">&amp;#39;desc&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;dynamic_id_str&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> card_type &lt;span style="color:#f92672">=&lt;/span> card[&lt;span style="color:#e6db74">&amp;#39;desc&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;type&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(card[&lt;span style="color:#e6db74">&amp;#39;card&amp;#39;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> card_type &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">8&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;title&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pic &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;pic&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;dynamic&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> card_type &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pic &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;item&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;content&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> card_type &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;item&amp;#39;&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;pictures&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pic &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;item&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;pictures&amp;#39;&lt;/span>][&lt;span style="color:#ae81ff">0&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;img_src&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;item&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;description&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> card_type &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> title &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pic &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#f92672">=&lt;/span> data[&lt;span style="color:#e6db74">&amp;#39;item&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;content&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(card_time, card_id, card_type)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> img &lt;span style="color:#f92672">=&lt;/span> bili_pic(pic) &lt;span style="color:#66d9ef">if&lt;/span> pic &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cur&lt;span style="color:#f92672">.&lt;/span>execute(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;INSERT OR REPLACE INTO &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74"> VALUES ( ?, ?, ?, ?, ? );&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> uname), (card_time, card_id, text, img, title))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> new &lt;span style="color:#f92672">=&lt;/span> cur&lt;span style="color:#f92672">.&lt;/span>execute(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;SELECT COUNT(_id) FROM &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">;&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))&lt;span style="color:#f92672">.&lt;/span>fetchone()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> old &lt;span style="color:#f92672">=&lt;/span> cur&lt;span style="color:#f92672">.&lt;/span>execute(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;SELECT msg FROM &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74"> WHERE _id = 0;&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))&lt;span style="color:#f92672">.&lt;/span>fetchone()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> int(new[&lt;span style="color:#ae81ff">0&lt;/span>]) &lt;span style="color:#f92672">==&lt;/span> int(old[&lt;span style="color:#ae81ff">0&lt;/span>]):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cur&lt;span style="color:#f92672">.&lt;/span>execute(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;UPDATE &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74"> SET msg = ? WHERE _id = 0&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (str(new[&lt;span style="color:#ae81ff">0&lt;/span>]), ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limit &lt;span style="color:#f92672">=&lt;/span> int(new[&lt;span style="color:#ae81ff">0&lt;/span>]) &lt;span style="color:#f92672">-&lt;/span> int(old[&lt;span style="color:#ae81ff">0&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> limit &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limit &lt;span style="color:#f92672">=&lt;/span> limit &lt;span style="color:#66d9ef">if&lt;/span> limit &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">from&lt;/span> pymobird &lt;span style="color:#f92672">import&lt;/span> Content
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">from&lt;/span> pymobird &lt;span style="color:#f92672">import&lt;/span> SimplePymobird
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bird &lt;span style="color:#f92672">=&lt;/span> SimplePymobird(ak&lt;span style="color:#f92672">=&lt;/span>appkey, device_id&lt;span style="color:#f92672">=&lt;/span>device_id, user_id&lt;span style="color:#f92672">=&lt;/span>user_id)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data &lt;span style="color:#f92672">=&lt;/span> cur&lt;span style="color:#f92672">.&lt;/span>execute(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;SELECT day, _id, msg, pic, title FROM &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74"> ORDER BY _id DESC LIMIT &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">;&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">.&lt;/span>format(uname, limit))&lt;span style="color:#f92672">.&lt;/span>fetchall()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> dynamic &lt;span style="color:#f92672">in&lt;/span> data[::&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>]:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> day, _id, msg, pic, title &lt;span style="color:#f92672">=&lt;/span> dynamic
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content &lt;span style="color:#f92672">=&lt;/span> Content()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content&lt;span style="color:#f92672">.&lt;/span>add_text(&lt;span style="color:#e6db74">&amp;#39;ã€&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">ã€‘&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content&lt;span style="color:#f92672">.&lt;/span>add_text(time&lt;span style="color:#f92672">.&lt;/span>strftime(&lt;span style="color:#e6db74">&amp;#39;%Y-%m-&lt;/span>&lt;span style="color:#e6db74">%d&lt;/span>&lt;span style="color:#e6db74"> %H:%M&amp;#39;&lt;/span>,time&lt;span style="color:#f92672">.&lt;/span>gmtime(int(day))))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content&lt;span style="color:#f92672">.&lt;/span>add_text(&lt;span style="color:#e6db74">&amp;#39;https://t.bilibili.com/&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(_id))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content&lt;span style="color:#f92672">.&lt;/span>add_text(msg)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> pic:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.jpg&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname), &lt;span style="color:#e6db74">&amp;#39;wb&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(pic)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> img &lt;span style="color:#f92672">=&lt;/span> Image&lt;span style="color:#f92672">.&lt;/span>open(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.jpg&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> img&lt;span style="color:#f92672">.&lt;/span>thumbnail((&lt;span style="color:#ae81ff">400&lt;/span>, &lt;span style="color:#ae81ff">400&lt;/span>), Image&lt;span style="color:#f92672">.&lt;/span>ANTIALIAS)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> title:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">from&lt;/span> PIL &lt;span style="color:#f92672">import&lt;/span> Image
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">from&lt;/span> PIL &lt;span style="color:#f92672">import&lt;/span> ImageDraw
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">from&lt;/span> PIL &lt;span style="color:#f92672">import&lt;/span> ImageFont
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content&lt;span style="color:#f92672">.&lt;/span>add_text(title)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> font &lt;span style="color:#f92672">=&lt;/span> ImageFont&lt;span style="color:#f92672">.&lt;/span>truetype(&lt;span style="color:#e6db74">&amp;#39;SourceHanSansCN-Regular.otf&amp;#39;&lt;/span>, &lt;span style="color:#ae81ff">22&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> draw &lt;span style="color:#f92672">=&lt;/span> ImageDraw&lt;span style="color:#f92672">.&lt;/span>Draw(img)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> draw&lt;span style="color:#f92672">.&lt;/span>rectangle((&lt;span style="color:#ae81ff">268&lt;/span>, &lt;span style="color:#ae81ff">15&lt;/span>, &lt;span style="color:#ae81ff">368&lt;/span>, &lt;span style="color:#ae81ff">47&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fill&lt;span style="color:#f92672">=&lt;/span>(&lt;span style="color:#ae81ff">250&lt;/span>, &lt;span style="color:#ae81ff">115&lt;/span>, &lt;span style="color:#ae81ff">150&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outline&lt;span style="color:#f92672">=&lt;/span>(&lt;span style="color:#ae81ff">250&lt;/span>, &lt;span style="color:#ae81ff">140&lt;/span>, &lt;span style="color:#ae81ff">160&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> draw&lt;span style="color:#f92672">.&lt;/span>text((&lt;span style="color:#ae81ff">274&lt;/span>, &lt;span style="color:#ae81ff">14&lt;/span>), &lt;span style="color:#e6db74">&amp;#39;æŠ•ç¨¿è§†é¢‘&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;#FFFFFF&amp;#39;&lt;/span>, font&lt;span style="color:#f92672">=&lt;/span>font)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> img&lt;span style="color:#f92672">.&lt;/span>save(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.png&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname), &lt;span style="color:#e6db74">&amp;#39;PNG&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content&lt;span style="color:#f92672">.&lt;/span>add_image(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.png&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(uname))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> bird&lt;span style="color:#f92672">.&lt;/span>print_multi_part_content(content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(result)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time&lt;span style="color:#f92672">.&lt;/span>sleep(&lt;span style="color:#ae81ff">5&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;__main__&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> main()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>&lt;img src="https://naizi.ch/pic/2019-10-02-memobird-rss/2019-10-02_20-38.gif"
loading="lazy"
alt="gugugu"
>&lt;/p></description></item><item><title>Archives</title><link>https://naizi.ch/archives/</link><pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/archives/</guid><description/></item><item><title>å“”å“©å“”å“©ä¸‹è½½å·¥å…· äºŒ</title><link>https://naizi.ch/2019/04/30/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7-%E4%BA%8C/</link><pubDate>Tue, 30 Apr 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/04/30/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7-%E4%BA%8C/</guid><description>&lt;p>ä¸»è¦è§£å†³ä¸€äº›ä¹‹å‰é‡åˆ°çš„å‘ï¼Œå¡«ä¸€äº›ç•™ä¸‹çš„ TODOã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="vegas-ä¸æ”¯æŒ-hevc-ç¼–ç ">Vegas ä¸æ”¯æŒ HEVC ç¼–ç &lt;/h2>
&lt;p>æ€è·¯å¾ˆç®€å•ï¼Œå¯¹ä¸‹è½½ä¸‹æ¥çš„&lt;code>m4s&lt;/code>å…ˆè¯»ä¸€éç¼–ç ï¼Œçœ‹æ˜¯ä¸æ˜¯ HEVC æ ¼å¼çš„ï¼Œå¦‚æœæ˜¯å°±åœ¨è½¬ç çš„æ—¶å€™ç”¨&lt;code>libx264&lt;/code>ç¼–ç ï¼Œä¸æ˜¯å°±ç²—æš´çš„ copy è§†é¢‘æµã€‚&lt;/p>
&lt;p>æš‚æ—¶ä¸æ‰“ç®—åŠ ä¸Šåˆ¤æ–­å…¶ä»–è§†é¢‘æµæ ¼å¼çš„ä»£ç ï¼Œé‡åˆ°å†è¯´ã€‚&lt;/p>
&lt;h3 id="é€šè¿‡-ffprobe-åˆ¤æ–­ç¼–ç ">é€šè¿‡ ffprobe åˆ¤æ–­ç¼–ç &lt;/h3>
&lt;p>å› ä¸ºä¹‹å‰å¾ˆå°‘æ¥è§¦è§†é¢‘è½¬ç ï¼Œä¹Ÿæ²¡ä»€ä¹ˆæœºä¼šç”¨ ffmpegã€‚åœ¨åˆ¤æ–­ HEVC ç¼–ç è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œæƒ³ç€ç”¨ç±»ä¼¼&lt;code>ffmpeg -args | find &amp;quot;stream&amp;quot;&lt;/code>çš„æ–¹å¼æ¥å–å¾—è§†é¢‘ç¼–ç ã€‚&lt;/p>
&lt;p>å¯èƒ½æ˜¯ç¯å¢ƒé—®é¢˜ï¼Œæ²¡æˆåŠŸï¼Œè€Œä¸”è¿˜è¦å¦å†™æ­£åˆ™åŒ¹é…æ–‡æœ¬æœ‰äº›éº»çƒ¦ã€‚æŸ¥äº†ä¸€ä¸‹æ”¹ç”¨ ffprobeã€‚&lt;/p>
&lt;blockquote>
&lt;p>ffprobe.exe -v error -select_streams v:0 -show_entries stream=codec_name &lt;br>
-of default=nokey=1:noprint_wrappers=1 v.m4s &amp;raquo; ./t.txt&lt;/p>
&lt;/blockquote>
&lt;h2 id="ffmpeg-åˆå¹¶-flv">ffmpeg åˆå¹¶ flv&lt;/h2>
&lt;p>ffmpeg çš„é—®é¢˜ä¸»è¦å‡ºç°åœ¨åˆå¹¶ flv ä¸Šï¼Œdash è§†é¢‘å€’æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p>
&lt;p>é‡‡ç”¨&lt;code>-f concat -i file.list&lt;/code>çš„æ–¹å¼åˆå¹¶é‡åˆ°äº†è·¯å¾„é—®é¢˜ã€‚å› ä¸ºå¬å–äº†å»ºè®®â€œä¸‹è½½çš„æ–‡ä»¶æœ€å¥½å•ç‹¬æ”¾ä¸ªç›®å½•ï¼Œç›´æ¥ä¸‹åœ¨è„šæœ¬æ ¹ç›®å½•å°±ä¼šå¾ˆä¹±â€ã€‚&lt;/p>
&lt;p>æ‰€æœ‰çš„æ–‡ä»¶éƒ½ä¸‹è½½åœ¨äº†å­æ–‡ä»¶å¤¹é‡Œï¼Œæ¯”å¦‚&lt;code>./down&lt;/code>ã€‚åœ¨ä¸‹è½½ flv åˆ†æ®µçš„æ—¶å€™ï¼Œæ–‡ä»¶çš„ç›®å½•ç»“æ„å°±ç±»ä¼¼ï¼š&lt;/p>
&lt;blockquote>
&lt;p>..
ffmpeg.exe
/down
/down/file.list
/down/part1.flv
/down/part2.flv&lt;/p>
&lt;/blockquote>
&lt;p>ffmpeg çš„å‘½ä»¤å†™æˆï¼š&lt;/p>
&lt;blockquote>
&lt;p>ffmpeg -safe 0 -hide_banner -f concat -i ./down/file.list -c copy ./down/finish.mp4&lt;/p>
&lt;/blockquote>
&lt;p>é—®é¢˜æ¥äº†ï¼Œfile.list é‡Œè¯¥æ€ä¹ˆå†™ï¼Œæˆ‘åŸæœ¬ä»¥ä¸ºåº”è¯¥æ˜¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>file &amp;lsquo;./down/part1.flv&amp;rsquo;
file &amp;lsquo;./down/part2.flv&amp;rsquo;
file &amp;lsquo;./down/part3.flv&amp;rsquo;&lt;/p>
&lt;/blockquote>
&lt;p>ç„¶è€Œè¿™æ · ffmpeg ä¼šæŠ¥é”™æ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯é‡Œæç¤ºçš„æ–‡ä»¶è·¯å¾„ï¼Œåº”è¯¥æ”¹æˆ&lt;/p>
&lt;blockquote>
&lt;p>file &amp;lsquo;part1.flv&amp;rsquo;
file &amp;lsquo;part2.flv&amp;rsquo;
file &amp;lsquo;part3.flv&amp;rsquo;&lt;/p>
&lt;/blockquote>
&lt;p>çœ‹æ¥ file.list é‡Œçš„æ ¹ç›®å½•æ˜¯ file.list æ‰€åœ¨ç›®å½•ã€‚&lt;/p>
&lt;h2 id="é€šè¿‡å­è¿›ç¨‹åŠ é€Ÿä¸‹è½½">é€šè¿‡å­è¿›ç¨‹åŠ é€Ÿä¸‹è½½&lt;/h2>
&lt;p>éŸ³é¢‘å’Œè§†é¢‘åŒæ—¶ä¸‹è½½ã€‚å› ä¸ºåŸæœ¬ç”¨ os.system çš„æ–¹å¼ä¼šé˜»å¡ï¼Œæ”¹ç”¨ subprocess.Popen å­è¿›ç¨‹ï¼Œç„¶ååœ¨ ffmpeg åˆå¹¶å‰é˜»å¡ä¸¤ä¸ªå­è¿›ç¨‹ï¼Œç¡®ä¿ä¸‹è½½å®Œæ¯•å†è¿›è¡Œåˆå¹¶ã€‚&lt;/p>
&lt;p>å•ä¸ªä»»åŠ¡çš„è¯å°±ç”¨ä¸Šé¢çš„æ–¹å¼ï¼Œç„¶åå¼€å¯å¤šè¿›ç¨‹åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä½†æ˜¯è¿™æ ·åˆé‡åˆ°äº†æ–°çš„é—®é¢˜ï¼š&lt;/p>
&lt;h3 id="å°è¯•å¤šè¿›ç¨‹å’Œ-pyinstaller-çš„å‘">å°è¯•å¤šè¿›ç¨‹å’Œ pyinstaller çš„å‘&lt;/h3>
&lt;p>å› ä¸ºæœ€åè¦æ‰“åŒ…æˆ exe ç»™å…¶ä»–äººç”¨ï¼Œæ¯•ç«Ÿæ²¡å¿…è¦è®©æ¯ä¸ªäººéƒ½è£…ä¸€ä¸ª python ç¯å¢ƒæ¥è·‘è„šæœ¬ã€‚&lt;/p>
&lt;p>åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­å‘ç°ï¼Œè™½ç„¶ py è„šæœ¬èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œï¼Œä½†æ˜¯æ‰“åŒ…å®Œæˆçš„ exe åè€Œå˜æˆäº†ä¸€ä¸ª fork ç‚¸å¼¹ï¼Œä¼šæ— é™çš„äº§ç”Ÿå­è¿›ç¨‹ç›´åˆ°è®©ç³»ç»Ÿå®•æœºã€‚&lt;/p>
&lt;p>å¦‚æ˜¯ä¸‰æ¬¡ä¹‹å Google äº†ä¸€ä¸‹ï¼Œpyinstaller å’Œ multiprocessing ç›¸æ€§ä¸åˆï¼Œä½¿ç”¨ mulitprocessing.Process å’Œ mulitprocessing.Pool çš„ä»£ç åœ¨ pyinstaller ç¼–è¯‘åå°±ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>ç»™å‡ºçš„è§£å†³æ–¹æ³•åªé€‚ç”¨äº python2 ç‰ˆæœ¬ï¼Œè€Œæˆ‘ç”¨çš„æ˜¯ python3.7ï¼Œæ‘Šæ‰‹ã€‚&lt;/p>
&lt;h3 id="æ”¹ç”¨-threading-ç»•è¿‡é—®é¢˜">æ”¹ç”¨ threading ç»•è¿‡é—®é¢˜&lt;/h3>
&lt;p>æ—¢ç„¶ä¸èƒ½ç”¨å¤šè¿›ç¨‹ï¼Œé‚£å°±ç”¨å¤šçº¿ç¨‹å¥½äº†ã€‚&lt;/p>
&lt;p>è€Œä¸”å®é™…ä¸Šæˆ‘ä¹Ÿçš„ç¡®æ˜¯å…ˆç”¨çš„ threading åº“ï¼Œé‡åˆ°äº†é—®é¢˜æ‰æƒ³çš„ç”¨ multiprocessingã€‚&lt;/p>
&lt;p>åŸå› æ˜¯ threading çš„åœºåˆï¼Œæˆ‘ç¼–è¯‘ exe å®Œæˆï¼Œæµ‹è¯•çš„æ—¶å€™æƒ³ç›´æ¥å…³é—­çª—å£ï¼Œå‘ç°åšä¸åˆ°ã€‚&lt;/p>
&lt;p>ç»“è®ºè€Œä¸”è¿™ä¸ç®—ä»€ä¹ˆé—®é¢˜ï¼Œæ¯”èµ· fork ç‚¸å¼¹è¦å¯æ¥å—çš„å¤šäº†ï¼Œè€Œä¸”ä¸€ä¸ªä¸‹è½½å·¥å…·ï¼Œæœ¬æ¥å°±æ²¡æœ‰å¿…è¦åœ¨ä¸­é€”é€€å‡ºã€‚&lt;/p>
&lt;p>æœ€åä¸Šäº†çº¿ç¨‹æ± &lt;code>from multiprocessing.dummy import Pool as ThreadPool&lt;/code>ï¼Œå¹¸å¥½è¿™æ ·å¹¶ä¸ä¼šå’Œ pyinstaller å†²çªã€‚&lt;/p>
&lt;h2 id="æ”¾å¼ƒå†™é…ç½®æ–‡ä»¶">æ”¾å¼ƒå†™é…ç½®æ–‡ä»¶&lt;/h2>
&lt;p>è®¡åˆ’æŠŠ ffmpeg å’Œ aria2c çš„é…ç½®å•ç‹¬å­˜æ–‡ä»¶çš„æ¥ç€ï¼Œæƒ³æƒ³åˆè¦å¢åŠ ä»£ç é‡ï¼Œè€Œä¸”å‡ ä¹ä¸ä¼šå»åŠ¨è¿™äº›é…ç½®ï¼Œè¿˜æ˜¯ä½œç½¢äº†ã€‚&lt;/p>
&lt;p>ç¡¬ç¼–ç ä¸ä¹ŸæŒºå¥½ä¹ˆ.jpg&lt;/p>
&lt;h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç &lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/python&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> arrow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> re
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> requests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> subprocess
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> lxml &lt;span style="color:#f92672">import&lt;/span> etree
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> multiprocessing.dummy &lt;span style="color:#f92672">import&lt;/span> Pool &lt;span style="color:#66d9ef">as&lt;/span> ThreadPool
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>today &lt;span style="color:#f92672">=&lt;/span> arrow&lt;span style="color:#f92672">.&lt;/span>utcnow()&lt;span style="color:#f92672">.&lt;/span>format(&lt;span style="color:#e6db74">&amp;#39;YYYY-MM-DD&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>exists(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today)):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>mkdir(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>session &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>session()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>session&lt;span style="color:#f92672">.&lt;/span>headers &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;User-Agent&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;application/json, text/plain, */*&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept-Language&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Referer&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;https://www.bilibili.com/video/av42038790?from=search&amp;amp;seid=4077958841119274554&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Origin&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;https://www.bilibili.com&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;DNT&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Connection&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;keep-alive&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Pragma&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;no-cache&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Cache-Control&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;no-cache&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;cookies&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cookies &lt;span style="color:#f92672">=&lt;/span> f&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>session&lt;span style="color:#f92672">.&lt;/span>headers[&lt;span style="color:#e6db74">&amp;#39;cookie&amp;#39;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> cookies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">videocid&lt;/span>(aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">42038790&lt;/span>, part&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> params &lt;span style="color:#f92672">=&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;aid&amp;#39;&lt;/span>, aid),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;jsonp&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;jsonp&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> session&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/pagelist&amp;#39;&lt;/span>, params&lt;span style="color:#f92672">=&lt;/span>params, ) &lt;span style="color:#75715e"># cookies=cookies)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cid &lt;span style="color:#f92672">=&lt;/span> result[&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>][part &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;cid&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> cid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">videourl&lt;/span>(aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">42038790&lt;/span>, cid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">73802454&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> params &lt;span style="color:#f92672">=&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;avid&amp;#39;&lt;/span>, aid),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;cid&amp;#39;&lt;/span>, cid),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;qn&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;112&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;fnver&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;fnval&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;16&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;type&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;otype&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;json&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> session&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/playurl&amp;#39;&lt;/span>, params&lt;span style="color:#f92672">=&lt;/span>params,) &lt;span style="color:#75715e"># cookies=cookies)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>) &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> session&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/pgc/player/web/playurl&amp;#39;&lt;/span>, params&lt;span style="color:#f92672">=&lt;/span>params,) &lt;span style="color:#75715e"># cookies=cookies)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> playinfo &lt;span style="color:#f92672">=&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;result&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> playinfo &lt;span style="color:#f92672">=&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> playinfo &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(aid, &lt;span style="color:#e6db74">&amp;#39;Not Found&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> playinfo&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aids &lt;span style="color:#f92672">=&lt;/span> [x[&lt;span style="color:#e6db74">&amp;#39;id&amp;#39;&lt;/span>] &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;audio&amp;#39;&lt;/span>]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aurl &lt;span style="color:#f92672">=&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;audio&amp;#39;&lt;/span>][aids&lt;span style="color:#f92672">.&lt;/span>index(max(aids))][&lt;span style="color:#e6db74">&amp;#39;baseUrl&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vids &lt;span style="color:#f92672">=&lt;/span> [x[&lt;span style="color:#e6db74">&amp;#39;id&amp;#39;&lt;/span>] &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;video&amp;#39;&lt;/span>]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vurl &lt;span style="color:#f92672">=&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;video&amp;#39;&lt;/span>][vids&lt;span style="color:#f92672">.&lt;/span>index(max(vids))][&lt;span style="color:#e6db74">&amp;#39;baseUrl&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ap &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;aria2c.exe -x10 -k1M --file-allocation=none --auto-file-renaming=false &amp;#34;&lt;/span>&lt;span style="color:#e6db74">{aurl}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Accept: */*&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Referer: https://www.bilibili.com/video/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Origin: https://www.bilibili.com&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;DNT: 1&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Connection: keep-alive&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Pragma: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Cache-Control: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --out ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_a.m4s&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, aurl&lt;span style="color:#f92672">=&lt;/span>aurl, aid&lt;span style="color:#f92672">=&lt;/span>aid, cid&lt;span style="color:#f92672">=&lt;/span>cid), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vp &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;aria2c -x10 -k1M --file-allocation=none --auto-file-renaming=false &amp;#34;&lt;/span>&lt;span style="color:#e6db74">{vurl}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Accept: */*&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Referer: https://www.bilibili.com/video/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Origin: https://www.bilibili.com&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;DNT: 1&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Connection: keep-alive&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Pragma: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Cache-Control: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --out ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_v.m4s&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, vurl&lt;span style="color:#f92672">=&lt;/span>vurl, aid&lt;span style="color:#f92672">=&lt;/span>aid, cid&lt;span style="color:#f92672">=&lt;/span>cid), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ap&lt;span style="color:#f92672">.&lt;/span>wait()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vp&lt;span style="color:#f92672">.&lt;/span>wait()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vt &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;ffprobe.exe -v error -select_streams v:0 -show_entries stream=codec_name&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> -of default=nokey=1:noprint_wrappers=1&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_v.m4s &amp;gt;&amp;gt; ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_t.txt&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vt&lt;span style="color:#f92672">.&lt;/span>wait()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_t.txt&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid), &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> v_type &lt;span style="color:#f92672">=&lt;/span> str(f&lt;span style="color:#f92672">.&lt;/span>read())&lt;span style="color:#f92672">.&lt;/span>replace(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> v_type &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;hevc&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fp &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;ffmpeg -n -hide_banner -i ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_v.m4s -i ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_a.m4s -c:v libx264 -c:a copy&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">.mp4&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid, aid&lt;span style="color:#f92672">=&lt;/span>aid), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fp &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;ffmpeg -n -hide_banner -i ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_v.m4s -i ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_a.m4s -c:v copy -c:a copy&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">.mp4&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid, aid&lt;span style="color:#f92672">=&lt;/span>aid), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_t.txt&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fp&lt;span style="color:#f92672">.&lt;/span>wait()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_a.m4s&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{cid}&lt;/span>&lt;span style="color:#e6db74">_v.m4s&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, cid&lt;span style="color:#f92672">=&lt;/span>cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> playinfo&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;durl&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vlink &lt;span style="color:#f92672">=&lt;/span> [x[&lt;span style="color:#e6db74">&amp;#39;url&amp;#39;&lt;/span>] &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;durl&amp;#39;&lt;/span>]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">_merge.txt&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, aid&lt;span style="color:#f92672">=&lt;/span>aid), &lt;span style="color:#e6db74">&amp;#39;a&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> t:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> p, link &lt;span style="color:#f92672">in&lt;/span> enumerate(vlink):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> t&lt;span style="color:#f92672">.&lt;/span>write(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;file &amp;#39;./av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">_&lt;/span>&lt;span style="color:#e6db74">{p}&lt;/span>&lt;span style="color:#e6db74">.flv&amp;#39;&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(aid&lt;span style="color:#f92672">=&lt;/span>aid, p&lt;span style="color:#f92672">=&lt;/span>p))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> p, link &lt;span style="color:#f92672">in&lt;/span> enumerate(vlink):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> subprocess&lt;span style="color:#f92672">.&lt;/span>check_call(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;aria2c.exe -x10 -k1M --file-allocation=none --auto-file-renaming=false &amp;#34;&lt;/span>&lt;span style="color:#e6db74">{link}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Accept: */*&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Referer: https://www.bilibili.com/video/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Origin: https://www.bilibili.com&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;DNT: 1&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Connection: keep-alive&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --header=&amp;#34;Pragma: no-cache&amp;#34; --header=&amp;#34;Cache-Control: no-cache&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> --out ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">_&lt;/span>&lt;span style="color:#e6db74">{p}&lt;/span>&lt;span style="color:#e6db74">.flv&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, link&lt;span style="color:#f92672">=&lt;/span>link, aid&lt;span style="color:#f92672">=&lt;/span>aid, p&lt;span style="color:#f92672">=&lt;/span>p), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fp &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;ffmpeg -safe 0 -hide_banner -f concat -i ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">_merge.txt -c copy&lt;/span>&lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>&lt;span style="color:#e6db74"> ./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">.mp4&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, aid&lt;span style="color:#f92672">=&lt;/span>aid), shell&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fp&lt;span style="color:#f92672">.&lt;/span>wait()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">_merge.txt&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, aid&lt;span style="color:#f92672">=&lt;/span>aid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> p, link &lt;span style="color:#f92672">in&lt;/span> enumerate(vlink):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;./&lt;/span>&lt;span style="color:#e6db74">{today}&lt;/span>&lt;span style="color:#e6db74">/av&lt;/span>&lt;span style="color:#e6db74">{aid}&lt;/span>&lt;span style="color:#e6db74">_&lt;/span>&lt;span style="color:#e6db74">{p}&lt;/span>&lt;span style="color:#e6db74">.flv&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(today&lt;span style="color:#f92672">=&lt;/span>today, aid&lt;span style="color:#f92672">=&lt;/span>aid, p&lt;span style="color:#f92672">=&lt;/span>p))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pool &lt;span style="color:#f92672">=&lt;/span> ThreadPool(processes&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">5&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;down.txt&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aids &lt;span style="color:#f92672">=&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>findall(&lt;span style="color:#e6db74">r&lt;/span>&lt;span style="color:#e6db74">&amp;#39;av(\d+)&amp;#39;&lt;/span>, f&lt;span style="color:#f92672">.&lt;/span>read())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> aids:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pool&lt;span style="color:#f92672">.&lt;/span>apply_async(videourl, (x, videocid(x)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pool&lt;span style="color:#f92672">.&lt;/span>close()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pool&lt;span style="color:#f92672">.&lt;/span>join()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;__main__&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> main()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="todo">TODO&lt;/h2>
&lt;ul>
&lt;li>&lt;del>éƒ¨åˆ†è§†é¢‘çš„è§†é¢‘æµæ˜¯ HEVC ç¼–ç è€Œä¸æ˜¯ x264ï¼ŒWindows è¯»ä¸å‡º MP4 ç¼©ç•¥å›¾ï¼Œè€ƒè™‘è¦ä¸è¦åˆ¤æ–­è‡ªåŠ¨è½¬ç ã€‚&lt;/del>&lt;/li>
&lt;li>&lt;del>aria2 å’Œ ffmpeg çš„å‚æ•°å•ç‹¬å­˜æ–‡ä»¶æ–¹ä¾¿ä¿®æ”¹ï¼Œä¸ç„¶æ¯æ¬¡éƒ½è¦é‡æ–°ç¼–è¯‘ exeã€‚&lt;/del>&lt;/li>
&lt;li>åˆ† P é€‰æ‹©å’Œæ¸…æ™°åº¦é€‰æ‹©&lt;/li>
&lt;/ul>
&lt;h2 id="eof">EOF&lt;/h2></description></item><item><title>å“”å“©å“”å“©ä¸‹è½½å·¥å…·</title><link>https://naizi.ch/2019/04/07/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/</link><pubDate>Sun, 07 Apr 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/04/07/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7/</guid><description>&lt;p>ç»™å“”å“©å“”å“©å‘¨åˆŠç»„å†™çš„ä¸‹è½½å·¥å…·ã€‚æ¯æ¬¡éƒ½è¦ä¸‹è½½åå‡ ä¸ªè§†é¢‘ï¼Œä¸€ä¸ªä¸ªæ‰‹åŠ¨æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚&lt;/p>
&lt;p>çœ‹äº†ä¸‹ï¼Œå‘ç°ä¸‹è½½æœ€é«˜æ¸…ä¸€è·¯çš„è§†é¢‘æºè¿˜æ˜¯éœ€è¦ cookie è®¤è¯ï¼Œå†™ä¸æ¥ç™»å½•ï¼Œåªèƒ½ç”¨ dirty çš„æ–¹å¼è¯» cookie æ–‡ä»¶äº†ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="åˆ†æ">åˆ†æ&lt;/h2>
&lt;p>è·å–è§†é¢‘éœ€è¦çŸ¥é“è§†é¢‘çš„ av å·å’Œè§†é¢‘ idï¼Œapi æ¥å£é‡Œåˆ†åˆ«æ˜¯&lt;code>avid&lt;/code>å’Œ&lt;code>cid&lt;/code>ï¼Œæœ‰äº†ä¸¤è€…ä¹‹åå°±å¯ä»¥é€šè¿‡ api è·å¾—è§†é¢‘ä¸åŒæ¸…æ™°åº¦çš„ url åœ°å€ã€‚&lt;/p>
&lt;p>B ç«™ç°åœ¨æ–°è§†é¢‘å…¨éƒ¨ä½¿ç”¨äº† dashï¼Œä½†æ˜¯è€è§†é¢‘æ²¡æœ‰ dashï¼Œè¿˜æ˜¯å•ä¸ª flvï¼Œä¸¤è€…åœ¨ api ä¸Šè¿”å›æœ‰åŒºåˆ«ï¼Œå‰è€…æ˜¯&lt;code>dash&lt;/code>å­—æ®µï¼Œåè€…æ˜¯&lt;code>durl&lt;/code>å­—æ®µï¼Œéœ€è¦åˆ¤æ–­æ˜¯å“ªä¸€ç§è§†é¢‘æµã€‚&lt;/p>
&lt;p>å¯¹äº dashï¼ŒéŸ³é¢‘å’Œè§†é¢‘æµåˆ†å‰²ä¸¤è·¯ï¼Œéƒ½æ˜¯ m4s æ ¼å¼ï¼Œä¸‹è½½åéœ€è¦åˆå¹¶ã€‚è€Œ flv æ ¹æ®è§†é¢‘æ—¶é•¿ä¼šæœ‰å¤šä¸ªåˆ†æ®µæ–‡ä»¶ï¼ŒåŒæ ·ä¹Ÿéœ€è¦åˆå¹¶ã€‚&lt;/p>
&lt;h2 id="ä»£ç ">ä»£ç &lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/python&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">## -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> re
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> requests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> lxml &lt;span style="color:#f92672">import&lt;/span> etree
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>session &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>session()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>session&lt;span style="color:#f92672">.&lt;/span>headers &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;User-Agent&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;application/json, text/plain, */*&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept-Language&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># &amp;#39;Referer&amp;#39;: &amp;#39;https://www.bilibili.com/video/av42038790&amp;#39;,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Origin&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;https://www.bilibili.com&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;DNT&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Connection&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;keep-alive&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Pragma&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;no-cache&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Cache-Control&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;no-cache&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;cookies&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cookies &lt;span style="color:#f92672">=&lt;/span> f&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>session&lt;span style="color:#f92672">.&lt;/span>headers[&lt;span style="color:#e6db74">&amp;#34;cookie&amp;#34;&lt;/span>] &lt;span style="color:#f92672">=&lt;/span> cookies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">videocid&lt;/span>(aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">42038790&lt;/span>, part&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> params &lt;span style="color:#f92672">=&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;aid&amp;#39;&lt;/span>, aid),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;jsonp&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;jsonp&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> session&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/pagelist&amp;#39;&lt;/span>, params&lt;span style="color:#f92672">=&lt;/span>params, ) &lt;span style="color:#75715e"># cookies=cookies)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cid &lt;span style="color:#f92672">=&lt;/span> result[&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>][part &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;cid&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> cid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">videourl&lt;/span>(aid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">42038790&lt;/span>, cid&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">73802454&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> params &lt;span style="color:#f92672">=&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;avid&amp;#39;&lt;/span>, aid),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;cid&amp;#39;&lt;/span>, cid),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;qn&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;112&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;fnver&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;fnval&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;16&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;type&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;otype&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;json&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> session&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/x/player/playurl&amp;#39;&lt;/span>, params&lt;span style="color:#f92672">=&lt;/span>params,) &lt;span style="color:#75715e"># cookies=cookies)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>) &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> session&lt;span style="color:#f92672">.&lt;/span>get(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;https://api.bilibili.com/pgc/player/web/playurl&amp;#39;&lt;/span>, params&lt;span style="color:#f92672">=&lt;/span>params,) &lt;span style="color:#75715e"># cookies=cookies)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> playinfo &lt;span style="color:#f92672">=&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;result&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> playinfo &lt;span style="color:#f92672">=&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> playinfo &lt;span style="color:#f92672">is&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(aid, &lt;span style="color:#e6db74">&amp;#39;Not Found&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> playinfo&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vids &lt;span style="color:#f92672">=&lt;/span> [x[&lt;span style="color:#e6db74">&amp;#39;id&amp;#39;&lt;/span>] &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;video&amp;#39;&lt;/span>]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vurl &lt;span style="color:#f92672">=&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;video&amp;#39;&lt;/span>][vids&lt;span style="color:#f92672">.&lt;/span>index(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max(vids))][&lt;span style="color:#e6db74">&amp;#39;baseUrl&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aids &lt;span style="color:#f92672">=&lt;/span> [x[&lt;span style="color:#e6db74">&amp;#39;id&amp;#39;&lt;/span>] &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;audio&amp;#39;&lt;/span>]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aurl &lt;span style="color:#f92672">=&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;dash&amp;#39;&lt;/span>][&lt;span style="color:#e6db74">&amp;#39;audio&amp;#39;&lt;/span>][aids&lt;span style="color:#f92672">.&lt;/span>index(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max(aids))][&lt;span style="color:#e6db74">&amp;#39;baseUrl&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>system(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;aria2c -x10 -k1M --file-allocation=none &amp;#34;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34; --header=&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34; --header=&amp;#34;Accept: */*&amp;#34; --header=&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34; --header=&amp;#34;Referer: https://www.bilibili.com/video/av&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34; --header=&amp;#34;Origin: https://www.bilibili.com&amp;#34; --header=&amp;#34;DNT: 1&amp;#34; --header=&amp;#34;Connection: keep-alive&amp;#34; --header=&amp;#34;Pragma: no-cache&amp;#34; --header=&amp;#34;Cache-Control: no-cache&amp;#34; --out &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_v.m4s&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(vurl, aid, cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>system(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;aria2c.exe -x10 -k1M --file-allocation=none &amp;#34;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34; --header=&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34; --header=&amp;#34;Accept: */*&amp;#34; --header=&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34; --header=&amp;#34;Referer: https://www.bilibili.com/video/av&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34; --header=&amp;#34;Origin: https://www.bilibili.com&amp;#34; --header=&amp;#34;DNT: 1&amp;#34; --header=&amp;#34;Connection: keep-alive&amp;#34; --header=&amp;#34;Pragma: no-cache&amp;#34; --header=&amp;#34;Cache-Control: no-cache&amp;#34; --out &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_a.m4s&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(aurl, aid, cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>system(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;ffmpeg -i &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_v.m4s -i &lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_a.m4s -c:v copy -c:a copy -strict experimental av&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.mp4&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(cid, cid, aid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_a.m4s&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_v.m4s&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(cid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> playinfo&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;durl&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vlink &lt;span style="color:#f92672">=&lt;/span> [x[&lt;span style="color:#e6db74">&amp;#39;url&amp;#39;&lt;/span>] &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> playinfo[&lt;span style="color:#e6db74">&amp;#39;durl&amp;#39;&lt;/span>]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(vlink)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> p, link &lt;span style="color:#f92672">in&lt;/span> enumerate(vlink):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>system(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&amp;#39;aria2c.exe -x10 -k1M --file-allocation=none &amp;#34;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34; --header=&amp;#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&amp;#34; --header=&amp;#34;Accept: */*&amp;#34; --header=&amp;#34;Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2&amp;#34; --header=&amp;#34;Referer: https://www.bilibili.com/video/av&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#34; --header=&amp;#34;Origin: https://www.bilibili.com&amp;#34; --header=&amp;#34;DNT: 1&amp;#34; --header=&amp;#34;Connection: keep-alive&amp;#34; --header=&amp;#34;Pragma: no-cache&amp;#34; --header=&amp;#34;Cache-Control: no-cache&amp;#34; --out av&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">_&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.flv&amp;#39;&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(link, aid, aid, p))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;merge.txt&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;a&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> t:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>listdir(&lt;span style="color:#e6db74">&amp;#39;.&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> str(aid) &lt;span style="color:#f92672">in&lt;/span> x:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> t&lt;span style="color:#f92672">.&lt;/span>write(&lt;span style="color:#e6db74">&amp;#34;file &amp;#39;&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(x))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>system(&lt;span style="color:#e6db74">&amp;#39;ffmpeg -f concat -i merge.txt -c copy av&lt;/span>&lt;span style="color:#e6db74">{}&lt;/span>&lt;span style="color:#e6db74">.mp4&amp;#39;&lt;/span>&lt;span style="color:#f92672">.&lt;/span>format(aid))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(&lt;span style="color:#e6db74">&amp;#39;merge.txt&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>listdir(&lt;span style="color:#e6db74">&amp;#39;.&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> x&lt;span style="color:#f92672">.&lt;/span>endswith(&lt;span style="color:#e6db74">&amp;#39;.flv&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> os&lt;span style="color:#f92672">.&lt;/span>remove(x)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;down.txt&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aids &lt;span style="color:#f92672">=&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>findall(&lt;span style="color:#e6db74">r&lt;/span>&lt;span style="color:#e6db74">&amp;#39;av(\d+)&amp;#39;&lt;/span>, f&lt;span style="color:#f92672">.&lt;/span>read())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> aids:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> videourl(x, videocid(x))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;__main__&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> main()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="todo">TODO&lt;/h2>
&lt;ul>
&lt;li>éƒ¨åˆ†è§†é¢‘çš„è§†é¢‘æµæ˜¯ HEVC ç¼–ç è€Œä¸æ˜¯ x264ï¼ŒWindows è¯»ä¸å‡º MP4 ç¼©ç•¥å›¾ï¼Œè€ƒè™‘è¦ä¸è¦åˆ¤æ–­è‡ªåŠ¨è½¬ç ã€‚&lt;/li>
&lt;li>aria2 å’Œ ffmpeg çš„å‚æ•°å•ç‹¬å­˜æ–‡ä»¶æ–¹ä¾¿ä¿®æ”¹ï¼Œä¸ç„¶æ¯æ¬¡éƒ½è¦é‡æ–°ç¼–è¯‘ exeã€‚&lt;/li>
&lt;li>åˆ† P é€‰æ‹©å’Œæ¸…æ™°åº¦é€‰æ‹©&lt;/li>
&lt;/ul>
&lt;h2 id="eof">EOF&lt;/h2></description></item><item><title>æ²¡æœ‰ KMSCON çš„ç¬¬ä¸€å¤©ï¼Œæƒ³ä»–</title><link>https://naizi.ch/2019/01/10/%E6%B2%A1%E6%9C%89-kmscon-%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9%E6%83%B3%E4%BB%96/</link><pubDate>Thu, 10 Jan 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/01/10/%E6%B2%A1%E6%9C%89-kmscon-%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9%E6%83%B3%E4%BB%96/</guid><description>&lt;p>å› ä¸ºæ ‘è“æ´¾ç”¨äº†å®˜æ–¹ç³»ç»Ÿï¼ŒåŸæœ¬åœ¨ Arch ä¸Šåˆ©ç”¨&lt;a class="link" href="https://wiki.archlinux.org/index.php/KMSCON" target="_blank" rel="noopener"
>KMSCON&lt;/a>æ¥å›æ˜¾ä¸­æ–‡å­—ç¬¦çš„æ–¹å¼ä¸å¯è¡Œäº†ï¼Œæ²‰ç—›æ‚¼å¿µã€‚&lt;/p>
&lt;p>ä¸ä¼šç¼–è¯‘æ˜¯ç½ªé­ç¥¸é¦–ï¼Œè€Œä¸”åŒ…ä¾èµ–å…³ç³»çœ‹å¾—å¤´å¤§ï¼Œå®åœ¨ä¸æƒ³è‡ªå·±è§£å†³ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="å‰æƒ…æè¦">å‰æƒ…æè¦&lt;/h2>
&lt;p>å› ä¸º tty è®¾å¤‡ä¸æ”¯æŒ CJK å­—ç¬¦ï¼ŒåŸæœ¬ crontab ä»»åŠ¡åªè¦é‡å®šå‘è¾“å‡ºåˆ°&lt;code>KMSCON&lt;/code>æ¨¡æ‹Ÿçš„ pts è®¾å¤‡ä¸Šå°±èƒ½æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ï¼Œç°åœ¨ä¸å¾—ä¸å›å½’èµ·ç‚¹ã€‚&lt;/p>
&lt;p>é€‰æ‹©åªæœ‰ä¸¤ç§ï¼š&lt;/p>
&lt;ol>
&lt;li>ç ”ç©¶æ€ä¹ˆåœ¨ debian ä¸ŠæŠŠ&lt;code>KMSCON&lt;/code>ç¼–è¯‘è¿‡å»&lt;/li>
&lt;li>ç ”ç©¶æ€ä¹ˆåœ¨å›¾å½¢ç•Œé¢è¾“å‡ºå·¥ä½œç”¨è„šæœ¬çš„æ—¥å¿—&lt;/li>
&lt;/ol>
&lt;p>ç„¶å&lt;code>KMSCON&lt;/code>çš„ç¼–è¯‘ä¾èµ–å®åœ¨æœ‰ç‚¹å¤šï¼Œåœ¨ debian å†…çš„åŒ…ååˆéƒ½ä¸ä¸€æ ·ã€‚æœ¬æ¥å°±åªä¼šæŒ‰ç…§æ•™ç¨‹ &lt;code>./configure&lt;/code>ã€&lt;code>make&lt;/code>ã€&lt;code>make install&lt;/code>ä¸‰æ­¥èµ°çš„æˆ‘å®åœ¨æ˜¯åº”ä»˜ä¸æ¥ã€‚&lt;/p>
&lt;p>ç»“æœåªèƒ½å½“&lt;code>KMSCON&lt;/code>ä»æ¥ä¸å­˜åœ¨ï¼Œåœ¨å›¾å½¢ç•Œé¢å¯»æ‰¾è§£å†³åŠæ³•ã€‚&lt;/p>
&lt;h2 id="å˜é€šæ³•">å˜é€šæ³•&lt;/h2>
&lt;p>æœç´¢ä¹‹åå‘ç°çš„ç¡®æœ‰ä»ç»ˆç«¯å¼¹å›¾å½¢ç•Œé¢çš„æ–¹å¼ï¼Œåªéœ€è¦æŒ‡å®šæ˜¾ç¤ºè®¾å¤‡å°±è¡Œäº†ï¼š&lt;/p>
&lt;blockquote>
&lt;p>DISPLAY=:0.0 command&lt;/p>
&lt;/blockquote>
&lt;p>å› ä¸ºæˆ‘çš„ç›®çš„åªæ˜¯éœ€è¦ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œæ‰€ä»¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&amp;gt; crontab -e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>@reboot sleep &lt;span style="color:#ae81ff">30&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> DISPLAY&lt;span style="color:#f92672">=&lt;/span>:0.0 /usr/bin/lxterminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·ä¾¿ä¼šåœ¨ç³»ç»Ÿå¯åŠ¨ä¹‹åè‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œåˆ†é…ä¸€ä¸ª pts çš„è®¾å¤‡ï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€ä¸ªç»ˆç«¯çª—å£æ‰€ä»¥ä¸€å®šæ˜¯ pts/0&lt;/p>
&lt;p>å†æŠŠå‰©ä¸‹çš„å®šæ—¶è„šæœ¬è¾“å‡ºå…¨éƒ¨é‡å®šå‘åˆ° &lt;code>/dev/pts/0&lt;/code> å°±è¡Œäº†&lt;/p>
&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>æ„Ÿè§‰è¿˜æ˜¯ä¼šæœ‰å›åˆ° Arch çš„ä¸€å¤©ï¼ŒArch çœŸé¦™ã€‚&lt;/p></description></item><item><title>å¾®åšä¿¡æ¯æµå¹¿å‘ŠæŠ“å–</title><link>https://naizi.ch/2019/01/05/%E5%BE%AE%E5%8D%9A%E4%BF%A1%E6%81%AF%E6%B5%81%E5%B9%BF%E5%91%8A%E6%8A%93%E5%8F%96/</link><pubDate>Sat, 05 Jan 2019 00:00:00 +0000</pubDate><guid>https://naizi.ch/2019/01/05/%E5%BE%AE%E5%8D%9A%E4%BF%A1%E6%81%AF%E6%B5%81%E5%B9%BF%E5%91%8A%E6%8A%93%E5%8F%96/</guid><description>&lt;p>å¾®åšæ³¨å†Œäº†ä¸ªå°å·ï¼Œä¸ºäº†çœ‹çœ‹éƒ½æ˜¯ä»€ä¹ˆç‰›é¬¼è›‡ç¥åœ¨å¾®åšé‡Œæ¨é€ä¿¡æ¯æµå¹¿å‘Šï¼Œå°è¯•æŠ“å–ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>è™½ç„¶æœ‰&lt;a class="link" href="https://github.com/tiansh/yaofang" target="_blank" rel="noopener"
>YAWFï¼ˆYet Another Weibo Filterï¼‰&lt;/a>è¿™æ ·å¥½ç”¨çš„è„šæœ¬å¯ä»¥å±è”½å¹¿å‘Šï¼Œä½†å±è”½äº†å°±çœ‹ä¸åˆ°äº†ã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="æ‰¾åˆ°-api-æ¥å£">æ‰¾åˆ° API æ¥å£&lt;/h2>
&lt;p>F12 åˆ‡æ¢åˆ° Networkï¼Œåœ¨é¦–é¡µåˆ·æ–°é¡µé¢ï¼Œç­›é€‰æ•æ‰åˆ° api æ¥å£&lt;code>https://weibo.com/aj/mblog/fsearch&lt;/code>ã€‚&lt;/p>
&lt;p>æ–°å»ºæ ‡ç­¾é¡µè®¿é—®ï¼Œå»æ‰ä¸å¿…è¦çš„å‚æ•°ï¼ˆåŒ…æ‹¬ä¸€å †ç”¨æ¥æŒ‡å®šä¸Šä¸‹æ–‡åŒºé—´å’Œå·²è¯»åˆ†ç•Œçº¿çš„ idï¼‰ï¼Œåªç•™ä¸‹å¿…è¦çš„éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>ç„¶åç›´æ¥ä¸Šä»£ç å¼€å§‹çˆ¬å–å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>headers &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;User-Agent&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;Mozilla/5.0 (X11; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Accept-Language&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;en-US,en;q=0.5&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;DNT&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Connection&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;keep-alive&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Upgrade-Insecure-Requests&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Cache-Control&amp;#39;&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;max-age=0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;Cookie&amp;#39;&lt;/span>: cookie
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>params &lt;span style="color:#f92672">=&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;ajwvr&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;6&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;pre_page&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;page&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;1&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;pagebar&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>response &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;https://weibo.com/aj/mblog/fsearch&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> headers&lt;span style="color:#f92672">=&lt;/span>headers, params&lt;span style="color:#f92672">=&lt;/span>params)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿”å›æ•°æ®æ˜¯ json ç»“æ„ï¼Œåœ¨&lt;code>data&lt;/code>å­—æ®µé‡Œå­˜æ”¾äº†é¡µé¢å†…å®¹ï¼Œè¿™é‡Œç”¨ lxml åº“è§£æï¼Œä¿å­˜ html æ–‡ä»¶è¿›è¡Œä¸‹ä¸€æ­¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> lxml &lt;span style="color:#f92672">import&lt;/span> etree
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>html &lt;span style="color:#f92672">=&lt;/span> etree&lt;span style="color:#f92672">.&lt;/span>HTML(result[&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;feed.html&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;w&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(etree&lt;span style="color:#f92672">.&lt;/span>tostring(html, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;unicode&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="css-ç­›é€‰å¹¿å‘Šå†…å®¹">CSS ç­›é€‰å¹¿å‘Šå†…å®¹&lt;/h2>
&lt;p>æ‰“å¼€ä¿å­˜çš„ htmlï¼Œæ ¼å¼åŒ–ä¸€ä¸‹ä»£ç ï¼Œæ‰¾åˆ°å­˜åœ¨&lt;code>feedtype=&amp;quot;ad&amp;quot;&lt;/code>å±æ€§çš„èŠ‚ç‚¹ï¼ˆå› ä¸ºä¸æ˜¯æ¯æ¬¡è·å–éƒ½ä¼šæœ‰ä¿¡æ¯æµå¹¿å‘Šï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦è·å–å¾ˆå¤šæ¬¡ï¼‰ã€‚&lt;/p>
&lt;p>ç„¶åç»§ç»­å¾€ä¸‹çœ‹å­èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°å…·ä½“çš„å¾®åšé“¾æ¥ï¼š&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2019-01-05-weibo-feed-adver/2019-01-05_17-47.png"
loading="lazy"
alt="ä¿¡æ¯æµ HTML"
>&lt;/p>
&lt;p>è·å–æ­¤èŠ‚ç‚¹çš„ xpathï¼š&lt;code>&amp;quot;//div[@feedtype]//a[@action-history='rec=1']/@action-data&amp;quot;&lt;/code>&lt;/p>
&lt;p>ç»“åˆæ­£åˆ™è¡¨è¾¾å¼æå–é“¾æ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> re
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>html &lt;span style="color:#f92672">=&lt;/span> etree&lt;span style="color:#f92672">.&lt;/span>HTML(result[&lt;span style="color:#e6db74">&amp;#39;data&amp;#39;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>links &lt;span style="color:#f92672">=&lt;/span> html&lt;span style="color:#f92672">.&lt;/span>xpath(&lt;span style="color:#e6db74">&amp;#34;//div[@feedtype]//a[@action-history=&amp;#39;rec=1&amp;#39;]/@action-data&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">for&lt;/span> link &lt;span style="color:#f92672">in&lt;/span> links:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> adver &lt;span style="color:#f92672">=&lt;/span> re&lt;span style="color:#f92672">.&lt;/span>findall(&lt;span style="color:#e6db74">r&lt;/span>&lt;span style="color:#e6db74">&amp;#39;url=([^&amp;amp;]+)&amp;amp;&amp;#39;&lt;/span>, link)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;adver.list&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;a&amp;#39;&lt;/span>, encoding&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;utf-8-sig&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(str(adver)&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€åé€šè¿‡ crontab è®¾ç½®æˆå®šæ—¶ä»»åŠ¡è‡ªåŠ¨ç›‘æµ‹ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-crontab.conf" data-lang="crontab.conf">* * * * * python weibo_adver.py
&lt;/code>&lt;/pre>&lt;h2 id="è‡ªåŠ¨æ›´æ–°-cookie">è‡ªåŠ¨æ›´æ–° cookie&lt;/h2>
&lt;p>é«˜é¢‘ç‡çš„è¿ç»­è®¿é—®å¯èƒ½ä¼šé€ æˆå¾®åšæç¤ºå¸å·å¼‚å¸¸ï¼Œè€Œä¸”è¿è¡Œæ—¶é—´ä¹…äº† cookie ä¹Ÿä¼šè¿‡æœŸï¼Œéœ€è¦è‡ªåŠ¨é‡æ–°ç™»å½•è·å– cookieã€‚&lt;/p>
&lt;p>å¾®åšçš„è‡ªåŠ¨ç™»å½•è½®å­å¾ˆå¤šï¼Œä¸ç”¨è‡ªå·±å¦å†™ã€‚cookie è¿‡æœŸçš„åˆ¤æ–­å°±æ¯”è¾ƒç²—æš´äº†ï¼Œå¦‚æœè¯»å–è¿”å›çš„ json æŠ›å‡ºå¼‚å¸¸ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯ cookie è¿‡æœŸé€ æˆçš„ã€‚&lt;/p>
&lt;p>å¦å¤–æµ‹è¯•å‘ç°ï¼Œä¸å¸¦ cookie çš„ api è®¿é—®æ˜¯ä¼šè¿”å›æ­£å¸¸çš„ json æ•°æ®çš„ï¼ˆä½†ä¸åŒ…å« html å†…å®¹ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">login&lt;/span>(username, password):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;somecode balabala&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;cookies&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;w&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> f&lt;span style="color:#f92672">.&lt;/span>write(cookies)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>exists(&lt;span style="color:#e6db74">&amp;#39;./cookies&amp;#39;&lt;/span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> open(&lt;span style="color:#e6db74">&amp;#39;./cookies&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;r&amp;#39;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> f:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cookie &lt;span style="color:#f92672">=&lt;/span> f&lt;span style="color:#f92672">.&lt;/span>read()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;somecode balabala&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#39;https://weibo.com/aj/mblog/fsearch&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> headers&lt;span style="color:#f92672">=&lt;/span>headers, params&lt;span style="color:#f92672">=&lt;/span>params)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>loads(response&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> json&lt;span style="color:#f92672">.&lt;/span>decoder&lt;span style="color:#f92672">.&lt;/span>JSONDecodeError:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> login(username, password)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;somecode balabala&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;__main__&amp;#34;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> main()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>å°±ç»“æœè€Œè¨€æ•ˆæœè¿˜ä¸é”™ï¼Œä½†ä¹Ÿå‘ç°ä¿¡æ¯æµå¹¿å‘Šé‡Œè¿˜ä¼šæœ‰ä¸€äº›å…³æ³¨äº†çš„åšä¸»çš„æ­£å¸¸å¾®åšå†…å®¹ï¼Œå¯ä»¥è€ƒè™‘å’Œè‡ªå·±çš„å…³æ³¨åˆ—è¡¨å¯¹æ¯”æ¥ç­›é™¤ã€‚&lt;/p>
&lt;p>&lt;img src="https://naizi.ch/pic/2019-01-05-weibo-feed-adver/2019-01-05_18-03.png"
loading="lazy"
alt="ä¿¡æ¯æµå¹¿å‘Š"
>&lt;/p></description></item><item><title>ä»é›¶å¼€å§‹ Raspberry Pi</title><link>https://naizi.ch/2018/12/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B-raspberry-pi/</link><pubDate>Sat, 08 Dec 2018 00:00:00 +0000</pubDate><guid>https://naizi.ch/2018/12/08/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B-raspberry-pi/</guid><description>&lt;p>ä¸ºäº†è®©åƒç°çš„æ ‘è“æ´¾é‡æ–°å¼€å§‹å·¥ä½œï¼Œè¿™å›ä¸çæŠ˜è…¾äº†ï¼Œç›´æ¥ç”¨å®˜æ–¹ç³»ç»Ÿã€‚&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;p>æŒ‰ç…§&lt;a class="link" href="https://www.raspberrypi.org/downloads/noobs/" target="_blank" rel="noopener"
>å®˜æ–¹æ•™ç¨‹&lt;/a>é‡‡ç”¨ NOOBS å®‰è£…ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©ç”¨&lt;a class="link" href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener"
>é•œåƒå®‰è£…&lt;/a>ï¼Œä¸è®ºå“ªä¸€ç§ï¼Œé€‰æ‹© â†“&lt;/p>
&lt;p>&lt;code>Raspbian Stretch with desktop and recommended software&lt;/code>&lt;/p>
&lt;p>å®‰è£…å®Œæˆåï¼Œé¦–æ¬¡è¿›å…¥å›¾å½¢ç•Œé¢ï¼Œé€‰æ‹©é¦–é€‰é¡¹ä¸­çš„ &lt;code>Raspberry Pi Configuration&lt;/code> ï¼Œåœ¨ &lt;code>Interfaces&lt;/code> ä¹¦ç­¾é¡µå¯ç”¨ &lt;code>SSH&lt;/code>, &lt;code>VNC&lt;/code>ï¼Œä¹‹åå°±å¯ä»¥ä¸ç”¨å¦æ¥é”®é¼ äº†ã€‚&lt;/p>
&lt;p>è®°å¾—åœ¨ &lt;code>Localisation&lt;/code> ä¹¦ç­¾é¡µè®¾å®šå¥½ &lt;code>WiFi Country&lt;/code>ã€‚&lt;/p>
&lt;h2 id="è¿æ¥-wifi">è¿æ¥ WiFi&lt;/h2>
&lt;p>å› ä¸ºå…¬å¸ WiFi ä½¿ç”¨äº† WPA-EAP åè®®ï¼Œæ ‘è“æ´¾ä¸æ˜¾ç¤ºçƒ­ç‚¹ï¼Œè®©æˆ‘ä¸€åº¦ä»¥ä¸ºæ ‘è“æ´¾ä¸èƒ½è¿æ¥æ­¤ç±» WiFiã€‚åæ¥åœ¨&lt;a class="link" href="https://eparon.me/2016/09/09/rpi3-enterprise-wifi.html" target="_blank" rel="noopener"
>è¿™ç¯‡æ–‡ç« &lt;/a>çš„å¸®åŠ©ä¸‹ï¼Œé€šè¿‡ä¿®æ”¹ &lt;code>wpa_supplicant.conf&lt;/code> è¿æ¥æˆåŠŸï¼Œä½†æ˜¯ WiFi åˆ—è¡¨ä¸­å¯¹åº” SSID é€‰é¡¹ä¸ºç°è‰²ä¸å¯ç‚¹å‡»ï¼Œè¿·ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¿®æ”¹ /etc/wpa_supplicant/wpa_supplicant.conf&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code class="language-textile" data-lang="textile">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=CN
network={
ssid=&amp;#34;OfficeWiFiSSID&amp;#34;
key_mgmt=WPA-EAP
identity=&amp;#34;username&amp;#34;
password=&amp;#34;password&amp;#34;
}
&lt;/code>&lt;/pre>&lt;h2 id="è½¯ä»¶æ›´æ–°">è½¯ä»¶æ›´æ–°&lt;/h2>
&lt;p>æ›´æ¢è½¯ä»¶æºï¼Œè¿™ä¸ªä¸å¤šè¯´äº†ï¼Œå›½å†…æ¨è &lt;a class="link" href="https://mirrors.ustc.edu.cn/" target="_blank" rel="noopener"
>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦&lt;/a> ã€ &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener"
>æ¸…åå¤§å­¦&lt;/a> ã€ &lt;a class="link" href="https://mirrors.163.com/" target="_blank" rel="noopener"
>ç½‘æ˜“å¼€æºé•œåƒç«™&lt;/a> çš„é•œåƒã€‚&lt;/p>
&lt;p>åœ¨ apt æ›´æ–°å‰ï¼Œå…ˆåˆ é™¤ä¸å¿…è¦çš„è½¯ä»¶ã€‚åæ­£å‘¨ä¹Ÿæ˜¯è¦å¸è½½çš„ï¼Œæ²¡å¿…è¦è®©ä»–ä»¬ä¸‹è½½å®‰è£…æ›´æ–°ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt-get remove --purge python3-pygame python-pygame scratch nuscratch claws-mail smartsim sonic-pi minecraft-pi python-minecraftpi wolfram-engine scratch bluej nodered greenfoot scratch2 libreoffice libreoffice-base libreoffice-core chromium-browser thonny python3-thonny python-sense-emu python3-sense-emu python-sense-emu-doc sense-emu-tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get autoremove
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get dist-upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¸è½½è¿™éƒ¨åˆ†åº”ç”¨åï¼Œä¼šæœ‰ä¸€éƒ¨åˆ†æ–‡ä»¶æ®‹ç•™ï¼Œé€šè¿‡ VNC è¿œç¨‹è¿›å»æ‰“å¼€ä»¥ä¸‹ä¸‰ä¸ªç›®å½•&lt;/p>
&lt;blockquote>
&lt;p>/usr/share/applications/&lt;/p>
&lt;p>/usr/share/raspi-ui-overrides/applications/&lt;/p>
&lt;p>/usr/share/mimelnk/application/&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨ä¸‰ä¸ªç›®å½•é‡Œæ‰¾åˆ°å›¾æ ‡æ˜¾ç¤ºå¤±æ•ˆçš„æ–‡ä»¶ï¼Œåˆ æ‰å®ƒä»¬ã€‚&lt;/p>
&lt;h2 id="è‡ªåŠ¨è·å–æ ‘è“æ´¾-ip">è‡ªåŠ¨è·å–æ ‘è“æ´¾ IP&lt;/h2>
&lt;p>æ¥ä¸‹æ¥é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå¯èƒ½æ˜¯å› ä¸ºè”ç½‘è®¾å¤‡å®åœ¨å¤ªå¤šï¼Œå…¬å¸ WiFi åˆ†é…çš„ IP åœ°å€çŸ­æœŸå†…æ˜¯å’Œ MAC ç»‘å®šä¸å˜çš„ï¼Œä½†å‡å¦‚é•¿æ—¶é—´æœªè¿æ¥ï¼Œé‡æ–°è¿æ¥å°±ä¼šå‘åˆ†é…ä¸åŒçš„ IPã€‚&lt;/p>
&lt;p>å¯¼è‡´ SSH è®°ä½ IP å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œåªèƒ½æ¯æ¬¡ç”¨ VNC æˆ–è€… nmap æ‰«æç½‘æ®µæ‰¾åˆ°æ ‘è“æ´¾çš„åœ°å€ã€‚&lt;/p>
&lt;p>Google åå‚è€ƒ &lt;a class="link" href="https://ariandy1.wordpress.com/2014/04/08/linux-send-email-when-ip-address-changes/" target="_blank" rel="noopener"
>è¿™ç¯‡æ–‡ç« &lt;/a> è®¾ç½®ï¼Œè®©æ ‘è“æ´¾æ¯æ¬¡ IP å˜åŠ¨åè‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥è‡ªå·±ã€‚&lt;/p>
&lt;blockquote>
&lt;p>sudo apt-get install ssmtp mailutils&lt;/p>
&lt;p>nano /etc/ssmtp/ssmtp.conf&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code class="language-textile" data-lang="textile">root=youremail@gmail.com
mailhub=smtp.gmail.com:587
AuthUser=youremail@gmail.com
AuthPass=yourpassword
UseTLS=YES
UseSTARTTLS=YES
AuthMethod=LOGIN
&lt;/code>&lt;/pre>&lt;blockquote>
&lt;p>nano /home/pi/checkip.sh&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MYIP&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>ifconfig | grep -Eo &lt;span style="color:#e6db74">&amp;#39;inet (addr:)?([0-9]*\.){3}[0-9]*&amp;#39;&lt;/span> | grep -Eo &lt;span style="color:#e6db74">&amp;#39;([0-9]*\.){3}[0-9]*&amp;#39;&lt;/span> | grep -v &lt;span style="color:#e6db74">&amp;#39;127.0.0.1&amp;#39;&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TIME&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>date&lt;span style="color:#e6db74">`&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LASTIPFILE&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;/home/pi/.last_ip_addr&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LASTIP&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>cat &lt;span style="color:#e6db74">${&lt;/span>LASTIPFILE&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">`&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> &lt;span style="color:#e6db74">${&lt;/span>MYIP&lt;span style="color:#e6db74">}&lt;/span> !&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">${&lt;/span>LASTIP&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> &lt;span style="color:#e6db74">${&lt;/span>MYIP&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;LOST&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;Sending E-mail..&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#e6db74">&amp;#34;Hello\n\nTimestamp = &lt;/span>&lt;span style="color:#e6db74">${&lt;/span>TIME&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">\nIP = &lt;/span>&lt;span style="color:#e6db74">${&lt;/span>MYIP&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">\n\nBye&amp;#34;&lt;/span> | &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> /usr/bin/mail -s &lt;span style="color:#e6db74">&amp;#34;[INFO] Raspberrypi New IP&amp;#34;&lt;/span> youremail@gmail.com;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">${&lt;/span>MYIP&lt;span style="color:#e6db74">}&lt;/span> &amp;gt; &lt;span style="color:#e6db74">${&lt;/span>LASTIPFILE&lt;span style="color:#e6db74">}&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;No IP change!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>chmod +x checkip.sh&lt;/p>
&lt;p>crontab -e&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code class="language-textile" data-lang="textile">*/30 * * * * /home/pi/checkip.sh
&lt;/code>&lt;/pre>&lt;h2 id="eof">EOF&lt;/h2>
&lt;p>äºæ˜¯æ ‘è“æ´¾ç»ˆäºå¯ä»¥ä¸€è¾¹é€šç”µä¸€è¾¹åƒç°äº†ã€‚&lt;/p></description></item></channel></rss>